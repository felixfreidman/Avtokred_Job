"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var mobileHeaderBtn=document.getElementById("showMenu"),mobileHeaderLayer=document.getElementById("headerLayer");function toggleHeaderMenu(){mobileHeaderLayer.classList.toggle("btn-clicked--show"),mobileHeaderBtn.classList.toggle("header-btn--clicked")}mobileHeaderBtn.addEventListener("click",toggleHeaderMenu),mobileHeaderLayer.addEventListener("click",toggleHeaderMenu);var allUncertainSlides=document.querySelectorAll(".uncertain-form__slide"),allUncertainSlidesHeaders=document.querySelectorAll(".slide__header--uncertain"),allDataHeader=[];allUncertainSlidesHeaders.forEach(function(e){e=e.getAttribute("data-slide-header-uncertain");allDataHeader.push(e)});var uncertainFormNavigation=document.getElementById("uncertainNavigation"),listItemUncertainCounter=1;function checkWhatSlideIsShowedInUncertainForm(){allUncertainSlides.forEach(function(e){var t=e.getAttribute("id");t.includes("First")&&e.classList.contains("slide--show")?(document.getElementById("UncertainFirstSlideItem").classList.contains("list-navigation__bullet--active")||document.getElementById("UncertainFirstSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--disabled")||document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--disabled"),document.getElementById("UncertainThirdSlideItem").classList.contains("list-navigation__bullet--disabled")||document.getElementById("UncertainThirdSlideItem").classList.toggle("list-navigation__bullet--disabled")):t.includes("Second")&&e.classList.contains("slide--show")?(document.getElementById("UncertainFirstSlideItem").classList.contains("list-navigation__bullet--completed")||document.getElementById("UncertainFirstSlideItem").classList.toggle("list-navigation__bullet--completed"),document.getElementById("UncertainFirstSlideItem").classList.contains("list-navigation__bullet--active")&&document.getElementById("UncertainFirstSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--disabled")&&document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--disabled"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--active")||document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("uncertainStatusBar").classList.contains("progress-navigation-bar--33p")||(document.getElementById("uncertainStatusBar").classList.remove("progress-navigation-bar--0p"),document.getElementById("uncertainStatusBar").classList.add("progress-navigation-bar--33p"))):t.includes("Third")&&e.classList.contains("slide--show")&&(document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--completed")||document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--completed"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--active")&&document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("UncertainThirdSlideItem").classList.contains("list-navigation__bullet--disabled")&&document.getElementById("UncertainThirdSlideItem").classList.toggle("list-navigation__bullet--disabled"),document.getElementById("UncertainThirdSlideItem").classList.contains("list-navigation__bullet--active")||document.getElementById("UncertainThirdSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("uncertainStatusBar").classList.contains("progress-navigation-bar--33p")&&(document.getElementById("uncertainStatusBar").classList.remove("progress-navigation-bar--33p"),document.getElementById("uncertainStatusBar").classList.add("progress-navigation-bar--95p")))})}allDataHeader.forEach(function(e){var t=document.createElement("li");t.classList.add("list-navigation__bullet");var n=document.createElement("span");n.classList.add("bullet-title"),n.textContent=e,t.append(n);var i="";switch(listItemUncertainCounter){case 1:i="First";break;case 2:i="Second";break;case 3:i="Third";break;case 4:i="Fourth";break;case 5:i="Fifth"}t.id="Uncertain".concat(i,"SlideItem"),listItemUncertainCounter++,uncertainFormNavigation.append(t)});var allNextUncertainBtns=document.querySelectorAll(".btn-uncertain--next");allNextUncertainBtns.forEach(function(i){i.addEventListener("click",function(){var e=i.getAttribute("id"),t="";switch(e=e.replace("Next","")){case"SecondSlide":t="FirstSlide";break;case"ThirdSlide":t="SecondSlide"}var n=document.getElementById(t),e=document.getElementById(e);n.classList.toggle("slide--show"),n.classList.toggle("slide--hidden"),e.classList.toggle("slide--show"),e.classList.toggle("slide--hidden"),checkWhatSlideIsShowedInUncertainForm()})});var allPreviousUncertainBtns=document.querySelectorAll(".btn-uncertain--previous");allPreviousUncertainBtns.forEach(function(i){i.addEventListener("click",function(){var e=i.getAttribute("id"),t="";switch(e=e.replace("Previous","")){case"FirstSlide":t="SecondSlide";break;case"SecondSlide":t="ThirdSlide"}var n=document.getElementById(t),e=document.getElementById(e);n.classList.toggle("slide--show"),n.classList.toggle("slide--hidden"),e.classList.toggle("slide--show"),e.classList.toggle("slide--hidden")})}),checkWhatSlideIsShowedInUncertainForm();var userNameInput=document.getElementById("userName"),userPhoneInput=document.getElementById("userPhone");$(document).ready(function(){$(".submit-button").addClass("submit-button--disabled"),$("#userName").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userPhone").val().length&&$(".submit-button").removeClass("submit-button--disabled")}),$("#userPhone").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userName").val().length&&$(".submit-button").removeClass("submit-button--disabled")})}),$("#userPhone").inputmask();var menu=[],HeadersArray=document.querySelectorAll(".attention-container__header");HeadersArray.forEach(function(e){e=e.getAttribute("data-info");menu.push(e)});var swiperGreet=new Swiper("#greetingSwipper",{pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menu[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"fade",speed:800,watchSlidesProgress:!0,watchVisibility:!0,disableOnInteraction:!0}),swiperBanks=new Swiper("#banksSwiper",{loop:!0,effect:"cards",speed:800,slidesPerView:4,autoplay:{delay:1},spaceBetween:50,disableOnInteraction:!1,breakpoints:{920:{slidesPerView:4},600:{slidesPerView:2},450:{slidesPerView:1}}});$(document).ready(function(){$("#sliderDebt").slider({range:"min",animate:!0,value:4e5,min:1e5,max:5e6,slide:function(e,t){var n=$("#sliderDebt").slider("value"),i=$("#sliderDeposit").slider("value");"05"===(l=_toConsumableArray(document.querySelectorAll(".controller-input")).filter(function(e){if(e.checked)return e})[0].id.replace("month",""))&&(l=.5);var a=.00325,l=parseInt(l),n=parseInt(n),l=(n-=i=parseInt(i))*a*Math.floor(Math.pow(1+a,l)/(Math.pow(1+a,l)-1));$,$("#depositHalf").text(Math.floor(.8*n/2)),$("#depositMax").text(Math.floor(.8*n));n=parseInt($("#depositMax").text());$("#sliderDeposit").slider("option","max",n),$("#interestResult").text(Math.floor(l)+" ₽")}}),$("#sliderDeposit").slider({range:"min",animate:!0,value:4e4,min:0,max:8e4,slide:function(e,t){var n=$("#sliderDebt").slider("value"),i=$("#sliderDeposit").slider("value");"05"===(l=_toConsumableArray(document.querySelectorAll(".controller-input")).filter(function(e){if(e.checked)return e})[0].id.replace("month",""))&&(l=.5);var a=.00325,l=parseInt(l),n=parseInt(n);n-=i=parseInt(i);l=Math.floor(n*a*(Math.pow(1+a,l)/(Math.pow(1+a,l)-1)));$("#interestResult").text(Math.floor(l)+" ₽")}})}),function(t){var e,n,i,a;function l(e,t){var n,i;1<e.originalEvent.touches.length||(e.preventDefault(),n=e.originalEvent.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i))}t.support.touch="ontouchend"in document,t.support.touch&&(e=t.ui.mouse.prototype,n=e._mouseInit,i=e._mouseDestroy,e._touchStart=function(e){!a&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(a=!0,this._touchMoved=!1,l(e,"mouseover"),l(e,"mousemove"),l(e,"mousedown"))},e._touchMove=function(e){a&&(this._touchMoved=!0,l(e,"mousemove"))},e._touchEnd=function(e){a&&(l(e,"mouseup"),l(e,"mouseout"),this._touchMoved||l(e,"click"),a=!1)},e._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),n.call(e)},e._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),i.call(e)})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyIsImNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsibnVtYmVyV2l0aENvbW1hcyIsIngiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJtb2JpbGVIZWFkZXJCdG4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibW9iaWxlSGVhZGVyTGF5ZXIiLCJ0b2dnbGVIZWFkZXJNZW51IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFsbFVuY2VydGFpblNsaWRlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhbGxVbmNlcnRhaW5TbGlkZXNIZWFkZXJzIiwiYWxsRGF0YUhlYWRlciIsImZvckVhY2giLCJoZWFkZXIiLCJzbGlkZUhlYWRlciIsImdldEF0dHJpYnV0ZSIsInB1c2giLCJ1bmNlcnRhaW5Gb3JtTmF2aWdhdGlvbiIsImxpc3RJdGVtVW5jZXJ0YWluQ291bnRlciIsImNoZWNrV2hhdFNsaWRlSXNTaG93ZWRJblVuY2VydGFpbkZvcm0iLCJzbGlkZSIsInNsaWRlSUQiLCJpbmNsdWRlcyIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwibmV3TGlzdEl0ZW0iLCJjcmVhdGVFbGVtZW50IiwibmV3TGlzdEl0ZW1IZWFkZXIiLCJ0ZXh0Q29udGVudCIsImFwcGVuZCIsImxldHRlcmVkQ291bnRlciIsImlkIiwiY29uY2F0IiwiYWxsTmV4dFVuY2VydGFpbkJ0bnMiLCJidXR0b24iLCJuZXh0U2xpZGVJRCIsInNsaWRlQWN0aXZlIiwic2xpZGVOZXh0IiwiYWxsUHJldmlvdXNVbmNlcnRhaW5CdG5zIiwidXNlck5hbWVJbnB1dCIsInVzZXJQaG9uZUlucHV0IiwiJCIsInJlYWR5IiwiYWRkQ2xhc3MiLCJrZXl1cCIsImNvbnNvbGUiLCJsb2ciLCJ0aGlzIiwidmFsIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJpbnB1dG1hc2siLCJtZW51IiwiSGVhZGVyc0FycmF5IiwiZWxlbWVudCIsIkhlYWRlclZhbHVlIiwic3dpcGVyR3JlZXQiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJyZW5kZXJCdWxsZXQiLCJpbmRleCIsImNsYXNzTmFtZSIsImxvb3AiLCJlZmZlY3QiLCJzcGVlZCIsIndhdGNoU2xpZGVzUHJvZ3Jlc3MiLCJ3YXRjaFZpc2liaWxpdHkiLCJkaXNhYmxlT25JbnRlcmFjdGlvbiIsInN3aXBlckJhbmtzIiwic2xpZGVzUGVyVmlldyIsImF1dG9wbGF5IiwiZGVsYXkiLCJzcGFjZUJldHdlZW4iLCJicmVha3BvaW50cyIsIjkyMCIsIjYwMCIsIjQ1MCIsInNsaWRlciIsInJhbmdlIiwiYW5pbWF0ZSIsInZhbHVlIiwibWluIiwibWF4IiwiZXZlbnQiLCJ1aSIsImRlYnRNb25leSIsImRlYnREZXBvc2l0IiwidXBkYXRlZERlYnRUaW1lIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiZmlsdGVyIiwicmFkaW8iLCJjaGVja2VkIiwiY29lZmljaWVudCIsInBhcnNlSW50IiwibW9udGhQYXltZW50IiwiTWF0aCIsImZsb29yIiwicG93IiwidGV4dCIsInVwZGF0ZWRNYXhWYWx1ZSIsIm1vdXNlUHJvdG8iLCJfbW91c2VJbml0IiwiX21vdXNlRGVzdHJveSIsInRvdWNoSGFuZGxlZCIsInNpbXVsYXRlTW91c2VFdmVudCIsInNpbXVsYXRlZFR5cGUiLCJ0b3VjaCIsInNpbXVsYXRlZEV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJwcmV2ZW50RGVmYXVsdCIsImNoYW5nZWRUb3VjaGVzIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsIndpbmRvdyIsInNjcmVlblgiLCJzY3JlZW5ZIiwiY2xpZW50WCIsImNsaWVudFkiLCJ0YXJnZXQiLCJkaXNwYXRjaEV2ZW50Iiwic3VwcG9ydCIsIm1vdXNlIiwicHJvdG90eXBlIiwiX3RvdWNoU3RhcnQiLCJfbW91c2VDYXB0dXJlIiwiX3RvdWNoTW92ZWQiLCJfdG91Y2hNb3ZlIiwiX3RvdWNoRW5kIiwic2VsZiIsImJpbmQiLCJ0b3VjaHN0YXJ0IiwicHJveHkiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsImNhbGwiLCJ1bmJpbmQiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiIrK0JBTUEsU0FBQUEsaUJBQUFDLEdBQ0EsT0FBQUEsRUFBQUMsV0FBQUMsUUFBQSx3QkFBQSxLQXlPQSxJQUFBQyxnQkFBQUMsU0FBQUMsZUFBQSxZQUNBQyxrQkFBQUYsU0FBQUMsZUFBQSxlQUlBLFNBQUFFLG1CQUNBRCxrQkFBQUUsVUFBQUMsT0FBQSxxQkFDQU4sZ0JBQUFLLFVBQUFDLE9BQUEsdUJBTEFOLGdCQUFBTyxpQkFBQSxRQUFBSCxrQkFDQUQsa0JBQUFJLGlCQUFBLFFBQUFILGtCQTRCQSxJQUFBSSxtQkFBQVAsU0FBQVEsaUJBQUEsMEJBQ0FDLDBCQUFBVCxTQUFBUSxpQkFDQSw2QkFFQUUsY0FBQSxHQUVBRCwwQkFBQUUsUUFBQSxTQUFBQyxHQUNBQyxFQUFBRCxFQUFBRSxhQUFBLCtCQUNBSixjQUFBSyxLQUFBRixLQUdBLElBQUFHLHdCQUFBaEIsU0FBQUMsZUFBQSx1QkFDQWdCLHlCQUFBLEVBaUNBLFNBQUFDLHdDQUNBWCxtQkFBQUksUUFBQSxTQUFBUSxHQUNBLElBQUFDLEVBQUFELEVBQUFMLGFBQUEsTUFDQU0sRUFBQUMsU0FBQSxVQUFBRixFQUFBZixVQUFBa0IsU0FBQSxnQkFDQXRCLFNBQ0FDLGVBQUEsMkJBQ0FHLFVBQUFrQixTQUFBLG9DQUVBdEIsU0FDQUMsZUFBQSwyQkFDQUcsVUFBQUMsT0FBQSxtQ0FFQUwsU0FDQUMsZUFBQSw0QkFDQUcsVUFBQWtCLFNBQUEsc0NBRUF0QixTQUNBQyxlQUFBLDRCQUNBRyxVQUFBQyxPQUFBLHFDQUVBTCxTQUNBQyxlQUFBLDJCQUNBRyxVQUFBa0IsU0FBQSxzQ0FFQXRCLFNBQ0FDLGVBQUEsMkJBQ0FHLFVBQUFDLE9BQUEsc0NBR0FlLEVBQUFDLFNBQUEsV0FDQUYsRUFBQWYsVUFBQWtCLFNBQUEsZ0JBRUF0QixTQUNBQyxlQUFBLDJCQUNBRyxVQUFBa0IsU0FBQSx1Q0FFQXRC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WUFBQSxTQUFBekMsSUFLQW9CLEdBSEExRCxLQUdBZ0YsY0FBQTFDLEVBQUF5QixjQUFBRyxlQUFBLE1BS0FSLEdBQUEsRUFSQTFELEtBV0FpRixhQUFBLEVBR0F0QixFQUFBckIsRUFBQSxhQUdBcUIsRUFBQXJCLEVBQUEsYUFHQXFCLEVBQUFyQixFQUFBLGVBT0FpQixFQUFBMkIsV0FBQSxTQUFBNUMsR0FHQW9CLElBS0ExRCxLQUFBaUYsYUFBQSxFQUdBdEIsRUFBQXJCLEVBQUEsZUFPQWlCLEVBQUE0QixVQUFBLFNBQUE3QyxHQUdBb0IsSUFLQUMsRUFBQXJCLEVBQUEsV0FHQXFCLEVBQUFyQixFQUFBLFlBR0F0QyxLQUFBaUYsYUFHQXRCLEVBQUFyQixFQUFBLFNBSUFvQixHQUFBLElBU0FILEVBQUFDLFdBQUEsV0FFQSxJQUFBNEIsRUFBQXBGLEtBR0FvRixFQUFBN0UsUUFBQThFLEtBQUEsQ0FDQUMsV0FBQTVGLEVBQUE2RixNQUFBSCxFQUFBLGVBQ0FJLFVBQUE5RixFQUFBNkYsTUFBQUgsRUFBQSxjQUNBSyxTQUFBL0YsRUFBQTZGLE1BQUFILEVBQUEsZUFJQTVCLEVBQUFrQyxLQUFBTixJQU1BN0IsRUFBQUUsY0FBQSxXQUVBLElBQUEyQixFQUFBcEYsS0FHQW9GLEVBQUE3RSxRQUFBb0YsT0FBQSxDQUNBTCxXQUFBNUYsRUFBQTZGLE1BQUFILEVBQUEsZUFDQUksVUFBQTlGLEVBQUE2RixNQUFBSCxFQUFBLGNBQ0FLLFNBQUEvRixFQUFBNkYsTUFBQUgsRUFBQSxlQUlBM0IsRUFBQWlDLEtBQUFOLEtBdEtBLENBeUtBUSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLypcbi8vIEBhdXRob3I6IGZlbGl4ZnJlaWRtYW5cbi8vIEBtYWlsOiBmZWxpeGZyZWlkbWFuZGV2QGdtYWlsLmNvbVxuLy8gQG5vdGU6INC40YnRgyDRgNCw0LHQvtGC0YNcbi8vICovXG4vLyAvLyDQktGA0LXQvNC10L3QvdC+0LUg0YDQtdGI0LXQvdC40LUg0LTQtdC70LXQvdC40Y8g0L3QsCDRgNCw0LfRgNGP0LTRiywg0L/QvtGC0L7QvCDQvNCw0YHQutCwINCx0YPQtNC10YIg0YDQsNCx0L7RgtCw0YLRjFxuZnVuY3Rpb24gbnVtYmVyV2l0aENvbW1hcyh4KSB7XG4gICAgcmV0dXJuIHgudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIi5cIik7XG59XG4vLyAvLyDQoNCw0LHQvtGC0LAg0LzQtdC90Y4g0Lgg0YHQvtC30LTQsNC90LjRjyDQvtCx0YrQtdC60YLQsCDQtNC70Y8g0LHRg9C00YPRidC10Lkg0L/QtdGA0LXQtNCw0YfQuCxcbi8vIC8vINC30LDRgtC10Lwg0YPQttC1INGC0YDQsNC90L/QuNC70Y/RhtC40Y8g0L3QsCDQstCw0LbQvdGL0LUg0LTQsNC90L3Ri9C1XG4vLyBjb25zdCBhbGxOZXh0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4vLyAgICAgXCIuZm9ybS1uYXZpZ2F0aW9uX19idXR0b24tLW5leHRcIlxuLy8gKTtcbi8vIGFsbE5leHRCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuLy8gICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgICAgICBsZXQgYnV0dG9uSWQgPSBidXR0b24uaWQ7XG4vLyAgICAgICAgIGJ1dHRvbklkID0gYnV0dG9uSWQucmVwbGFjZShcIkJ1dHRvblwiLCBcIlwiKTtcbi8vICAgICAgICAgbGV0IHBhcmVudElkID0gYnV0dG9uLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4vLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4vLyAgICAgICAgIGNvbnN0IHR5cGVzSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0W25hbWU9J2F1dG9TZWxlY3QnXVwiKTtcbi8vICAgICAgICAgdHlwZXNJbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbi8vICAgICAgICAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4vLyAgICAgICAgICAgICAgICAgbGV0IGNoZWNrZWRPcHRpb24gPSBpbnB1dC5pZDtcbi8vICAgICAgICAgICAgICAgICBkZXRhaWxlZEZvcm1PYmplY3QudHlwZSA9IGNoZWNrZWRPcHRpb24udG9TdHJpbmcoKTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgIGNvbnN0IGNyZWRpdFN1bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidElucHV0XCIpLnZhbHVlO1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhjcmVkaXRTdW0pO1xuLy8gICAgICAgICBkZXRhaWxlZEZvcm1PYmplY3QuY3JlZGl0ID0gY3JlZGl0U3VtLnRvU3RyaW5nKCk7XG4vLyAgICAgICAgIGNvbnN0IGNyZWRpdFRpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVJbnB1dFwiKS52YWx1ZTtcbi8vICAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LnRpbWUgPSBjcmVkaXRUaW1lLnRvU3RyaW5nKCk7XG4vLyAgICAgICAgIC8vIGNvbnN0IHVzZXJJbmNvbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluY29tZUlucHV0XCIpLnZhbHVlO1xuLy8gICAgICAgICAvLyBkZXRhaWxlZEZvcm1PYmplY3QuaW5jb21lID0gdXNlckluY29tZS50b1N0cmluZygpO1xuLy8gICAgICAgICBjb25zdCBjcmVkaXRJbnZlc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImludmVzdElucHV0XCIpLnZhbHVlO1xuLy8gICAgICAgICBkZXRhaWxlZEZvcm1PYmplY3QuaW52ZXN0ID0gY3JlZGl0SW52ZXN0LnRvU3RyaW5nKCk7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKGRldGFpbGVkRm9ybU9iamVjdCk7XG4vLyAgICAgfSk7XG4vLyB9KTtcbi8vIGNvbnN0IGFsbFByZXZCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbi8vICAgICBcIi5mb3JtLW5hdmlnYXRpb25fX2J1dHRvbi0tcHJldlwiXG4vLyApO1xuLy8gYWxsUHJldkJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4vLyAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgICAgIGxldCBidXR0b25JZCA9IGJ1dHRvbi5pZDtcbi8vICAgICAgICAgYnV0dG9uSWQgPSBidXR0b25JZC5yZXBsYWNlKFwiQnV0dG9uXCIsIFwiXCIpO1xuLy8gICAgICAgICBsZXQgcGFyZW50SWQgPSBidXR0b24ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4vLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbi8vICAgICB9KTtcbi8vIH0pO1xuLy8gY29uc3QgZGV0YWlsZWRGb3JtT2JqZWN0ID0ge1xuLy8gICAgIHR5cGU6IFwiXCIsXG4vLyAgICAgY3JlZGl0OiBcIlwiLFxuLy8gICAgIHRpbWU6IFwiXCIsXG4vLyAgICAgLy8gaW5jb21lOiBcIlwiLFxuLy8gICAgIGludmVzdDogXCJcIixcbi8vICAgICB1c2VyTmFtZTogXCJcIixcbi8vICAgICB1c2VyUGhvbmU6IFwiXCIsXG4vLyB9O1xuLy8gLy8g0JLQsNGA0LjQsNGG0LjRjyDRhNC+0YDQvNGLINC00LvRjyDQvdC10L7Qv9GA0LXQtNC70LXQvdC90L7Qs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuLy8gY29uc3QgZGV0YWlsZWRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldGFpbGVkRm9ybVwiKTtcbi8vIGRldGFpbGVkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaXJzdFNjcmVlblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3RTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbi8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY29uZFNjcmVlblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2Vjb25kU2NyZWVuXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4vLyB9KTtcbi8vIC8vINCS0LXRgNC40YTQuNC60LDRhtC40Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y8g0LTQsNC90L3Ri9GFINCyINGE0L7RgNC80YNcbi8vIGNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJOYW1lXCIpO1xuLy8gY29uc3QgdXNlclBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJQaG9uZVwiKTtcbi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuLy8gICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5hZGRDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbi8vICAgICAkKFwiI3VzZXJOYW1lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbi8vICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyUGhvbmVcIikudmFsKCkubGVuZ3RoICE9IDApIHtcbi8vICAgICAgICAgICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuLy8gICAgICQoXCIjdXNlclBob25lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbi8vICAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyTmFtZVwiKS52YWwoKS5sZW5ndGggIT0gMCkge1xuLy8gICAgICAgICAgICAgJChcIi5zdWJtaXQtYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwiZm9ybS1uYXZpZ2F0aW9uX19idXR0b24tLWRpc2FibGVkXCIpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9KTtcbi8vIC8vINCR0J7Qm9Cs0KjQkNCvINCh0JXQmtCm0JjQryDQnNCV0J3QriA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gLy8g0KDQsNCx0L7RgtCwINGBINC00LjQvdCw0LzQuNC10YfQtdGB0LrQuNC8INC80LXQvdGOXG4vLyBjb25zdCB3b3JrUHJvY2Nlc3NCdXR0b25PcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4vLyAgICAgXCJ3b3JrUHJvY2Nlc3NCdXR0b25PcGVuXCJcbi8vICk7XG4vLyBjb25zdCB3b3JrUHJvY2Nlc3NCdXR0b25DbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuLy8gICAgIFwid29ya1Byb2NjZXNzQnV0dG9uQ2xvc2VcIlxuLy8gKTtcbi8vIGNvbnN0IHF1ZXN0aW9uQnV0dG9uT3BlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicXVlc3Rpb25CdXR0b25PcGVuXCIpO1xuLy8gY29uc3QgcXVlc3Rpb25CdXR0b25DbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicXVlc3Rpb25CdXR0b25DbG9zZVwiKTtcbi8vIGNvbnN0IGJhbmtzQnV0dG9uT3BlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFua3NCdXR0b25PcGVuXCIpO1xuLy8gY29uc3QgYmFua3NCdXR0b25DbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFua3NCdXR0b25DbG9zZVwiKTtcbi8vIGNvbnN0IHZlcnRpY2FsU21hbGxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbi8vICAgICBcInZlcnRpY2FsU21hbGxDb250YWluZXJcIlxuLy8gKTtcbi8vIGNvbnN0IHZlcnRpY2FsQmlnQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ZXJ0aWNhbEJpZ0NvbnRhaW5lclwiKTtcbi8vIGNvbnN0IGJhc2ljTWVudUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFzaWNNZW51Q29udGFpbmVyXCIpO1xuLy8gY29uc3QgYWJvdXRCdXR0b25DbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWJvdXRCdXR0b25DbG9zZVwiKTtcbi8vIC8vINCh0LXQutGG0LjRjyDQtNC70Y8g0LfQsNC/0YPRgdC60LAg0YHQvtCx0YvRgtC40Lkg0L/QviDQvdCw0LbQsNGC0LjRjiDQutC90L7Qv9C+0Lpcbi8vIHdvcmtQcm9jY2Vzc0J1dHRvbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBpZiAoIXdvcmtQcm9jY2Vzc0J1dHRvbk9wZW4uY2xhc3NMaXN0LmNvbnRhaW5zKFwic21hbGxIb3Jpem9udGFsRXhwYW5kZWRcIikpXG4vLyAgICAgICAgIHdvcmtQcm9jY2Vzc0J1dHRvbk9wZW4uY2xhc3NMaXN0LmFkZChcInNtYWxsSG9yaXpvbnRhbEV4cGFuZGVkXCIpO1xuLy8gfSk7XG4vLyBxdWVzdGlvbkJ1dHRvbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBpZiAoIXF1ZXN0aW9uQnV0dG9uT3Blbi5jbGFzc0xpc3QuY29udGFpbnMoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKSkge1xuLy8gICAgICAgICBxdWVzdGlvbkJ1dHRvbk9wZW4uY2xhc3NMaXN0LmFkZChcInNtYWxsSG9yaXpvbnRhbEV4cGFuZGVkXCIpO1xuLy8gICAgICAgICBzZXRUaW1lb3V0KGluaXRRdWVzdGlvblN3aXBlciwgMzAwKTtcbi8vICAgICB9XG4vLyB9KTtcblxuLy8gYmFua3NCdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgaWYgKCFiYW5rc0J1dHRvbk9wZW4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uRXhwYW5kQmlnXCIpKVxuLy8gICAgICAgICBiYW5rc0J1dHRvbk9wZW4uY2xhc3NMaXN0LmFkZChcImJ1dHRvbkV4cGFuZEJpZ1wiKTtcbi8vIH0pO1xuLy8gdmVydGljYWxTbWFsbENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGlmICghdmVydGljYWxTbWFsbENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250YWluZXJTbWFsbEV4cGFuZFwiKSkge1xuLy8gICAgICAgICB2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJTbWFsbEV4cGFuZFwiKTtcbi8vICAgICAgICAgYmFzaWNNZW51Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtZW51VHJhbnNmb3JtZWRcIik7XG4vLyAgICAgICAgIGluaXRBYm91dFN3aXBlcigpO1xuLy8gICAgIH1cbi8vIH0pO1xuXG4vLyBiYW5rc0J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUJ1dHRvbik7XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uKCkge1xuLy8gICAgIHNldFRpbWVvdXQoY2xvc2VCdXR0b25EZWxheSwgMTAwKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gY2xvc2VCdXR0b25EZWxheSgpIHtcbi8vICAgICBiYW5rc0J1dHRvbk9wZW4uY2xhc3NMaXN0LnRvZ2dsZShcImJ1dHRvbkV4cGFuZEJpZ1wiKTtcbi8vIH1cblxuLy8gYWJvdXRCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VCdXR0b25BYm91dCk7XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uQWJvdXQoKSB7XG4vLyAgICAgc2V0VGltZW91dChjbG9zZUJ1dHRvbkFib3V0RGVsYXksIDEwMCk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uQWJvdXREZWxheSgpIHtcbi8vICAgICB2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJTbWFsbEV4cGFuZFwiKTtcbi8vICAgICBiYXNpY01lbnVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1lbnVUcmFuc2Zvcm1lZFwiKTtcbi8vIH1cblxuLy8gd29ya1Byb2NjZXNzQnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uUHJvY2Vzcyk7XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uUHJvY2VzcygpIHtcbi8vICAgICBzZXRUaW1lb3V0KGNsb3NlQnV0dG9uUHJvY2Vzc0RlbGF5LCAxMDApO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvblByb2Nlc3NEZWxheSgpIHtcbi8vICAgICB3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbi8vIH1cblxuLy8gcXVlc3Rpb25CdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VCdXR0b25RdWVzdGlvbik7XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uUXVlc3Rpb24oKSB7XG4vLyAgICAgc2V0VGltZW91dChjbG9zZUJ1dHRvblF1ZXN0aW9uRGVsYXksIDEwMCk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uUXVlc3Rpb25EZWxheSgpIHtcbi8vICAgICBxdWVzdGlvbkJ1dHRvbk9wZW4uY2xhc3NMaXN0LnRvZ2dsZShcInNtYWxsSG9yaXpvbnRhbEV4cGFuZGVkXCIpO1xuLy8gfVxuLy8gLy8g0J3QsNC00L4g0LHRg9C00LXRgiDQv9C+0YLQvtC8INC40L3QuNGG0LjRgNC+0LLQsNGC0Ywg0YHQstCw0LnQv9C10YDRi1xuLy8gLy8g0L/QviDQt9Cw0L/Rg9GB0LrRgyDQutC90L7Qv9C60LgsINGH0YLQvtCx0Ysg0L7QvdC4INC90L7RgNC80LDQu9GM0L3QviDQstC10YDRgdGC0LDQu9C40YHRjFxuLy8gZnVuY3Rpb24gaW5pdEFib3V0U3dpcGVyKCkge1xuLy8gICAgIGxldCBzd2lwZXJBYm91dCA9IG5ldyBTd2lwZXIoXCIjYWJvdXRTd2lwZXJcIiwge1xuLy8gICAgICAgICAvLyBuYXZpZ2F0aW9uOiB7XG4vLyAgICAgICAgIC8vICAgICBuZXh0RWw6IFwiLmJ1dHRvbi1hYm91dC0tbmV4dFwiLFxuLy8gICAgICAgICAvLyAgICAgcHJldkVsOiBcIi5idXR0b24tYWJvdXQtLXByZXZcIixcbi8vICAgICAgICAgLy8gfSxcbi8vICAgICAgICAgcGFnaW5hdGlvbjoge1xuLy8gICAgICAgICAgICAgZWw6IFwiLmFib3V0LXBhZ2luYXRpb25cIixcbi8vICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbi8vICAgICAgICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24oaW5kZXgsIGNsYXNzTmFtZSkge1xuLy8gICAgICAgICAgICAgICAgIGxldCByZWFkeUVsZW1lbnQgPSBgXG4vLyAgICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCIke2NsYXNzTmFtZX0gYnVsbGV0LXNwZWNpYWxcIj5cbi8vICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID1cImJ1bGxldC1oZWFkZXJcIj4ke21lbnVDb21wYW55W2luZGV4XX08L2Rpdj5cbi8vICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCJcIj48L2Rpdj5cbi8vICAgICAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICAgICAgYDtcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZHlFbGVtZW50O1xuLy8gICAgICAgICAgICAgfSxcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgbG9vcDogdHJ1ZSxcbi8vICAgICAgICAgZWZmZWN0OiBcImN1YmVcIixcbi8vICAgICAgICAgc3BlZWQ6IDgwMCxcbi8vICAgICB9KTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gaW5pdFF1ZXN0aW9uU3dpcGVyKCkge1xuLy8gICAgIGxldCBzd2lwZXJRdWVzdGlvbiA9IG5ldyBTd2lwZXIoXCIjcXVlc3Rpb25Td2lwZXJcIiwge1xuLy8gICAgICAgICBwYWdpbmF0aW9uOiB7XG4vLyAgICAgICAgICAgICBlbDogXCIucXVlc3Rpb24tcGFnaW5hdGlvblwiLFxuLy8gICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuLy8gICAgICAgICAgICAgcmVuZGVyQnVsbGV0OiBmdW5jdGlvbihpbmRleCkge1xuLy8gICAgICAgICAgICAgICAgIGxldCByZWFkeUVsZW1lbnQgPSBgXG4vLyAgICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCJzd2lwZXItcGFnaW5hdGlvbi1idWxsZXRcIj5cbi8vICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCJxdWVzdGlvbi1pbWFnZVwiPlxuLy8gICAgICAgICAgICAgICAgIDxpbWcgc3JjID0gXCIke3F1ZXN0aW9uSW1hZ2VzW2luZGV4XX1cIi8+XG4vLyAgICAgICAgICAgICAgICAgPC9kaXY+XG4vLyAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwicXVlc3Rpb24taGVhZGVyXCI+JHtxdWVzdGlvbkhlYWRlcnNbaW5kZXhdfTwvZGl2PlxuLy8gICAgICAgICAgICAgPC9kaXY+XG4vLyAgICAgICAgICAgICBgO1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiByZWFkeUVsZW1lbnQ7XG4vLyAgICAgICAgICAgICB9LFxuLy8gICAgICAgICB9LFxuLy8gICAgICAgICBsb29wOiB0cnVlLFxuLy8gICAgICAgICBlZmZlY3Q6IFwiZmFkZVwiLFxuLy8gICAgICAgICBzcGVlZDogODAwLFxuLy8gICAgICAgICBkaXJlY3Rpb246IFwidmVydGljYWxcIixcbi8vICAgICB9KTtcbi8vIH1cbi8vIC8vINCk0YPQvdC60YbQuNGPINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFINC+0YIg0YHQu9Cw0LnQtNC+0LIg0LTQu9GPINGA0LXQvdC00LXRgNCwINC60L3QvtC/0L7QulxuXG4vLyBsZXQgcXVlc3Rpb25IZWFkZXJzID0gW107XG4vLyBsZXQgcXVlc3Rpb25IZWFkZXJBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucXVlc3Rpb24tc2xpZGVcIik7XG4vLyBxdWVzdGlvbkhlYWRlckFycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbi8vICAgICBsZXQgU2xpZGVJbmZvSGVhZGVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXF1ZXN0aW9uLWhlYWRlclwiKTtcbi8vICAgICBxdWVzdGlvbkhlYWRlcnMucHVzaChTbGlkZUluZm9IZWFkZXIpO1xuLy8gfSk7XG4vLyBsZXQgcXVlc3Rpb25JbWFnZXMgPSBbXTtcbi8vIGxldCBxdWVzdGlvbkltYWdlQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnF1ZXN0aW9uLXNsaWRlXCIpO1xuLy8gcXVlc3Rpb25JbWFnZUFycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbi8vICAgICBsZXQgU2xpZGVJbmZvSW1hZ2UgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtcXVlc3Rpb24taW1hZ2VcIik7XG4vLyAgICAgcXVlc3Rpb25JbWFnZXMucHVzaChTbGlkZUluZm9JbWFnZSk7XG4vLyB9KTtcblxuLy8gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g0JHQntCb0KzQqNCQ0K8g0KHQldCa0KbQmNCvINCc0JXQndCuXG4vLyAvLyDQnNCe0JHQmNCb0KzQndCe0JUg0JzQldCd0K4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IG1vYmlsZUhlYWRlckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvd01lbnVcIik7XG5jb25zdCBtb2JpbGVIZWFkZXJMYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyTGF5ZXJcIik7XG5tb2JpbGVIZWFkZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZUhlYWRlck1lbnUpO1xubW9iaWxlSGVhZGVyTGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZUhlYWRlck1lbnUpO1xuXG5mdW5jdGlvbiB0b2dnbGVIZWFkZXJNZW51KCkge1xuICAgIG1vYmlsZUhlYWRlckxheWVyLmNsYXNzTGlzdC50b2dnbGUoXCJidG4tY2xpY2tlZC0tc2hvd1wiKTtcbiAgICBtb2JpbGVIZWFkZXJCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhlYWRlci1idG4tLWNsaWNrZWRcIik7XG59XG4vLyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSDQnNCe0JHQmNCb0KzQndCe0JUg0JzQldCd0K5cblxuLy8gLypcbi8vIFRPRE86INCU0L7QutGD0LzQtdC90YLQsNGG0LjRjyDQuiDQutC+0LTRg1xuLy8gVE9ETzog0JTQvtC/0LjRgdCw0YLRjCDRhNC+0YDQvNGDINC00LvRjyDQvtC/0YDQtdC00LXQu9C10L3QvdC+0LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbi8vIFRPRE86INCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGP0L3QtNC10LrRgdCwXG4vLyAqL1xuXG4vLyBTbW9vdGhMaW5rc1xuXG4vLyBjb25zdCBhbGxTbW9vdGhMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc21vb3RoLWxpbmtcIik7XG4vLyBhbGxTbW9vdGhMaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XG4vLyAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4vLyAgICAgICAgIGxpbmsuc2Nyb2xsSW50b1ZpZXcoe1xuLy8gICAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXG4vLyAgICAgICAgICAgICBibG9jazogXCJlbmRcIixcbi8vICAgICAgICAgICAgIGlubGluZTogXCJuZWFyZXN0XCIsXG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH0pO1xuLy8gfSk7XG5cbi8vINCa0J7QlCDQlNCb0K8g0KTQntCg0JzQqyDQoSDQn9Cj0J3QmtCi0J7QnCDQndCVINCe0J/QoNCV0JTQldCb0JjQm9CY0KHQrCDQoSDQktCr0JHQntCg0J7QnFxuY29uc3QgYWxsVW5jZXJ0YWluU2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi51bmNlcnRhaW4tZm9ybV9fc2xpZGVcIik7XG5jb25zdCBhbGxVbmNlcnRhaW5TbGlkZXNIZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICBcIi5zbGlkZV9faGVhZGVyLS11bmNlcnRhaW5cIlxuKTtcbmxldCBhbGxEYXRhSGVhZGVyID0gW107XG4vLyDQodCe0JHQmNCg0JDQldCcINCf0KPQndCa0KLQqyDQlNCb0K8g0JzQldCd0K4g0J3QkNCS0JjQk9CQ0KbQmNCYXG5hbGxVbmNlcnRhaW5TbGlkZXNIZWFkZXJzLmZvckVhY2goKGhlYWRlcikgPT4ge1xuICAgIGxldCBzbGlkZUhlYWRlciA9IGhlYWRlci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNsaWRlLWhlYWRlci11bmNlcnRhaW5cIik7XG4gICAgYWxsRGF0YUhlYWRlci5wdXNoKHNsaWRlSGVhZGVyKTtcbn0pO1xuXG5jb25zdCB1bmNlcnRhaW5Gb3JtTmF2aWdhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidW5jZXJ0YWluTmF2aWdhdGlvblwiKTtcbmxldCBsaXN0SXRlbVVuY2VydGFpbkNvdW50ZXIgPSAxO1xuLy8g0KHQntCX0JTQkNCV0Jwg0J/Qo9Cd0JrQotCrINCc0JXQndCuINCd0JDQktCY0JPQkNCm0JjQmFxuYWxsRGF0YUhlYWRlci5mb3JFYWNoKChoZWFkZXIpID0+IHtcbiAgICBsZXQgbmV3TGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbmV3TGlzdEl0ZW0uY2xhc3NMaXN0LmFkZChcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0XCIpO1xuICAgIGxldCBuZXdMaXN0SXRlbUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIG5ld0xpc3RJdGVtSGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJidWxsZXQtdGl0bGVcIik7XG4gICAgbmV3TGlzdEl0ZW1IZWFkZXIudGV4dENvbnRlbnQgPSBoZWFkZXI7XG4gICAgbmV3TGlzdEl0ZW0uYXBwZW5kKG5ld0xpc3RJdGVtSGVhZGVyKTtcbiAgICBsZXQgbGV0dGVyZWRDb3VudGVyID0gXCJcIjtcbiAgICBzd2l0Y2ggKGxpc3RJdGVtVW5jZXJ0YWluQ291bnRlcikge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBsZXR0ZXJlZENvdW50ZXIgPSBcIkZpcnN0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgbGV0dGVyZWRDb3VudGVyID0gXCJTZWNvbmRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBsZXR0ZXJlZENvdW50ZXIgPSBcIlRoaXJkXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgbGV0dGVyZWRDb3VudGVyID0gXCJGb3VydGhcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICBsZXR0ZXJlZENvdW50ZXIgPSBcIkZpZnRoXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgbmV3TGlzdEl0ZW0uaWQgPSBgVW5jZXJ0YWluJHtsZXR0ZXJlZENvdW50ZXJ9U2xpZGVJdGVtYDtcbiAgICBsaXN0SXRlbVVuY2VydGFpbkNvdW50ZXIrKztcbiAgICB1bmNlcnRhaW5Gb3JtTmF2aWdhdGlvbi5hcHBlbmQobmV3TGlzdEl0ZW0pO1xufSk7XG4vLyDQpNCj0J3QmtCm0JjQryDQlNCb0K8g0J7Qn9Cg0JXQlNCV0JvQldCd0JjQryDQkNCa0KLQmNCS0J3QntCT0J4g0KHQm9CQ0JnQlNCQXG4vLyDQktCQ0JvQmNCU0J3QkCDQotCe0JvQrNCa0J4gTkVYVCDQmtCd0J7Qn9Ce0JpcbmZ1bmN0aW9uIGNoZWNrV2hhdFNsaWRlSXNTaG93ZWRJblVuY2VydGFpbkZvcm0oKSB7XG4gICAgYWxsVW5jZXJ0YWluU2xpZGVzLmZvckVhY2goKHNsaWRlKSA9PiB7XG4gICAgICAgIGxldCBzbGlkZUlEID0gc2xpZGUuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIGlmIChzbGlkZUlELmluY2x1ZGVzKFwiRmlyc3RcIikgJiYgc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2xpZGUtLXNob3dcIikpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5GaXJzdFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5GaXJzdFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1hY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1kaXNhYmxlZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWRpc2FibGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblRoaXJkU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1kaXNhYmxlZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluVGhpcmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tZGlzYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBzbGlkZUlELmluY2x1ZGVzKFwiU2Vjb25kXCIpICYmXG4gICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzbGlkZS0tc2hvd1wiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5GaXJzdFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tY29tcGxldGVkXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5GaXJzdFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1jb21wbGV0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5GaXJzdFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5GaXJzdFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1hY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5TZWNvbmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWRpc2FibGVkXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5TZWNvbmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tZGlzYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1hY3RpdmVcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblNlY29uZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1hY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwidW5jZXJ0YWluU3RhdHVzQmFyXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcInByb2dyZXNzLW5hdmlnYXRpb24tYmFyLS0zM3BcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcInVuY2VydGFpblN0YXR1c0JhclwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcInByb2dyZXNzLW5hdmlnYXRpb24tYmFyLS0wcFwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJ1bmNlcnRhaW5TdGF0dXNCYXJcIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJwcm9ncmVzcy1uYXZpZ2F0aW9uLWJhci0tMzNwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgc2xpZGVJRC5pbmNsdWRlcyhcIlRoaXJkXCIpICYmXG4gICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzbGlkZS0tc2hvd1wiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5TZWNvbmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWNvbXBsZXRlZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWNvbXBsZXRlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblNlY29uZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5TZWNvbmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluVGhpcmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWRpc2FibGVkXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5UaGlyZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1kaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5UaGlyZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5UaGlyZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1hY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJ1bmNlcnRhaW5TdGF0dXNCYXJcIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvZ3Jlc3MtbmF2aWdhdGlvbi1iYXItLTMzcFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwidW5jZXJ0YWluU3RhdHVzQmFyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwicHJvZ3Jlc3MtbmF2aWdhdGlvbi1iYXItLTMzcFwiKTtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcInVuY2VydGFpblN0YXR1c0JhclwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmFkZChcInByb2dyZXNzLW5hdmlnYXRpb24tYmFyLS05NXBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vINCf0KDQmCDQndCQ0JbQkNCi0JjQmCDQndCQINCh0JvQldCU0KPQrtCp0KPQriDQmtCd0J7Qn9Ca0KMg0K3QotCe0Jkg0KTQntCg0JzQqyDQnNCV0J3Qr9CV0KLQodCvINCh0JvQkNCZ0JQg0Jgg0J/Qo9Cd0JrQoiDQndCQ0JLQmNCT0JDQptCY0JhcbmNvbnN0IGFsbE5leHRVbmNlcnRhaW5CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idG4tdW5jZXJ0YWluLS1uZXh0XCIpO1xuYWxsTmV4dFVuY2VydGFpbkJ0bnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBuZXh0U2xpZGVJRCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgbmV4dFNsaWRlSUQgPSBuZXh0U2xpZGVJRC5yZXBsYWNlKFwiTmV4dFwiLCBcIlwiKTtcbiAgICAgICAgbGV0IHNsaWRlSUQgPSBcIlwiO1xuICAgICAgICBzd2l0Y2ggKG5leHRTbGlkZUlEKSB7XG4gICAgICAgICAgICBjYXNlIFwiU2Vjb25kU2xpZGVcIjpcbiAgICAgICAgICAgICAgICBzbGlkZUlEID0gXCJGaXJzdFNsaWRlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVGhpcmRTbGlkZVwiOlxuICAgICAgICAgICAgICAgIHNsaWRlSUQgPSBcIlNlY29uZFNsaWRlXCI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2xpZGVBY3RpdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzbGlkZUlEKTtcbiAgICAgICAgbGV0IHNsaWRlTmV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5leHRTbGlkZUlEKTtcbiAgICAgICAgc2xpZGVBY3RpdmUuY2xhc3NMaXN0LnRvZ2dsZShcInNsaWRlLS1zaG93XCIpO1xuICAgICAgICBzbGlkZUFjdGl2ZS5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGUtLWhpZGRlblwiKTtcbiAgICAgICAgc2xpZGVOZXh0LmNsYXNzTGlzdC50b2dnbGUoXCJzbGlkZS0tc2hvd1wiKTtcbiAgICAgICAgc2xpZGVOZXh0LmNsYXNzTGlzdC50b2dnbGUoXCJzbGlkZS0taGlkZGVuXCIpO1xuICAgICAgICBjaGVja1doYXRTbGlkZUlzU2hvd2VkSW5VbmNlcnRhaW5Gb3JtKCk7XG4gICAgfSk7XG59KTtcblxuY29uc3QgYWxsUHJldmlvdXNVbmNlcnRhaW5CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICBcIi5idG4tdW5jZXJ0YWluLS1wcmV2aW91c1wiXG4pO1xuXG5hbGxQcmV2aW91c1VuY2VydGFpbkJ0bnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBuZXh0U2xpZGVJRCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgbmV4dFNsaWRlSUQgPSBuZXh0U2xpZGVJRC5yZXBsYWNlKFwiUHJldmlvdXNcIiwgXCJcIik7XG4gICAgICAgIGxldCBzbGlkZUlEID0gXCJcIjtcbiAgICAgICAgc3dpdGNoIChuZXh0U2xpZGVJRCkge1xuICAgICAgICAgICAgY2FzZSBcIkZpcnN0U2xpZGVcIjpcbiAgICAgICAgICAgICAgICBzbGlkZUlEID0gXCJTZWNvbmRTbGlkZVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlNlY29uZFNsaWRlXCI6XG4gICAgICAgICAgICAgICAgc2xpZGVJRCA9IFwiVGhpcmRTbGlkZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNsaWRlQWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2xpZGVJRCk7XG4gICAgICAgIGxldCBzbGlkZU5leHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuZXh0U2xpZGVJRCk7XG4gICAgICAgIHNsaWRlQWN0aXZlLmNsYXNzTGlzdC50b2dnbGUoXCJzbGlkZS0tc2hvd1wiKTtcbiAgICAgICAgc2xpZGVBY3RpdmUuY2xhc3NMaXN0LnRvZ2dsZShcInNsaWRlLS1oaWRkZW5cIik7XG4gICAgICAgIHNsaWRlTmV4dC5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGUtLXNob3dcIik7XG4gICAgICAgIHNsaWRlTmV4dC5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGUtLWhpZGRlblwiKTtcbiAgICAgICAgLy8gY2hlY2tXaGF0U2xpZGVJc1Nob3dlZEluVW5jZXJ0YWluRm9ybSgpO1xuICAgIH0pO1xufSk7XG5cbmNoZWNrV2hhdFNsaWRlSXNTaG93ZWRJblVuY2VydGFpbkZvcm0oKTtcblxuY29uc3QgdXNlck5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlck5hbWVcIik7XG5jb25zdCB1c2VyUGhvbmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlclBob25lXCIpO1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJChcIi5zdWJtaXQtYnV0dG9uXCIpLmFkZENsYXNzKFwic3VibWl0LWJ1dHRvbi0tZGlzYWJsZWRcIik7XG4gICAgJChcIiN1c2VyTmFtZVwiKS5rZXl1cChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPSAwICYmICQoXCIjdXNlclBob25lXCIpLnZhbCgpLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAkKFwiLnN1Ym1pdC1idXR0b25cIikucmVtb3ZlQ2xhc3MoXCJzdWJtaXQtYnV0dG9uLS1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoXCIjdXNlclBob25lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyTmFtZVwiKS52YWwoKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgJChcIi5zdWJtaXQtYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwic3VibWl0LWJ1dHRvbi0tZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4kKFwiI3VzZXJQaG9uZVwiKS5pbnB1dG1hc2soKTsiLCIvLyAvLyDQpdGA0LDQvdC40LvQuNGJ0LAg0LTQsNGC0LAt0LTQsNC90L3Ri9GFLFxuLy8gLy/QtNC70Y8g0YPQtNC+0LHQvdC+0LPQviDQt9Cw0L/QvtC70L3QtdC90LjRjyDQtNCw0L3QvdGL0YUg0LIg0YHQstCw0LnQv9C10YDQsNGFXG5sZXQgbWVudSA9IFtdO1xubGV0IEhlYWRlcnNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXR0ZW50aW9uLWNvbnRhaW5lcl9faGVhZGVyXCIpO1xuSGVhZGVyc0FycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgSGVhZGVyVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5mb1wiKTtcbiAgICBtZW51LnB1c2goSGVhZGVyVmFsdWUpO1xufSk7XG4vLyBsZXQgbWVudUNvbXBhbnkgPSBbXTtcbi8vIGxldCBjb21wYW55UGFnZXNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWJvdXQtaW5mb1wiKTtcbi8vIGNvbXBhbnlQYWdlc0FycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbi8vICAgICBsZXQgSGVhZGVyVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5mb1wiKTtcbi8vICAgICBtZW51Q29tcGFueS5wdXNoKEhlYWRlclZhbHVlKTtcbi8vIH0pO1xuLy8g0KHQstCw0LnQv9C10YDRiywg0LrQvtGC0L7RgNGL0LUg0LfQsNC/0YPRgdC60LDRjtGC0YHRjyDRgdGA0LDQt9GDXG5sZXQgc3dpcGVyR3JlZXQgPSBuZXcgU3dpcGVyKFwiI2dyZWV0aW5nU3dpcHBlclwiLCB7XG4gICAgLy8gbmF2aWdhdGlvbjoge1xuICAgIC8vICAgICBuZXh0RWw6IFwiLmdyZWV0aW5nLW5leHRcIixcbiAgICAvLyAgICAgcHJldkVsOiBcIi5ncmVldGluZy1wcmV2XCIsXG4gICAgLy8gfSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24oaW5kZXgsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgbGV0IHJlYWR5RWxlbWVudCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIiR7Y2xhc3NOYW1lfSBidWxsZXQtc3BlY2lhbFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPVwiYnVsbGV0LWhlYWRlclwiPiR7bWVudVtpbmRleF19PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwiXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICByZXR1cm4gcmVhZHlFbGVtZW50O1xuICAgICAgICB9LFxuICAgIH0sXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBlZmZlY3Q6IFwiZmFkZVwiLFxuICAgIHNwZWVkOiA4MDAsXG4gICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICB3YXRjaFZpc2liaWxpdHk6IHRydWUsXG4gICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IHRydWUsXG59KTtcbmxldCBzd2lwZXJCYW5rcyA9IG5ldyBTd2lwZXIoXCIjYmFua3NTd2lwZXJcIiwge1xuICAgIC8vIG5hdmlnYXRpb246IHtcbiAgICAvLyAgICAgbmV4dEVsOiBcIi5idXR0b24tYmFuay0tbmV4dFwiLFxuICAgIC8vICAgICBwcmV2RWw6IFwiLmJ1dHRvbi1iYW5rLS1wcmV2XCIsXG4gICAgLy8gfSxcbiAgICAvLyBwYWdpbmF0aW9uOiB7XG4gICAgLy8gICAgIGVsOiBcIi5iYW5rcy1wYWdpbmF0aW9uXCIsXG4gICAgLy8gICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAvLyB9LFxuICAgIGxvb3A6IHRydWUsXG4gICAgZWZmZWN0OiBcImNhcmRzXCIsXG4gICAgc3BlZWQ6IDgwMCxcbiAgICBzbGlkZXNQZXJWaWV3OiA0LFxuICAgIGF1dG9wbGF5OiB7XG4gICAgICAgIGRlbGF5OiAxLFxuICAgIH0sXG4gICAgc3BhY2VCZXR3ZWVuOiA1MCxcbiAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgOTIwOiB7XG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxuICAgICAgICB9LFxuICAgICAgICA2MDA6IHtcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgIH0sXG4gICAgICAgIDQ1MDoge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgICAgfSxcbiAgICB9LFxufSk7XG5cbi8vIC8vINCQ0LLRgtC+0L/QtdGH0LDRgtCw0L3QuNC1INGC0LXQutGB0YLQsCDQsiDQs9C70LDQstC90L7QvCDRgdCy0LDQudC/0LXRgNC1XG4vLyB2YXIgVHh0VHlwZSA9IGZ1bmN0aW9uKGVsLCB0b1JvdGF0ZSwgcGVyaW9kKSB7XG4vLyAgICAgdGhpcy50b1JvdGF0ZSA9IHRvUm90YXRlO1xuLy8gICAgIHRoaXMuZWwgPSBlbDtcbi8vICAgICB0aGlzLmxvb3BOdW0gPSAwO1xuLy8gICAgIHRoaXMucGVyaW9kID0gcGFyc2VJbnQocGVyaW9kLCAxMCkgfHwgMjAwMDtcbi8vICAgICB0aGlzLnR4dCA9IFwiXCI7XG4vLyAgICAgdGhpcy50aWNrKCk7XG4vLyAgICAgdGhpcy5pc0RlbGV0aW5nID0gZmFsc2U7XG4vLyB9O1xuXG4vLyBUeHRUeXBlLnByb3RvdHlwZS50aWNrID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgdmFyIGkgPSB0aGlzLmxvb3BOdW0gJSB0aGlzLnRvUm90YXRlLmxlbmd0aDtcbi8vICAgICB2YXIgZnVsbFR4dCA9IHRoaXMudG9Sb3RhdGVbaV07XG5cbi8vICAgICBpZiAodGhpcy5pc0RlbGV0aW5nKSB7XG4vLyAgICAgICAgIHRoaXMudHh0ID0gZnVsbFR4dC5zdWJzdHJpbmcoMCwgdGhpcy50eHQubGVuZ3RoIC0gMSk7XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgdGhpcy50eHQgPSBmdWxsVHh0LnN1YnN0cmluZygwLCB0aGlzLnR4dC5sZW5ndGggKyAxKTtcbi8vICAgICB9XG5cbi8vICAgICB0aGlzLmVsLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cIndyYXBcIj4nICsgdGhpcy50eHQgKyBcIjwvc3Bhbj5cIjtcblxuLy8gICAgIHZhciB0aGF0ID0gdGhpcztcbi8vICAgICB2YXIgZGVsdGEgPSAyMDAgLSBNYXRoLnJhbmRvbSgpICogMTAwO1xuXG4vLyAgICAgaWYgKHRoaXMuaXNEZWxldGluZykge1xuLy8gICAgICAgICBkZWx0YSAvPSAyO1xuLy8gICAgIH1cblxuLy8gICAgIGlmICghdGhpcy5pc0RlbGV0aW5nICYmIHRoaXMudHh0ID09PSBmdWxsVHh0KSB7XG4vLyAgICAgICAgIGRlbHRhID0gdGhpcy5wZXJpb2Q7XG4vLyAgICAgICAgIHRoaXMuaXNEZWxldGluZyA9IHRydWU7XG4vLyAgICAgfSBlbHNlIGlmICh0aGlzLmlzRGVsZXRpbmcgJiYgdGhpcy50eHQgPT09IFwiXCIpIHtcbi8vICAgICAgICAgdGhpcy5pc0RlbGV0aW5nID0gZmFsc2U7XG4vLyAgICAgICAgIHRoaXMubG9vcE51bSsrO1xuLy8gICAgICAgICBkZWx0YSA9IDUwMDtcbi8vICAgICB9XG5cbi8vICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICB0aGF0LnRpY2soKTtcbi8vICAgICB9LCBkZWx0YSk7XG4vLyB9O1xuXG4vLyB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInR5cGV3cml0ZVwiKTtcbi8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICAgIHZhciB0b1JvdGF0ZSA9IGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtdHlwZVwiKTtcbi8vICAgICAgICAgdmFyIHBlcmlvZCA9IGVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtcGVyaW9kXCIpO1xuLy8gICAgICAgICBpZiAodG9Sb3RhdGUpIHtcbi8vICAgICAgICAgICAgIG5ldyBUeHRUeXBlKGVsZW1lbnRzW2ldLCBKU09OLnBhcnNlKHRvUm90YXRlKSwgcGVyaW9kKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH1cbi8vICAgICAvLyBJTkpFQ1QgQ1NTXG4vLyAgICAgdmFyIGNzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbi8vICAgICBjc3MudHlwZSA9IFwidGV4dC9jc3NcIjtcbi8vICAgICBjc3MuaW5uZXJIVE1MID0gXCIudHlwZXdyaXRlID4gLndyYXAgeyBib3JkZXItcmlnaHQ6IDAuMDhlbSBzb2xpZCAjZmZmfVwiO1xuLy8gICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY3NzKTtcbi8vIH07XG4vLyAvLyDQmNC90LjRhtC40LDRhtC40Y8g0JDQntCh0JAg0LTQu9GPINC00LLQuNCz0LDRjtGJ0LXQs9C+INGC0LXQutGB0YLQsFxuLy8gQU9TLmluaXQoe1xuLy8gICAgIHN0YXJ0RXZlbnQ6IFwiRE9NQ29udGVudExvYWRlZFwiLFxuLy8gfSk7XG5cbi8vINCg0LDQsdC+0YLQsNC10Lwg0YHQviDRgdC70LDQudC00LXRgNCw0LzQuCDQsiDRhNC+0YDQvNC1XG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAvLyAkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKHtcbiAgICAvLyAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgLy8gICAgIGFuaW1hdGU6IHRydWUsXG4gICAgLy8gICAgIHZhbHVlOiA1MDAwMDAsXG4gICAgLy8gICAgIG1pbjogMTAwMDAwLFxuICAgIC8vICAgICBtYXg6IDQzNTAwMDAsXG4gICAgLy8gICAgIHN0ZXA6IDEwMDAsXG4gICAgLy8gICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAvLyAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAvLyAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcbiAgICAvLyAgICAgICAgICQoXCIjZGVidElucHV0XCIpLnZhbChkZWJ0VmFsdWUpO1xuICAgIC8vICAgICB9LFxuICAgIC8vIH0pO1xuICAgICQoXCIjc2xpZGVyRGVidFwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDQwMDAwMCxcbiAgICAgICAgbWluOiAxMDAwMDAsXG4gICAgICAgIG1heDogNTAwMDAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRNb25leSA9ICQoXCIjc2xpZGVyRGVidFwiKS5zbGlkZXIoXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgIGxldCBkZWJ0RGVwb3NpdCA9ICQoXCIjc2xpZGVyRGVwb3NpdFwiKS5zbGlkZXIoXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGRlYnRUaW1lUmFkaW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb250cm9sbGVyLWlucHV0XCIpO1xuICAgICAgICAgICAgbGV0IG9iamVjdERlYnRUaW1lID0gWy4uLmRlYnRUaW1lUmFkaW9zXS5maWx0ZXIoKHJhZGlvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJhZGlvLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhZGlvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGRlYnRUaW1lID0gb2JqZWN0RGVidFRpbWVbMF0uaWQ7XG4gICAgICAgICAgICBsZXQgdXBkYXRlZERlYnRUaW1lID0gZGVidFRpbWUucmVwbGFjZShcIm1vbnRoXCIsIFwiXCIpO1xuICAgICAgICAgICAgc3dpdGNoICh1cGRhdGVkRGVidFRpbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiMDVcIjpcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZERlYnRUaW1lID0gMC41O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb2VmaWNpZW50ID0gMy45IC8gMTIwMC4wO1xuICAgICAgICAgICAgdXBkYXRlZERlYnRUaW1lID0gcGFyc2VJbnQodXBkYXRlZERlYnRUaW1lKTtcbiAgICAgICAgICAgIGRlYnRNb25leSA9IHBhcnNlSW50KGRlYnRNb25leSk7XG4gICAgICAgICAgICBkZWJ0RGVwb3NpdCA9IHBhcnNlSW50KGRlYnREZXBvc2l0KTtcbiAgICAgICAgICAgIGRlYnRNb25leSAtPSBkZWJ0RGVwb3NpdDtcbiAgICAgICAgICAgIGxldCBtb250aFBheW1lbnQgPVxuICAgICAgICAgICAgICAgIGRlYnRNb25leSAqXG4gICAgICAgICAgICAgICAgY29lZmljaWVudCAqXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coMSArIGNvZWZpY2llbnQsIHVwZGF0ZWREZWJ0VGltZSkgL1xuICAgICAgICAgICAgICAgICAgICAoTWF0aC5wb3coMSArIGNvZWZpY2llbnQsIHVwZGF0ZWREZWJ0VGltZSkgLSAxKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAkO1xuICAgICAgICAgICAgJChcIiNkZXBvc2l0SGFsZlwiKS50ZXh0KE1hdGguZmxvb3IoKGRlYnRNb25leSAqIDAuOCkgLyAyKSk7XG4gICAgICAgICAgICAkKFwiI2RlcG9zaXRNYXhcIikudGV4dChNYXRoLmZsb29yKGRlYnRNb25leSAqIDAuOCkpO1xuICAgICAgICAgICAgbGV0IHVwZGF0ZWRNYXhWYWx1ZSA9IHBhcnNlSW50KCQoXCIjZGVwb3NpdE1heFwiKS50ZXh0KCkpO1xuICAgICAgICAgICAgJChcIiNzbGlkZXJEZXBvc2l0XCIpLnNsaWRlcihcIm9wdGlvblwiLCBcIm1heFwiLCB1cGRhdGVkTWF4VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNpbnRlcmVzdFJlc3VsdFwiKS50ZXh0KE1hdGguZmxvb3IobW9udGhQYXltZW50KSArIFwiIOKCvVwiKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlckRlcG9zaXRcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA0MDAwMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDgwMDAwLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgZGVidE1vbmV5ID0gJChcIiNzbGlkZXJEZWJ0XCIpLnNsaWRlcihcInZhbHVlXCIpO1xuICAgICAgICAgICAgbGV0IGRlYnREZXBvc2l0ID0gJChcIiNzbGlkZXJEZXBvc2l0XCIpLnNsaWRlcihcInZhbHVlXCIpO1xuICAgICAgICAgICAgY29uc3QgZGVidFRpbWVSYWRpb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRyb2xsZXItaW5wdXRcIik7XG4gICAgICAgICAgICBsZXQgb2JqZWN0RGVidFRpbWUgPSBbLi4uZGVidFRpbWVSYWRpb3NdLmZpbHRlcigocmFkaW8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmFkaW8uY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmFkaW87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgZGVidFRpbWUgPSBvYmplY3REZWJ0VGltZVswXS5pZDtcbiAgICAgICAgICAgIGxldCB1cGRhdGVkRGVidFRpbWUgPSBkZWJ0VGltZS5yZXBsYWNlKFwibW9udGhcIiwgXCJcIik7XG4gICAgICAgICAgICBzd2l0Y2ggKHVwZGF0ZWREZWJ0VGltZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCIwNVwiOlxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRGVidFRpbWUgPSAwLjU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNvZWZpY2llbnQgPSAzLjkgLyAxMjAwLjA7XG4gICAgICAgICAgICB1cGRhdGVkRGVidFRpbWUgPSBwYXJzZUludCh1cGRhdGVkRGVidFRpbWUpO1xuICAgICAgICAgICAgZGVidE1vbmV5ID0gcGFyc2VJbnQoZGVidE1vbmV5KTtcbiAgICAgICAgICAgIGRlYnREZXBvc2l0ID0gcGFyc2VJbnQoZGVidERlcG9zaXQpO1xuICAgICAgICAgICAgZGVidE1vbmV5IC09IGRlYnREZXBvc2l0O1xuICAgICAgICAgICAgbGV0IG1vbnRoUGF5bWVudCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgZGVidE1vbmV5ICpcbiAgICAgICAgICAgICAgICBjb2VmaWNpZW50ICpcbiAgICAgICAgICAgICAgICAoTWF0aC5wb3coMSArIGNvZWZpY2llbnQsIHVwZGF0ZWREZWJ0VGltZSkgL1xuICAgICAgICAgICAgICAgICAgICAoTWF0aC5wb3coMSArIGNvZWZpY2llbnQsIHVwZGF0ZWREZWJ0VGltZSkgLSAxKSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICQoXCIjaW50ZXJlc3RSZXN1bHRcIikudGV4dChNYXRoLmZsb29yKG1vbnRoUGF5bWVudCkgKyBcIiDigr1cIik7XG4gICAgICAgICAgICAvLyB2YXIgayA9IDMuOSAvIDEyMDAuMDtcbiAgICAgICAgICAgIC8vIHN1bSA9IHByaWNlICogayAqIChNYXRoLnBvdygxICsgaywgc3JvaykgLyAoTWF0aC5wb3coMSArIGssIHNyb2spIC0gMSkpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vICQoXCIjZGVidElucHV0XCIpLnZhbCgkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgIC8vICQoXCIjZGVidElucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgJChcIiNzbGlkZXJEZWJ0XCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIC8vIH0pO1xuICAgIC8vICQoXCIjc2xpZGVyVGltZVwiKS5zbGlkZXIoe1xuICAgIC8vICAgICByYW5nZTogXCJtaW5cIixcbiAgICAvLyAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAvLyAgICAgdmFsdWU6IDMsXG4gICAgLy8gICAgIG1pbjogMSxcbiAgICAvLyAgICAgbWF4OiA4LFxuICAgIC8vICAgICBzdGVwOiAxLFxuICAgIC8vICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgLy8gICAgICAgICBsZXQgdGltZVZhbHVlID0gdWkudmFsdWU7XG4gICAgLy8gICAgICAgICBzd2l0Y2ggKHRpbWVWYWx1ZSkge1xuICAgIC8vICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAvLyAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LRgO1xuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgICBjYXNlIDI6XG4gICAgLy8gICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgICBjYXNlIDM6XG4gICAgLy8gICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgLy8gICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgICBkZWZhdWx0OlxuICAgIC8vICAgICAgICAgICAgICAgICB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INC70LXRgmA7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICAkKFwiI3RpbWVJbnB1dFwiKS52YWwodGltZVZhbHVlKTtcbiAgICAvLyAgICAgfSxcbiAgICAvLyB9KTtcbiAgICAvLyAkKFwiI3RpbWVJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIpKTtcbiAgICAvLyBsZXQgdGltZVZhbHVlID0gJChcIiN0aW1lSW5wdXRcIikudmFsKCk7XG4gICAgLy8gc3dpdGNoICh0aW1lVmFsdWUpIHtcbiAgICAvLyAgICAgZGVmYXVsdDogdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgLy8gfVxuICAgIC8vICQoXCIjdGltZUlucHV0XCIpLnZhbCh0aW1lVmFsdWUpO1xuICAgIC8vICQoXCIjdGltZUlucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIC8vIH0pO1xuICAgIC8vICQoXCIjc2xpZGVySW5jb21lXCIpLnNsaWRlcih7XG4gICAgLy8gICAgIHJhbmdlOiBcIm1pblwiLFxuICAgIC8vICAgICBhbmltYXRlOiB0cnVlLFxuICAgIC8vICAgICB2YWx1ZTogMzAwMDAsXG4gICAgLy8gICAgIG1pbjogMTAwMDAsXG4gICAgLy8gICAgIG1heDogNTAwMDAwLFxuICAgIC8vICAgICBzdGVwOiA1MDAwLFxuICAgIC8vICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgLy8gICAgICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgLy8gICAgICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgLy8gICAgICAgICAkKFwiI2luY29tZUlucHV0XCIpLnZhbChkZWJ0VmFsdWUpO1xuICAgIC8vICAgICB9LFxuICAgIC8vIH0pO1xuICAgIC8vICQoXCIjaW5jb21lSW5wdXRcIikudmFsKCQoXCIjc2xpZGVySW5jb21lXCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIpKTtcbiAgICAvLyAkKFwiI2luY29tZUlucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgJChcIiNzbGlkZXJJbmNvbWVcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgLy8gfSk7XG4gICAgLy8gJChcIiNzbGlkZXJJbnZlc3RcIikuc2xpZGVyKHtcbiAgICAvLyAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgLy8gICAgIGFuaW1hdGU6IHRydWUsXG4gICAgLy8gICAgIHZhbHVlOiAxMDAwMDAsXG4gICAgLy8gICAgIG1pbjogMCxcbiAgICAvLyAgICAgbWF4OiA0MDAwMDAsXG4gICAgLy8gICAgIHN0ZXA6IDEwMDAsXG4gICAgLy8gICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAvLyAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAvLyAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcbiAgICAvLyAgICAgICAgICQoXCIjaW52ZXN0SW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgLy8gICAgIH0sXG4gICAgLy8gfSk7XG4gICAgLy8gJChcIiNpbnZlc3RJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJJbnZlc3RcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgIC8vICQoXCIjaW52ZXN0SW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICAkKFwiI3NsaWRlckludmVzdFwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCAkKHRoaXMpLnZhbCgpKTtcbiAgICAvLyB9KTtcbn0pO1xuXG4vLyBKUVVFUlkgVE9VQ0ggUEFUQ0hcbi8qIVxuICogalF1ZXJ5IFVJIFRvdWNoIFB1bmNoIDAuMi4zXG4gKlxuICogQ29weXJpZ2h0IDIwMTHigJMyMDE0LCBEYXZlIEZ1cmZlcm9cbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLlxuICpcbiAqIERlcGVuZHM6XG4gKiAganF1ZXJ5LnVpLndpZGdldC5qc1xuICogIGpxdWVyeS51aS5tb3VzZS5qc1xuICovXG4oZnVuY3Rpb24gKCQpIHtcblxuICAgIC8vIERldGVjdCB0b3VjaCBzdXBwb3J0XG4gICAgJC5zdXBwb3J0LnRvdWNoID0gJ29udG91Y2hlbmQnIGluIGRvY3VtZW50O1xuICBcbiAgICAvLyBJZ25vcmUgYnJvd3NlcnMgd2l0aG91dCB0b3VjaCBzdXBwb3J0XG4gICAgaWYgKCEkLnN1cHBvcnQudG91Y2gpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIFxuICAgIHZhciBtb3VzZVByb3RvID0gJC51aS5tb3VzZS5wcm90b3R5cGUsXG4gICAgICAgIF9tb3VzZUluaXQgPSBtb3VzZVByb3RvLl9tb3VzZUluaXQsXG4gICAgICAgIF9tb3VzZURlc3Ryb3kgPSBtb3VzZVByb3RvLl9tb3VzZURlc3Ryb3ksXG4gICAgICAgIHRvdWNoSGFuZGxlZDtcbiAgXG4gICAgLyoqXG4gICAgICogU2ltdWxhdGUgYSBtb3VzZSBldmVudCBiYXNlZCBvbiBhIGNvcnJlc3BvbmRpbmcgdG91Y2ggZXZlbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgQSB0b3VjaCBldmVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzaW11bGF0ZWRUeXBlIFRoZSBjb3JyZXNwb25kaW5nIG1vdXNlIGV2ZW50XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2ltdWxhdGVNb3VzZUV2ZW50IChldmVudCwgc2ltdWxhdGVkVHlwZSkge1xuICBcbiAgICAgIC8vIElnbm9yZSBtdWx0aS10b3VjaCBldmVudHNcbiAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgXG4gICAgICB2YXIgdG91Y2ggPSBldmVudC5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLFxuICAgICAgICAgIHNpbXVsYXRlZEV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHNpbXVsYXRlZCBtb3VzZSBldmVudCB1c2luZyB0aGUgdG91Y2ggZXZlbnQncyBjb29yZGluYXRlc1xuICAgICAgc2ltdWxhdGVkRXZlbnQuaW5pdE1vdXNlRXZlbnQoXG4gICAgICAgIHNpbXVsYXRlZFR5cGUsICAgIC8vIHR5cGVcbiAgICAgICAgdHJ1ZSwgICAgICAgICAgICAgLy8gYnViYmxlcyAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHRydWUsICAgICAgICAgICAgIC8vIGNhbmNlbGFibGUgICAgICAgICAgICAgICAgIFxuICAgICAgICB3aW5kb3csICAgICAgICAgICAvLyB2aWV3ICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgMSwgICAgICAgICAgICAgICAgLy8gZGV0YWlsICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHRvdWNoLnNjcmVlblgsICAgIC8vIHNjcmVlblggICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB0b3VjaC5zY3JlZW5ZLCAgICAvLyBzY3JlZW5ZICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgdG91Y2guY2xpZW50WCwgICAgLy8gY2xpZW50WCAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHRvdWNoLmNsaWVudFksICAgIC8vIGNsaWVudFkgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBmYWxzZSwgICAgICAgICAgICAvLyBjdHJsS2V5ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgZmFsc2UsICAgICAgICAgICAgLy8gYWx0S2V5ICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIGZhbHNlLCAgICAgICAgICAgIC8vIHNoaWZ0S2V5ICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBmYWxzZSwgICAgICAgICAgICAvLyBtZXRhS2V5ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgMCwgICAgICAgICAgICAgICAgLy8gYnV0dG9uICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIG51bGwgICAgICAgICAgICAgIC8vIHJlbGF0ZWRUYXJnZXQgICAgICAgICAgICAgIFxuICAgICAgKTtcbiAgXG4gICAgICAvLyBEaXNwYXRjaCB0aGUgc2ltdWxhdGVkIGV2ZW50IHRvIHRoZSB0YXJnZXQgZWxlbWVudFxuICAgICAgZXZlbnQudGFyZ2V0LmRpc3BhdGNoRXZlbnQoc2ltdWxhdGVkRXZlbnQpO1xuICAgIH1cbiAgXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRoZSBqUXVlcnkgVUkgd2lkZ2V0J3MgdG91Y2hzdGFydCBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIHdpZGdldCBlbGVtZW50J3MgdG91Y2hzdGFydCBldmVudFxuICAgICAqL1xuICAgIG1vdXNlUHJvdG8uX3RvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gIFxuICAgICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiBhbm90aGVyIHdpZGdldCBpcyBhbHJlYWR5IGJlaW5nIGhhbmRsZWRcbiAgICAgIGlmICh0b3VjaEhhbmRsZWQgfHwgIXNlbGYuX21vdXNlQ2FwdHVyZShldmVudC5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gU2V0IHRoZSBmbGFnIHRvIHByZXZlbnQgb3RoZXIgd2lkZ2V0cyBmcm9tIGluaGVyaXRpbmcgdGhlIHRvdWNoIGV2ZW50XG4gICAgICB0b3VjaEhhbmRsZWQgPSB0cnVlO1xuICBcbiAgICAgIC8vIFRyYWNrIG1vdmVtZW50IHRvIGRldGVybWluZSBpZiBpbnRlcmFjdGlvbiB3YXMgYSBjbGlja1xuICAgICAgc2VsZi5fdG91Y2hNb3ZlZCA9IGZhbHNlO1xuICBcbiAgICAgIC8vIFNpbXVsYXRlIHRoZSBtb3VzZW92ZXIgZXZlbnRcbiAgICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ21vdXNlb3ZlcicpO1xuICBcbiAgICAgIC8vIFNpbXVsYXRlIHRoZSBtb3VzZW1vdmUgZXZlbnRcbiAgICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ21vdXNlbW92ZScpO1xuICBcbiAgICAgIC8vIFNpbXVsYXRlIHRoZSBtb3VzZWRvd24gZXZlbnRcbiAgICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ21vdXNlZG93bicpO1xuICAgIH07XG4gIFxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aGUgalF1ZXJ5IFVJIHdpZGdldCdzIHRvdWNobW92ZSBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIGRvY3VtZW50J3MgdG91Y2htb3ZlIGV2ZW50XG4gICAgICovXG4gICAgbW91c2VQcm90by5fdG91Y2hNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIFxuICAgICAgLy8gSWdub3JlIGV2ZW50IGlmIG5vdCBoYW5kbGVkXG4gICAgICBpZiAoIXRvdWNoSGFuZGxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgLy8gSW50ZXJhY3Rpb24gd2FzIG5vdCBhIGNsaWNrXG4gICAgICB0aGlzLl90b3VjaE1vdmVkID0gdHJ1ZTtcbiAgXG4gICAgICAvLyBTaW11bGF0ZSB0aGUgbW91c2Vtb3ZlIGV2ZW50XG4gICAgICBzaW11bGF0ZU1vdXNlRXZlbnQoZXZlbnQsICdtb3VzZW1vdmUnKTtcbiAgICB9O1xuICBcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIGpRdWVyeSBVSSB3aWRnZXQncyB0b3VjaGVuZCBldmVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIGRvY3VtZW50J3MgdG91Y2hlbmQgZXZlbnRcbiAgICAgKi9cbiAgICBtb3VzZVByb3RvLl90b3VjaEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICBcbiAgICAgIC8vIElnbm9yZSBldmVudCBpZiBub3QgaGFuZGxlZFxuICAgICAgaWYgKCF0b3VjaEhhbmRsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIC8vIFNpbXVsYXRlIHRoZSBtb3VzZXVwIGV2ZW50XG4gICAgICBzaW11bGF0ZU1vdXNlRXZlbnQoZXZlbnQsICdtb3VzZXVwJyk7XG4gIFxuICAgICAgLy8gU2ltdWxhdGUgdGhlIG1vdXNlb3V0IGV2ZW50XG4gICAgICBzaW11bGF0ZU1vdXNlRXZlbnQoZXZlbnQsICdtb3VzZW91dCcpO1xuICBcbiAgICAgIC8vIElmIHRoZSB0b3VjaCBpbnRlcmFjdGlvbiBkaWQgbm90IG1vdmUsIGl0IHNob3VsZCB0cmlnZ2VyIGEgY2xpY2tcbiAgICAgIGlmICghdGhpcy5fdG91Y2hNb3ZlZCkge1xuICBcbiAgICAgICAgLy8gU2ltdWxhdGUgdGhlIGNsaWNrIGV2ZW50XG4gICAgICAgIHNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ2NsaWNrJyk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gVW5zZXQgdGhlIGZsYWcgdG8gYWxsb3cgb3RoZXIgd2lkZ2V0cyB0byBpbmhlcml0IHRoZSB0b3VjaCBldmVudFxuICAgICAgdG91Y2hIYW5kbGVkID0gZmFsc2U7XG4gICAgfTtcbiAgXG4gICAgLyoqXG4gICAgICogQSBkdWNrIHB1bmNoIG9mIHRoZSAkLnVpLm1vdXNlIF9tb3VzZUluaXQgbWV0aG9kIHRvIHN1cHBvcnQgdG91Y2ggZXZlbnRzLlxuICAgICAqIFRoaXMgbWV0aG9kIGV4dGVuZHMgdGhlIHdpZGdldCB3aXRoIGJvdW5kIHRvdWNoIGV2ZW50IGhhbmRsZXJzIHRoYXRcbiAgICAgKiB0cmFuc2xhdGUgdG91Y2ggZXZlbnRzIHRvIG1vdXNlIGV2ZW50cyBhbmQgcGFzcyB0aGVtIHRvIHRoZSB3aWRnZXQnc1xuICAgICAqIG9yaWdpbmFsIG1vdXNlIGV2ZW50IGhhbmRsaW5nIG1ldGhvZHMuXG4gICAgICovXG4gICAgbW91c2VQcm90by5fbW91c2VJbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gIFxuICAgICAgLy8gRGVsZWdhdGUgdGhlIHRvdWNoIGhhbmRsZXJzIHRvIHRoZSB3aWRnZXQncyBlbGVtZW50XG4gICAgICBzZWxmLmVsZW1lbnQuYmluZCh7XG4gICAgICAgIHRvdWNoc3RhcnQ6ICQucHJveHkoc2VsZiwgJ190b3VjaFN0YXJ0JyksXG4gICAgICAgIHRvdWNobW92ZTogJC5wcm94eShzZWxmLCAnX3RvdWNoTW92ZScpLFxuICAgICAgICB0b3VjaGVuZDogJC5wcm94eShzZWxmLCAnX3RvdWNoRW5kJylcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIENhbGwgdGhlIG9yaWdpbmFsICQudWkubW91c2UgaW5pdCBtZXRob2RcbiAgICAgIF9tb3VzZUluaXQuY2FsbChzZWxmKTtcbiAgICB9O1xuICBcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIHRvdWNoIGV2ZW50IGhhbmRsZXJzXG4gICAgICovXG4gICAgbW91c2VQcm90by5fbW91c2VEZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gIFxuICAgICAgLy8gRGVsZWdhdGUgdGhlIHRvdWNoIGhhbmRsZXJzIHRvIHRoZSB3aWRnZXQncyBlbGVtZW50XG4gICAgICBzZWxmLmVsZW1lbnQudW5iaW5kKHtcbiAgICAgICAgdG91Y2hzdGFydDogJC5wcm94eShzZWxmLCAnX3RvdWNoU3RhcnQnKSxcbiAgICAgICAgdG91Y2htb3ZlOiAkLnByb3h5KHNlbGYsICdfdG91Y2hNb3ZlJyksXG4gICAgICAgIHRvdWNoZW5kOiAkLnByb3h5KHNlbGYsICdfdG91Y2hFbmQnKVxuICAgICAgfSk7XG4gIFxuICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgJC51aS5tb3VzZSBkZXN0cm95IG1ldGhvZFxuICAgICAgX21vdXNlRGVzdHJveS5jYWxsKHNlbGYpO1xuICAgIH07XG4gIFxuICB9KShqUXVlcnkpOyJdfQ==
