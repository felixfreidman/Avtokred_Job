"use strict";function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var allNextButtons=document.querySelectorAll(".form-navigation__button--next");allNextButtons.forEach(function(n){n.addEventListener("click",function(){var e=(e=n.id).replace("Button",""),t=n.parentNode.parentNode.id;document.getElementById(t).classList.toggle("screen--hide"),document.getElementById(t).classList.toggle("screen--show"),document.getElementById(e).classList.toggle("screen--hide"),document.getElementById(e).classList.toggle("screen--show"),document.querySelectorAll("input[name='autoSelect']").forEach(function(e){e.checked&&(e=e.id,detailedFormObject.type=e.toString())});e=document.getElementById("debtInput").value;console.log(e),detailedFormObject.credit=e.toString();e=document.getElementById("timeInput").value;detailedFormObject.time=e.toString();e=document.getElementById("investInput").value;detailedFormObject.invest=e.toString(),console.log(detailedFormObject)})});var allPrevButtons=document.querySelectorAll(".form-navigation__button--prev");allPrevButtons.forEach(function(n){n.addEventListener("click",function(){var e=(e=n.id).replace("Button",""),t=n.parentNode.parentNode.id;document.getElementById(t).classList.toggle("screen--hide"),document.getElementById(t).classList.toggle("screen--show"),document.getElementById(e).classList.toggle("screen--hide"),document.getElementById(e).classList.toggle("screen--show")})});var detailedFormObject={type:"",credit:"",time:"",invest:"",userName:"",userPhone:""},detailedButton=document.getElementById("detailedForm");detailedButton.addEventListener("click",function(){document.getElementById("firstScreen").classList.toggle("screen--hide"),document.getElementById("firstScreen").classList.toggle("screen--show"),document.getElementById("secondScreen").classList.toggle("screen--hide"),document.getElementById("secondScreen").classList.toggle("screen--show")});var userNameInput=document.getElementById("userName"),userPhoneInput=document.getElementById("userPhone");$(document).ready(function(){$(".submit-button").addClass("form-navigation__button--disabled"),$("#userName").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userPhone").val().length&&$(".submit-button").removeClass("form-navigation__button--disabled")}),$("#userPhone").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userName").val().length&&$(".submit-button").removeClass("form-navigation__button--disabled")})});var workProccessButtonOpen=document.getElementById("workProccessButtonOpen"),workProccessButtonClose=document.getElementById("workProccessButtonClose"),questionButtonOpen=document.getElementById("questionButtonOpen"),questionButtonClose=document.getElementById("questionButtonClose"),banksButtonOpen=document.getElementById("banksButtonOpen"),banksButtonClose=document.getElementById("banksButtonClose"),verticalSmallContainer=document.getElementById("verticalSmallContainer"),verticalBigContainer=document.getElementById("verticalBigContainer"),basicMenuContainer=document.getElementById("basicMenuContainer"),aboutButtonClose=document.getElementById("aboutButtonClose");function closeButton(){setTimeout(closeButtonDelay,100)}function closeButtonDelay(){banksButtonOpen.classList.toggle("buttonExpandBig")}function closeButtonAbout(){setTimeout(closeButtonAboutDelay,100)}function closeButtonAboutDelay(){verticalSmallContainer.classList.remove("containerSmallExpand"),basicMenuContainer.classList.remove("menuTransformed")}function closeButtonProcess(){setTimeout(closeButtonProcessDelay,100)}function closeButtonProcessDelay(){workProccessButtonOpen.classList.toggle("smallHorizontalExpanded")}function closeButtonQuestion(){setTimeout(closeButtonQuestionDelay,100)}function closeButtonQuestionDelay(){questionButtonOpen.classList.toggle("smallHorizontalExpanded")}function initAboutSwiper(){new Swiper("#aboutSwiper",{pagination:{el:".about-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menuCompany[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"cube",speed:800})}function initQuestionSwiper(){new Swiper("#questionSwiper",{pagination:{el:".question-pagination",clickable:!0,renderBullet:function(e){return'\n            <div class = "swiper-pagination-bullet">\n                <div class = "question-image">\n                <img src = "'.concat(questionImages[e],'"/>\n                </div>\n                <div class = "question-header">').concat(questionHeaders[e],"</div>\n            </div>\n            ")}},loop:!0,effect:"fade",speed:800,direction:"vertical"})}workProccessButtonOpen.addEventListener("click",function(){workProccessButtonOpen.classList.contains("smallHorizontalExpanded")||workProccessButtonOpen.classList.add("smallHorizontalExpanded")}),questionButtonOpen.addEventListener("click",function(){questionButtonOpen.classList.contains("smallHorizontalExpanded")||(questionButtonOpen.classList.add("smallHorizontalExpanded"),setTimeout(initQuestionSwiper,300))}),banksButtonOpen.addEventListener("click",function(){banksButtonOpen.classList.contains("buttonExpandBig")||banksButtonOpen.classList.add("buttonExpandBig")}),verticalSmallContainer.addEventListener("click",function(){verticalSmallContainer.classList.contains("containerSmallExpand")||(verticalSmallContainer.classList.add("containerSmallExpand"),basicMenuContainer.classList.add("menuTransformed"),initAboutSwiper())}),banksButtonClose.addEventListener("click",closeButton),aboutButtonClose.addEventListener("click",closeButtonAbout),workProccessButtonClose.addEventListener("click",closeButtonProcess),questionButtonClose.addEventListener("click",closeButtonQuestion);var questionHeaders=[],questionHeaderArray=document.querySelectorAll(".question-slide");questionHeaderArray.forEach(function(e){e=e.getAttribute("data-question-header");questionHeaders.push(e)});var questionImages=[],questionImageArray=document.querySelectorAll(".question-slide");questionImageArray.forEach(function(e){e=e.getAttribute("data-question-image");questionImages.push(e)});var mobileHeaderBtn=document.getElementById("showMenu"),mobileHeaderLayer=document.getElementById("headerLayer");function toggleHeaderMenu(){mobileHeaderLayer.classList.toggle("btn-clicked--show"),mobileHeaderBtn.classList.toggle("header-btn--clicked")}mobileHeaderBtn.addEventListener("click",toggleHeaderMenu),mobileHeaderLayer.addEventListener("click",toggleHeaderMenu);var menu=[],HeadersArray=document.querySelectorAll(".attention-container__header");HeadersArray.forEach(function(e){e=e.getAttribute("data-info");menu.push(e)});var menuCompany=[],companyPagesArray=document.querySelectorAll(".about-info");companyPagesArray.forEach(function(e){e=e.getAttribute("data-info");menuCompany.push(e)});var swiperGreet=new Swiper("#greetingSwipper",{pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menu[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"fade",speed:800,watchSlidesProgress:!0,watchVisibility:!0,disableOnInteraction:!0}),swiperBanks=new Swiper("#banksSwiper",{navigation:{nextEl:".button-bank--next",prevEl:".button-bank--prev"},pagination:{el:".banks-pagination",clickable:!0},loop:!0,effect:"cards",speed:800,slidesPerView:6,breakpoints:{920:{slidesPerView:4},600:{slidesPerView:3},450:{slidesPerView:2}}}),TxtType=function(e,t,n){this.toRotate=t,this.el=e,this.loopNum=0,this.period=parseInt(n,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};TxtType.prototype.tick=function(){var e=this.loopNum%this.toRotate.length,t=this.toRotate[e];this.isDeleting?this.txt=t.substring(0,this.txt.length-1):this.txt=t.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>";var n=this,e=200-100*Math.random();this.isDeleting&&(e/=2),this.isDeleting||this.txt!==t?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,e=500):(e=this.period,this.isDeleting=!0),setTimeout(function(){n.tick()},e)},window.onload=function(){for(var e=document.getElementsByClassName("typewrite"),t=0;t<e.length;t++){var n=e[t].getAttribute("data-type"),i=e[t].getAttribute("data-period");n&&new TxtType(e[t],JSON.parse(n),i)}var o=document.createElement("style");o.type="text/css",o.innerHTML=".typewrite > .wrap { border-right: 0.08em solid #fff}",document.body.appendChild(o)},AOS.init({startEvent:"DOMContentLoaded"}),$(document).ready(function(){$("#sliderDebt").slider({range:"min",animate:!0,value:5e5,min:1e5,max:435e4,step:1e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#debtInput").val(t)}}),$("#debtInput").val($("#sliderDebt").slider("option","value")),$("#debtInput").change(function(){$("#sliderDebt").slider("value",$(this).val())}),$("#sliderTime").slider({range:"min",animate:!0,value:3,min:1,max:8,step:1,slide:function(e,t){var n=t.value;switch(n){case 1:n="".concat(n," год");break;case 2:case 3:case 4:n="".concat(n," года");break;default:n="".concat(n," лет")}$("#timeInput").val(n)}}),$("#timeInput").val($("#sliderTime").slider("option","value"));var e=$("#timeInput").val(),e="".concat(e," года");$("#timeInput").val(e),$("#timeInput").change(function(){$("#sliderTime").slider("value",$(this).val())}),$("#sliderIncome").slider({range:"min",animate:!0,value:3e4,min:1e4,max:5e5,step:5e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#incomeInput").val(t)}}),$("#incomeInput").val($("#sliderIncome").slider("option","value")),$("#incomeInput").change(function(){$("#sliderIncome").slider("value",$(this).val())}),$("#sliderInvest").slider({range:"min",animate:!0,value:1e5,min:0,max:4e5,step:1e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#investInput").val(t)}}),$("#investInput").val($("#sliderInvest").slider("option","value")),$("#investInput").change(function(){$("#sliderInvest").slider("value",$(this).val())})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyIsImNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsibnVtYmVyV2l0aENvbW1hcyIsIngiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJhbGxOZXh0QnV0dG9ucyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiYnV0dG9uSWQiLCJpZCIsInBhcmVudElkIiwicGFyZW50Tm9kZSIsImdldEVsZW1lbnRCeUlkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaW5wdXQiLCJjaGVja2VkIiwiY2hlY2tlZE9wdGlvbiIsImRldGFpbGVkRm9ybU9iamVjdCIsInR5cGUiLCJjcmVkaXRTdW0iLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJjcmVkaXQiLCJjcmVkaXRUaW1lIiwidGltZSIsImNyZWRpdEludmVzdCIsImludmVzdCIsImFsbFByZXZCdXR0b25zIiwidXNlck5hbWUiLCJ1c2VyUGhvbmUiLCJkZXRhaWxlZEJ1dHRvbiIsInVzZXJOYW1lSW5wdXQiLCJ1c2VyUGhvbmVJbnB1dCIsIiQiLCJyZWFkeSIsImFkZENsYXNzIiwia2V5dXAiLCJ0aGlzIiwidmFsIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJ3b3JrUHJvY2Nlc3NCdXR0b25PcGVuIiwid29ya1Byb2NjZXNzQnV0dG9uQ2xvc2UiLCJxdWVzdGlvbkJ1dHRvbk9wZW4iLCJxdWVzdGlvbkJ1dHRvbkNsb3NlIiwiYmFua3NCdXR0b25PcGVuIiwiYmFua3NCdXR0b25DbG9zZSIsInZlcnRpY2FsU21hbGxDb250YWluZXIiLCJ2ZXJ0aWNhbEJpZ0NvbnRhaW5lciIsImJhc2ljTWVudUNvbnRhaW5lciIsImFib3V0QnV0dG9uQ2xvc2UiLCJjbG9zZUJ1dHRvbiIsInNldFRpbWVvdXQiLCJjbG9zZUJ1dHRvbkRlbGF5IiwiY2xvc2VCdXR0b25BYm91dCIsImNsb3NlQnV0dG9uQWJvdXREZWxheSIsInJlbW92ZSIsImNsb3NlQnV0dG9uUHJvY2VzcyIsImNsb3NlQnV0dG9uUHJvY2Vzc0RlbGF5IiwiY2xvc2VCdXR0b25RdWVzdGlvbiIsImNsb3NlQnV0dG9uUXVlc3Rpb25EZWxheSIsImluaXRBYm91dFN3aXBlciIsIlN3aXBlciIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsInJlbmRlckJ1bGxldCIsImluZGV4IiwiY2xhc3NOYW1lIiwiY29uY2F0IiwibWVudUNvbXBhbnkiLCJsb29wIiwiZWZmZWN0Iiwic3BlZWQiLCJpbml0UXVlc3Rpb25Td2lwZXIiLCJxdWVzdGlvbkltYWdlcyIsInF1ZXN0aW9uSGVhZGVycyIsImRpcmVjdGlvbiIsImNvbnRhaW5zIiwiYWRkIiwicXVlc3Rpb25IZWFkZXJBcnJheSIsImVsZW1lbnQiLCJTbGlkZUluZm9IZWFkZXIiLCJnZXRBdHRyaWJ1dGUiLCJwdXNoIiwicXVlc3Rpb25JbWFnZUFycmF5IiwiU2xpZGVJbmZvSW1hZ2UiLCJtb2JpbGVIZWFkZXJCdG4iLCJtb2JpbGVIZWFkZXJMYXllciIsInRvZ2dsZUhlYWRlck1lbnUiLCJtZW51IiwiSGVhZGVyc0FycmF5IiwiSGVhZGVyVmFsdWUiLCJjb21wYW55UGFnZXNBcnJheSIsInN3aXBlckdyZWV0Iiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsIndhdGNoVmlzaWJpbGl0eSIsImRpc2FibGVPbkludGVyYWN0aW9uIiwic3dpcGVyQmFua3MiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwic2xpZGVzUGVyVmlldyIsImJyZWFrcG9pbnRzIiwiOTIwIiwiNjAwIiwiNDUwIiwiVHh0VHlwZSIsInRvUm90YXRlIiwicGVyaW9kIiwibG9vcE51bSIsInBhcnNlSW50IiwidHh0IiwidGljayIsImlzRGVsZXRpbmciLCJwcm90b3R5cGUiLCJpIiwiZnVsbFR4dCIsInN1YnN0cmluZyIsImlubmVySFRNTCIsInRoYXQiLCJkZWx0YSIsIk1hdGgiLCJyYW5kb20iLCJ3aW5kb3ciLCJvbmxvYWQiLCJlbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJKU09OIiwicGFyc2UiLCJjc3MiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiQU9TIiwiaW5pdCIsInN0YXJ0RXZlbnQiLCJzbGlkZXIiLCJyYW5nZSIsImFuaW1hdGUiLCJtaW4iLCJtYXgiLCJzdGVwIiwic2xpZGUiLCJldmVudCIsInVpIiwiZGVidFZhbHVlIiwiY2hhbmdlIiwidGltZVZhbHVlIl0sIm1hcHBpbmdzIjoiYUFNQSxTQUFBQSxpQkFBQUMsR0FDQSxPQUFBQSxFQUFBQyxXQUFBQyxRQUFBLHdCQUFBLEtBSUEsSUFBQUMsZUFBQUMsU0FBQUMsaUJBQ0Esa0NBRUFGLGVBQUFHLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMsaUJBQUEsUUFBQSxXQUNBLElBQ0FDLEdBREFBLEVBQUFGLEVBQUFHLElBQ0FSLFFBQUEsU0FBQSxJQUNBUyxFQUFBSixFQUFBSyxXQUFBQSxXQUFBRixHQUNBTixTQUFBUyxlQUFBRixHQUFBRyxVQUFBQyxPQUFBLGdCQUNBWCxTQUFBUyxlQUFBRixHQUFBRyxVQUFBQyxPQUFBLGdCQUNBWCxTQUFBUyxlQUFBSixHQUFBSyxVQUFBQyxPQUFBLGdCQUNBWCxTQUFBUyxlQUFBSixHQUFBSyxVQUFBQyxPQUFBLGdCQUNBWCxTQUFBQyxpQkFBQSw0QkFDQUMsUUFBQSxTQUFBVSxHQUNBQSxFQUFBQyxVQUNBQyxFQUFBRixFQUFBTixHQUNBUyxtQkFBQUMsS0FBQUYsRUFBQWpCLGNBR0FvQixFQUFBakIsU0FBQVMsZUFBQSxhQUFBUyxNQUNBQyxRQUFBQyxJQUFBSCxHQUNBRixtQkFBQU0sT0FBQUosRUFBQXBCLFdBQ0F5QixFQUFBdEIsU0FBQVMsZUFBQSxhQUFBUyxNQUNBSCxtQkFBQVEsS0FBQUQsRUFBQXpCLFdBR0EyQixFQUFBeEIsU0FBQVMsZUFBQSxlQUFBUyxNQUNBSCxtQkFBQVUsT0FBQUQsRUFBQTNCLFdBQ0FzQixRQUFBQyxJQUFBTCx3QkFHQSxJQUFBVyxlQUFBMUIsU0FBQUMsaUJBQ0Esa0NBRUF5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QUQsRUFBQTlILE9BRUFjLEVBQUEsZ0JBQUFLLElBQUE0RyxNQUdBakgsRUFBQSxnQkFBQUssSUFBQUwsRUFBQSxpQkFBQXdHLE9BQUEsU0FBQSxVQUNBeEcsRUFBQSxnQkFBQWtILE9BQUEsV0FDQWxILEVBQUEsaUJBQUF3RyxPQUFBLFFBQUF4RyxFQUFBSSxNQUFBQyxTQUVBTCxFQUFBLGlCQUFBd0csT0FBQSxDQUNBQyxNQUFBLE1BQ0FDLFNBQUEsRUFDQXhILE1BQUEsSUFDQXlILElBQUEsRUFDQUMsSUFBQSxJQUNBQyxLQUFBLElBQ0FDLE1BQUEsU0FBQUMsRUFBQUMsR0FFQUMsRUFBQXRKLGlCQURBc0osRUFBQUQsRUFBQTlILE9BRUFjLEVBQUEsZ0JBQUFLLElBQUE0RyxNQUdBakgsRUFBQSxnQkFBQUssSUFBQUwsRUFBQSxpQkFBQXdHLE9BQUEsU0FBQSxVQUNBeEcsRUFBQSxnQkFBQWtILE9BQUEsV0FDQWxILEVBQUEsaUJBQUF3RyxPQUFBLFFBQUF4RyxFQUFBSSxNQUFBQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkBhdXRob3I6IGZlbGl4ZnJlaWRtYW4gXG5AbWFpbDogZmVsaXhmcmVpZG1hbmRldkBnbWFpbC5jb21cbkBub3RlOiDQuNGJ0YMg0YDQsNCx0L7RgtGDXG4qL1xuLy8g0JLRgNC10LzQtdC90L3QvtC1INGA0LXRiNC10L3QuNC1INC00LXQu9C10L3QuNGPINC90LAg0YDQsNC30YDRj9C00YssINC/0L7RgtC+0Lwg0LzQsNGB0LrQsCDQsdGD0LTQtdGCINGA0LDQsdC+0YLQsNGC0YxcbmZ1bmN0aW9uIG51bWJlcldpdGhDb21tYXMoeCkge1xuICAgIHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIuXCIpO1xufVxuLy8g0KDQsNCx0L7RgtCwINC80LXQvdGOINC4INGB0L7Qt9C00LDQvdC40Y8g0L7QsdGK0LXQutGC0LAg0LTQu9GPINCx0YPQtNGD0YnQtdC5INC/0LXRgNC10LTQsNGH0LgsXG4vLyDQt9Cw0YLQtdC8INGD0LbQtSDRgtGA0LDQvdC/0LjQu9GP0YbQuNGPINC90LAg0LLQsNC20L3Ri9C1INC00LDQvdC90YvQtVxuY29uc3QgYWxsTmV4dEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgIFwiLmZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1uZXh0XCJcbik7XG5hbGxOZXh0QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGJ1dHRvbklkID0gYnV0dG9uLmlkO1xuICAgICAgICBidXR0b25JZCA9IGJ1dHRvbklkLnJlcGxhY2UoXCJCdXR0b25cIiwgXCJcIik7XG4gICAgICAgIGxldCBwYXJlbnRJZCA9IGJ1dHRvbi5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuICAgICAgICBjb25zdCB0eXBlc0lucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFtuYW1lPSdhdXRvU2VsZWN0J11cIik7XG4gICAgICAgIHR5cGVzSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGxldCBjaGVja2VkT3B0aW9uID0gaW5wdXQuaWQ7XG4gICAgICAgICAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LnR5cGUgPSBjaGVja2VkT3B0aW9uLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjcmVkaXRTdW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnRJbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgY29uc29sZS5sb2coY3JlZGl0U3VtKTtcbiAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LmNyZWRpdCA9IGNyZWRpdFN1bS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBjcmVkaXRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lSW5wdXRcIikudmFsdWU7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC50aW1lID0gY3JlZGl0VGltZS50b1N0cmluZygpO1xuICAgICAgICAvLyBjb25zdCB1c2VySW5jb21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmNvbWVJbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgLy8gZGV0YWlsZWRGb3JtT2JqZWN0LmluY29tZSA9IHVzZXJJbmNvbWUudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgY3JlZGl0SW52ZXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnZlc3RJbnB1dFwiKS52YWx1ZTtcbiAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LmludmVzdCA9IGNyZWRpdEludmVzdC50b1N0cmluZygpO1xuICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxlZEZvcm1PYmplY3QpO1xuICAgIH0pO1xufSk7XG5jb25zdCBhbGxQcmV2QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgXCIuZm9ybS1uYXZpZ2F0aW9uX19idXR0b24tLXByZXZcIlxuKTtcbmFsbFByZXZCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgYnV0dG9uSWQgPSBidXR0b24uaWQ7XG4gICAgICAgIGJ1dHRvbklkID0gYnV0dG9uSWQucmVwbGFjZShcIkJ1dHRvblwiLCBcIlwiKTtcbiAgICAgICAgbGV0IHBhcmVudElkID0gYnV0dG9uLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4gICAgfSk7XG59KTtcbmNvbnN0IGRldGFpbGVkRm9ybU9iamVjdCA9IHtcbiAgICB0eXBlOiBcIlwiLFxuICAgIGNyZWRpdDogXCJcIixcbiAgICB0aW1lOiBcIlwiLFxuICAgIC8vIGluY29tZTogXCJcIixcbiAgICBpbnZlc3Q6IFwiXCIsXG4gICAgdXNlck5hbWU6IFwiXCIsXG4gICAgdXNlclBob25lOiBcIlwiLFxufTtcbi8vINCS0LDRgNC40LDRhtC40Y8g0YTQvtGA0LzRiyDQtNC70Y8g0L3QtdC+0L/RgNC10LTQu9C10L3QvdC+0LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbmNvbnN0IGRldGFpbGVkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXRhaWxlZEZvcm1cIik7XG5kZXRhaWxlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3RTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpcnN0U2NyZWVuXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWNvbmRTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY29uZFNjcmVlblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xufSk7XG4vLyDQktC10YDQuNGE0LjQutCw0YbQuNGPINC30LDQv9C+0LvQvdC10L3QuNGPINC00LDQvdC90YvRhSDQsiDRhNC+0YDQvNGDXG5jb25zdCB1c2VyTmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyTmFtZVwiKTtcbmNvbnN0IHVzZXJQaG9uZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyUGhvbmVcIik7XG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAkKFwiLnN1Ym1pdC1idXR0b25cIikuYWRkQ2xhc3MoXCJmb3JtLW5hdmlnYXRpb25fX2J1dHRvbi0tZGlzYWJsZWRcIik7XG4gICAgJChcIiN1c2VyTmFtZVwiKS5rZXl1cChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPSAwICYmICQoXCIjdXNlclBob25lXCIpLnZhbCgpLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAkKFwiLnN1Ym1pdC1idXR0b25cIikucmVtb3ZlQ2xhc3MoXCJmb3JtLW5hdmlnYXRpb25fX2J1dHRvbi0tZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKFwiI3VzZXJQaG9uZVwiKS5rZXl1cChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPSAwICYmICQoXCIjdXNlck5hbWVcIikudmFsKCkubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG4vLyDQkdCe0JvQrNCo0JDQryDQodCV0JrQptCY0K8g0JzQldCd0K4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vINCg0LDQsdC+0YLQsCDRgSDQtNC40L3QsNC80LjQtdGH0LXRgdC60LjQvCDQvNC10L3RjlxuY29uc3Qgd29ya1Byb2NjZXNzQnV0dG9uT3BlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgIFwid29ya1Byb2NjZXNzQnV0dG9uT3BlblwiXG4pO1xuY29uc3Qgd29ya1Byb2NjZXNzQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICBcIndvcmtQcm9jY2Vzc0J1dHRvbkNsb3NlXCJcbik7XG5jb25zdCBxdWVzdGlvbkJ1dHRvbk9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZXN0aW9uQnV0dG9uT3BlblwiKTtcbmNvbnN0IHF1ZXN0aW9uQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZXN0aW9uQnV0dG9uQ2xvc2VcIik7XG5jb25zdCBiYW5rc0J1dHRvbk9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtzQnV0dG9uT3BlblwiKTtcbmNvbnN0IGJhbmtzQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtzQnV0dG9uQ2xvc2VcIik7XG5jb25zdCB2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgXCJ2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyXCJcbik7XG5jb25zdCB2ZXJ0aWNhbEJpZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmVydGljYWxCaWdDb250YWluZXJcIik7XG5jb25zdCBiYXNpY01lbnVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhc2ljTWVudUNvbnRhaW5lclwiKTtcbmNvbnN0IGFib3V0QnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFib3V0QnV0dG9uQ2xvc2VcIik7XG4vLyDQodC10LrRhtC40Y8g0LTQu9GPINC30LDQv9GD0YHQutCwINGB0L7QsdGL0YLQuNC5INC/0L4g0L3QsNC20LDRgtC40Y4g0LrQvdC+0L/QvtC6XG53b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKCF3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmNsYXNzTGlzdC5jb250YWlucyhcInNtYWxsSG9yaXpvbnRhbEV4cGFuZGVkXCIpKVxuICAgICAgICB3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbn0pO1xucXVlc3Rpb25CdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKCFxdWVzdGlvbkJ1dHRvbk9wZW4uY2xhc3NMaXN0LmNvbnRhaW5zKFwic21hbGxIb3Jpem9udGFsRXhwYW5kZWRcIikpIHtcbiAgICAgICAgcXVlc3Rpb25CdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbiAgICAgICAgc2V0VGltZW91dChpbml0UXVlc3Rpb25Td2lwZXIsIDMwMCk7XG4gICAgfVxufSk7XG5cbmJhbmtzQnV0dG9uT3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmICghYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbkV4cGFuZEJpZ1wiKSlcbiAgICAgICAgYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJidXR0b25FeHBhbmRCaWdcIik7XG59KTtcbnZlcnRpY2FsU21hbGxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoIXZlcnRpY2FsU21hbGxDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGFpbmVyU21hbGxFeHBhbmRcIikpIHtcbiAgICAgICAgdmVydGljYWxTbWFsbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyU21hbGxFeHBhbmRcIik7XG4gICAgICAgIGJhc2ljTWVudUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWVudVRyYW5zZm9ybWVkXCIpO1xuICAgICAgICBpbml0QWJvdXRTd2lwZXIoKTtcbiAgICB9XG59KTtcblxuYmFua3NCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VCdXR0b24pO1xuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvbigpIHtcbiAgICBzZXRUaW1lb3V0KGNsb3NlQnV0dG9uRGVsYXksIDEwMCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uRGVsYXkoKSB7XG4gICAgYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJidXR0b25FeHBhbmRCaWdcIik7XG59XG5cbmFib3V0QnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uQWJvdXQpO1xuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvbkFib3V0KCkge1xuICAgIHNldFRpbWVvdXQoY2xvc2VCdXR0b25BYm91dERlbGF5LCAxMDApO1xufVxuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvbkFib3V0RGVsYXkoKSB7XG4gICAgdmVydGljYWxTbWFsbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbmVyU21hbGxFeHBhbmRcIik7XG4gICAgYmFzaWNNZW51Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51VHJhbnNmb3JtZWRcIik7XG59XG5cbndvcmtQcm9jY2Vzc0J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUJ1dHRvblByb2Nlc3MpO1xuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvblByb2Nlc3MoKSB7XG4gICAgc2V0VGltZW91dChjbG9zZUJ1dHRvblByb2Nlc3NEZWxheSwgMTAwKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VCdXR0b25Qcm9jZXNzRGVsYXkoKSB7XG4gICAgd29ya1Byb2NjZXNzQnV0dG9uT3Blbi5jbGFzc0xpc3QudG9nZ2xlKFwic21hbGxIb3Jpem9udGFsRXhwYW5kZWRcIik7XG59XG5cbnF1ZXN0aW9uQnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uUXVlc3Rpb24pO1xuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvblF1ZXN0aW9uKCkge1xuICAgIHNldFRpbWVvdXQoY2xvc2VCdXR0b25RdWVzdGlvbkRlbGF5LCAxMDApO1xufVxuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvblF1ZXN0aW9uRGVsYXkoKSB7XG4gICAgcXVlc3Rpb25CdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbn1cbi8vINCd0LDQtNC+INCx0YPQtNC10YIg0L/QvtGC0L7QvCDQuNC90LjRhtC40YDQvtCy0LDRgtGMINGB0LLQsNC50L/QtdGA0Ytcbi8vINC/0L4g0LfQsNC/0YPRgdC60YMg0LrQvdC+0L/QutC4LCDRh9GC0L7QsdGLINC+0L3QuCDQvdC+0YDQvNCw0LvRjNC90L4g0LLQtdGA0YHRgtCw0LvQuNGB0YxcbmZ1bmN0aW9uIGluaXRBYm91dFN3aXBlcigpIHtcbiAgICBsZXQgc3dpcGVyQWJvdXQgPSBuZXcgU3dpcGVyKFwiI2Fib3V0U3dpcGVyXCIsIHtcbiAgICAgICAgLy8gbmF2aWdhdGlvbjoge1xuICAgICAgICAvLyAgICAgbmV4dEVsOiBcIi5idXR0b24tYWJvdXQtLW5leHRcIixcbiAgICAgICAgLy8gICAgIHByZXZFbDogXCIuYnV0dG9uLWFib3V0LS1wcmV2XCIsXG4gICAgICAgIC8vIH0sXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgIGVsOiBcIi5hYm91dC1wYWdpbmF0aW9uXCIsXG4gICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICByZW5kZXJCdWxsZXQ6IGZ1bmN0aW9uKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVhZHlFbGVtZW50ID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwiJHtjbGFzc05hbWV9IGJ1bGxldC1zcGVjaWFsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9XCJidWxsZXQtaGVhZGVyXCI+JHttZW51Q29tcGFueVtpbmRleF19PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwiXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWR5RWxlbWVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgIGVmZmVjdDogXCJjdWJlXCIsXG4gICAgICAgIHNwZWVkOiA4MDAsXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRRdWVzdGlvblN3aXBlcigpIHtcbiAgICBsZXQgc3dpcGVyUXVlc3Rpb24gPSBuZXcgU3dpcGVyKFwiI3F1ZXN0aW9uU3dpcGVyXCIsIHtcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgZWw6IFwiLnF1ZXN0aW9uLXBhZ2luYXRpb25cIixcbiAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVhZHlFbGVtZW50ID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwic3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwicXVlc3Rpb24taW1hZ2VcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYyA9IFwiJHtxdWVzdGlvbkltYWdlc1tpbmRleF19XCIvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcInF1ZXN0aW9uLWhlYWRlclwiPiR7cXVlc3Rpb25IZWFkZXJzW2luZGV4XX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZHlFbGVtZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgZWZmZWN0OiBcImZhZGVcIixcbiAgICAgICAgc3BlZWQ6IDgwMCxcbiAgICAgICAgZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIsXG4gICAgfSk7XG59XG4vLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDQvtGCINGB0LvQsNC50LTQvtCyINC00LvRjyDRgNC10L3QtNC10YDQsCDQutC90L7Qv9C+0LpcblxubGV0IHF1ZXN0aW9uSGVhZGVycyA9IFtdO1xubGV0IHF1ZXN0aW9uSGVhZGVyQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnF1ZXN0aW9uLXNsaWRlXCIpO1xucXVlc3Rpb25IZWFkZXJBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgbGV0IFNsaWRlSW5mb0hlYWRlciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1xdWVzdGlvbi1oZWFkZXJcIik7XG4gICAgcXVlc3Rpb25IZWFkZXJzLnB1c2goU2xpZGVJbmZvSGVhZGVyKTtcbn0pO1xubGV0IHF1ZXN0aW9uSW1hZ2VzID0gW107XG5sZXQgcXVlc3Rpb25JbWFnZUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5xdWVzdGlvbi1zbGlkZVwiKTtcbnF1ZXN0aW9uSW1hZ2VBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgbGV0IFNsaWRlSW5mb0ltYWdlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXF1ZXN0aW9uLWltYWdlXCIpO1xuICAgIHF1ZXN0aW9uSW1hZ2VzLnB1c2goU2xpZGVJbmZvSW1hZ2UpO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INCR0J7Qm9Cs0KjQkNCvINCh0JXQmtCm0JjQryDQnNCV0J3QrlxuLy8g0JzQntCR0JjQm9Cs0J3QntCVINCc0JXQndCuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zdCBtb2JpbGVIZWFkZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dNZW51XCIpO1xuY29uc3QgbW9iaWxlSGVhZGVyTGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlYWRlckxheWVyXCIpO1xubW9iaWxlSGVhZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVIZWFkZXJNZW51KTtcbm1vYmlsZUhlYWRlckxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVIZWFkZXJNZW51KTtcblxuZnVuY3Rpb24gdG9nZ2xlSGVhZGVyTWVudSgpIHtcbiAgICBtb2JpbGVIZWFkZXJMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwiYnRuLWNsaWNrZWQtLXNob3dcIik7XG4gICAgbW9iaWxlSGVhZGVyQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoZWFkZXItYnRuLS1jbGlja2VkXCIpO1xufVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g0JzQntCR0JjQm9Cs0J3QntCVINCc0JXQndCuXG5cbi8qIFxuVE9ETzog0JTQvtC60YPQvNC10L3RgtCw0YbQuNGPINC6INC60L7QtNGDXG5UT0RPOiDQlNC+0L/QuNGB0LDRgtGMINGE0L7RgNC80YMg0LTQu9GPINC+0L/RgNC10LTQtdC70LXQvdC90L7Qs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuVE9ETzog0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0Y/QvdC00LXQutGB0LBcbiovIiwiLy8g0KXRgNCw0L3QuNC70LjRidCwINC00LDRgtCwLdC00LDQvdC90YvRhSxcbi8v0LTQu9GPINGD0LTQvtCx0L3QvtCz0L4g0LfQsNC/0L7Qu9C90LXQvdC40Y8g0LTQsNC90L3Ri9GFINCyINGB0LLQsNC50L/QtdGA0LDRhVxubGV0IG1lbnUgPSBbXTtcbmxldCBIZWFkZXJzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmF0dGVudGlvbi1jb250YWluZXJfX2hlYWRlclwiKTtcbkhlYWRlcnNBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgbGV0IEhlYWRlclZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZm9cIik7XG4gICAgbWVudS5wdXNoKEhlYWRlclZhbHVlKTtcbn0pO1xubGV0IG1lbnVDb21wYW55ID0gW107XG5sZXQgY29tcGFueVBhZ2VzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFib3V0LWluZm9cIik7XG5jb21wYW55UGFnZXNBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgbGV0IEhlYWRlclZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZm9cIik7XG4gICAgbWVudUNvbXBhbnkucHVzaChIZWFkZXJWYWx1ZSk7XG59KTtcbi8vINCh0LLQsNC50L/QtdGA0YssINC60L7RgtC+0YDRi9C1INC30LDQv9GD0YHQutCw0Y7RgtGB0Y8g0YHRgNCw0LfRg1xubGV0IHN3aXBlckdyZWV0ID0gbmV3IFN3aXBlcihcIiNncmVldGluZ1N3aXBwZXJcIiwge1xuICAgIC8vIG5hdmlnYXRpb246IHtcbiAgICAvLyAgICAgbmV4dEVsOiBcIi5ncmVldGluZy1uZXh0XCIsXG4gICAgLy8gICAgIHByZXZFbDogXCIuZ3JlZXRpbmctcHJldlwiLFxuICAgIC8vIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXJCdWxsZXQ6IGZ1bmN0aW9uKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGxldCByZWFkeUVsZW1lbnQgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCIke2NsYXNzTmFtZX0gYnVsbGV0LXNwZWNpYWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID1cImJ1bGxldC1oZWFkZXJcIj4ke21lbnVbaW5kZXhdfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIlwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWR5RWxlbWVudDtcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGxvb3A6IHRydWUsXG4gICAgZWZmZWN0OiBcImZhZGVcIixcbiAgICBzcGVlZDogODAwLFxuICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgd2F0Y2hWaXNpYmlsaXR5OiB0cnVlLFxuICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiB0cnVlLFxufSk7XG5sZXQgc3dpcGVyQmFua3MgPSBuZXcgU3dpcGVyKFwiI2JhbmtzU3dpcGVyXCIsIHtcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogXCIuYnV0dG9uLWJhbmstLW5leHRcIixcbiAgICAgICAgcHJldkVsOiBcIi5idXR0b24tYmFuay0tcHJldlwiLFxuICAgIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuYmFua3MtcGFnaW5hdGlvblwiLFxuICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgfSxcbiAgICBsb29wOiB0cnVlLFxuICAgIGVmZmVjdDogXCJjYXJkc1wiLFxuICAgIHNwZWVkOiA4MDAsXG4gICAgc2xpZGVzUGVyVmlldzogNixcbiAgICBicmVha3BvaW50czoge1xuICAgICAgICA5MjA6IHtcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgICAgIH0sXG4gICAgICAgIDYwMDoge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcbiAgICAgICAgfSxcbiAgICAgICAgNDUwOiB7XG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgICB9LFxuICAgIH0sXG59KTtcblxuLy8g0JDQstGC0L7Qv9C10YfQsNGC0LDQvdC40LUg0YLQtdC60YHRgtCwINCyINCz0LvQsNCy0L3QvtC8INGB0LLQsNC50L/QtdGA0LVcbnZhciBUeHRUeXBlID0gZnVuY3Rpb24oZWwsIHRvUm90YXRlLCBwZXJpb2QpIHtcbiAgICB0aGlzLnRvUm90YXRlID0gdG9Sb3RhdGU7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMubG9vcE51bSA9IDA7XG4gICAgdGhpcy5wZXJpb2QgPSBwYXJzZUludChwZXJpb2QsIDEwKSB8fCAyMDAwO1xuICAgIHRoaXMudHh0ID0gXCJcIjtcbiAgICB0aGlzLnRpY2soKTtcbiAgICB0aGlzLmlzRGVsZXRpbmcgPSBmYWxzZTtcbn07XG5cblR4dFR5cGUucHJvdG90eXBlLnRpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IHRoaXMubG9vcE51bSAlIHRoaXMudG9Sb3RhdGUubGVuZ3RoO1xuICAgIHZhciBmdWxsVHh0ID0gdGhpcy50b1JvdGF0ZVtpXTtcblxuICAgIGlmICh0aGlzLmlzRGVsZXRpbmcpIHtcbiAgICAgICAgdGhpcy50eHQgPSBmdWxsVHh0LnN1YnN0cmluZygwLCB0aGlzLnR4dC5sZW5ndGggLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnR4dCA9IGZ1bGxUeHQuc3Vic3RyaW5nKDAsIHRoaXMudHh0Lmxlbmd0aCArIDEpO1xuICAgIH1cblxuICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwid3JhcFwiPicgKyB0aGlzLnR4dCArIFwiPC9zcGFuPlwiO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHZhciBkZWx0YSA9IDIwMCAtIE1hdGgucmFuZG9tKCkgKiAxMDA7XG5cbiAgICBpZiAodGhpcy5pc0RlbGV0aW5nKSB7XG4gICAgICAgIGRlbHRhIC89IDI7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzRGVsZXRpbmcgJiYgdGhpcy50eHQgPT09IGZ1bGxUeHQpIHtcbiAgICAgICAgZGVsdGEgPSB0aGlzLnBlcmlvZDtcbiAgICAgICAgdGhpcy5pc0RlbGV0aW5nID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNEZWxldGluZyAmJiB0aGlzLnR4dCA9PT0gXCJcIikge1xuICAgICAgICB0aGlzLmlzRGVsZXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb29wTnVtKys7XG4gICAgICAgIGRlbHRhID0gNTAwO1xuICAgIH1cblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQudGljaygpO1xuICAgIH0sIGRlbHRhKTtcbn07XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidHlwZXdyaXRlXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRvUm90YXRlID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuICAgICAgICB2YXIgcGVyaW9kID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YS1wZXJpb2RcIik7XG4gICAgICAgIGlmICh0b1JvdGF0ZSkge1xuICAgICAgICAgICAgbmV3IFR4dFR5cGUoZWxlbWVudHNbaV0sIEpTT04ucGFyc2UodG9Sb3RhdGUpLCBwZXJpb2QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElOSkVDVCBDU1NcbiAgICB2YXIgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgIGNzcy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICAgIGNzcy5pbm5lckhUTUwgPSBcIi50eXBld3JpdGUgPiAud3JhcCB7IGJvcmRlci1yaWdodDogMC4wOGVtIHNvbGlkICNmZmZ9XCI7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjc3MpO1xufTtcbi8vINCY0L3QuNGG0LjQsNGG0LjRjyDQkNCe0KHQkCDQtNC70Y8g0LTQstC40LPQsNGO0YnQtdCz0L4g0YLQtdC60YHRgtCwXG5BT1MuaW5pdCh7XG4gICAgc3RhcnRFdmVudDogXCJET01Db250ZW50TG9hZGVkXCIsXG59KTtcblxuLy8g0KDQsNCx0L7RgtCw0LXQvCDRgdC+INGB0LvQsNC50LTQtdGA0LDQvNC4INCyINGE0L7RgNC80LVcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoXCIjc2xpZGVyRGVidFwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDUwMDAwMCxcbiAgICAgICAgbWluOiAxMDAwMDAsXG4gICAgICAgIG1heDogNDM1MDAwMCxcbiAgICAgICAgc3RlcDogMTAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNkZWJ0SW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgJChcIiNkZWJ0SW5wdXRcIikudmFsKCQoXCIjc2xpZGVyRGVidFwiKS5zbGlkZXIoXCJvcHRpb25cIiwgXCJ2YWx1ZVwiKSk7XG4gICAgJChcIiNkZWJ0SW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMyxcbiAgICAgICAgbWluOiAxLFxuICAgICAgICBtYXg6IDgsXG4gICAgICAgIHN0ZXA6IDEsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCB0aW1lVmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodGltZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INCz0L7QtGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LvQtdGCYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoXCIjdGltZUlucHV0XCIpLnZhbCh0aW1lVmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjdGltZUlucHV0XCIpLnZhbCgkKFwiI3NsaWRlclRpbWVcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgIGxldCB0aW1lVmFsdWUgPSAkKFwiI3RpbWVJbnB1dFwiKS52YWwoKTtcbiAgICBzd2l0Y2ggKHRpbWVWYWx1ZSkge1xuICAgICAgICBkZWZhdWx0OiB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INCz0L7QtNCwYDtcbiAgICB9XG4gICAgJChcIiN0aW1lSW5wdXRcIikudmFsKHRpbWVWYWx1ZSk7XG4gICAgJChcIiN0aW1lSW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlclRpbWVcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXJJbmNvbWVcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAzMDAwMCxcbiAgICAgICAgbWluOiAxMDAwMCxcbiAgICAgICAgbWF4OiA1MDAwMDAsXG4gICAgICAgIHN0ZXA6IDUwMDAsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcbiAgICAgICAgICAgICQoXCIjaW5jb21lSW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgJChcIiNpbmNvbWVJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJJbmNvbWVcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgICQoXCIjaW5jb21lSW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlckluY29tZVwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCAkKHRoaXMpLnZhbCgpKTtcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlckludmVzdFwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDEwMDAwMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDQwMDAwMCxcbiAgICAgICAgc3RlcDogMTAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNpbnZlc3RJbnB1dFwiKS52YWwoZGVidFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI2ludmVzdElucHV0XCIpLnZhbCgkKFwiI3NsaWRlckludmVzdFwiKS5zbGlkZXIoXCJvcHRpb25cIiwgXCJ2YWx1ZVwiKSk7XG4gICAgJChcIiNpbnZlc3RJbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjc2xpZGVySW52ZXN0XCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIH0pO1xufSk7Il19
