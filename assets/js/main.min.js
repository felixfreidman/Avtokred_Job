"use strict";function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var allNextButtons=document.querySelectorAll(".form-navigation__button--next"),detailedFormObject={type:"",credit:"",time:"",income:"",invest:"",userName:"",userPhone:""};allNextButtons.forEach(function(s){s.addEventListener("click",function(){var e=(e=s.id).replace("Button",""),t=s.parentNode.parentNode.id;document.getElementById(t).classList.toggle("screen--hide"),document.getElementById(t).classList.toggle("screen--show"),document.getElementById(e).classList.toggle("screen--hide"),document.getElementById(e).classList.toggle("screen--show"),document.querySelectorAll("input[name='autoSelect']").forEach(function(e){var t;e.checked&&(t=e.id,detailedFormObject.type=t.toString())});var n=document.getElementById("debtInput").value;console.log(n),detailedFormObject.credit=n.toString();var o=document.getElementById("timeInput").value;detailedFormObject.time=o.toString();var i=document.getElementById("incomeInput").value;detailedFormObject.income=i.toString();var a=document.getElementById("investInput").value;detailedFormObject.invest=a.toString(),console.log(detailedFormObject)})});var allPrevButtons=document.querySelectorAll(".form-navigation__button--prev");allPrevButtons.forEach(function(n){n.addEventListener("click",function(){var e=(e=n.id).replace("Button",""),t=n.parentNode.parentNode.id;document.getElementById(t).classList.toggle("screen--hide"),document.getElementById(t).classList.toggle("screen--show"),document.getElementById(e).classList.toggle("screen--hide"),document.getElementById(e).classList.toggle("screen--show")})});var detailedButton=document.getElementById("detailedForm");detailedButton.addEventListener("click",function(){document.getElementById("firstScreen").classList.toggle("screen--hide"),document.getElementById("firstScreen").classList.toggle("screen--show"),document.getElementById("secondScreen").classList.toggle("screen--hide"),document.getElementById("secondScreen").classList.toggle("screen--show")});var userNameInput=document.getElementById("userName"),userPhoneInput=document.getElementById("userPhone");$(document).ready(function(){$(".submit-button").addClass("form-navigation__button--disabled"),$("#userName").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userPhone").val().length&&$(".submit-button").removeClass("form-navigation__button--disabled")}),$("#userPhone").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userName").val().length&&$(".submit-button").removeClass("form-navigation__button--disabled")})});var workProccessButtonOpen=document.getElementById("workProccessButtonOpen");workProccessButtonOpen.addEventListener("click",function(){workProccessButtonOpen.classList.contains("smallHorizontalExpanded")||workProccessButtonOpen.classList.add("smallHorizontalExpanded")});var banksButtonOpen=document.getElementById("banksButtonOpen");banksButtonOpen.addEventListener("click",function(){banksButtonOpen.classList.contains("buttonExpandBig")||banksButtonOpen.classList.add("buttonExpandBig")});var banksButtonClose=document.getElementById("banksButtonClose");function closeButton(){setTimeout(closeButtonDelay,100)}function closeButtonDelay(){banksButtonOpen.classList.toggle("buttonExpandBig")}banksButtonClose.addEventListener("click",closeButton);var verticalSmallContainer=document.getElementById("verticalSmallContainer"),verticalBigContainer=document.getElementById("verticalBigContainer"),basicMenuContainer=document.getElementById("basicMenuContainer");verticalSmallContainer.addEventListener("click",function(){verticalSmallContainer.classList.contains("containerSmallExpand")||(verticalSmallContainer.classList.add("containerSmallExpand"),basicMenuContainer.classList.add("menuTransformed"),initAboutSwiper())});var aboutButtonClose=document.getElementById("aboutButtonClose");function closeButtonAbout(){setTimeout(closeButtonAboutDelay,100)}function closeButtonAboutDelay(){verticalSmallContainer.classList.remove("containerSmallExpand"),basicMenuContainer.classList.remove("menuTransformed")}aboutButtonClose.addEventListener("click",closeButtonAbout);var workProccessButtonClose=document.getElementById("workProccessButtonClose");function closeButtonProcess(){setTimeout(closeButtonProcessDelay,100)}function closeButtonProcessDelay(){workProccessButtonOpen.classList.toggle("smallHorizontalExpanded")}function initAboutSwiper(){new Swiper("#aboutSwiper",{pagination:{el:".about-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menuCompany[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"cube",speed:800})}workProccessButtonClose.addEventListener("click",closeButtonProcess);var menu=[],HeadersArray=document.querySelectorAll(".attention-container__header");HeadersArray.forEach(function(e){var t=e.getAttribute("data-info");menu.push(t)});var menuCompany=[],companyPagesArray=document.querySelectorAll(".about-info");companyPagesArray.forEach(function(e){var t=e.getAttribute("data-info");menuCompany.push(t)});var swiperGreet=new Swiper("#greetingSwipper",{pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menu[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"fade",speed:800,watchSlidesProgress:!0,watchVisibility:!0,disableOnInteraction:!0}),swiperBanks=new Swiper("#banksSwiper",{navigation:{nextEl:".button-bank--next",prevEl:".button-bank--prev"},pagination:{el:".banks-pagination",clickable:!0},loop:!0,effect:"cards",speed:800,slidesPerView:6}),TxtType=function(e,t,n){this.toRotate=t,this.el=e,this.loopNum=0,this.period=parseInt(n,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};TxtType.prototype.tick=function(){var e=this.loopNum%this.toRotate.length,t=this.toRotate[e];this.isDeleting?this.txt=t.substring(0,this.txt.length-1):this.txt=t.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>";var n=this,o=200-100*Math.random();this.isDeleting&&(o/=2),this.isDeleting||this.txt!==t?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,o=500):(o=this.period,this.isDeleting=!0),setTimeout(function(){n.tick()},o)},window.onload=function(){for(var e=document.getElementsByClassName("typewrite"),t=0;t<e.length;t++){var n=e[t].getAttribute("data-type"),o=e[t].getAttribute("data-period");n&&new TxtType(e[t],JSON.parse(n),o)}var i=document.createElement("style");i.type="text/css",i.innerHTML=".typewrite > .wrap { border-right: 0.08em solid #fff}",document.body.appendChild(i)},AOS.init({startEvent:"DOMContentLoaded"}),$(document).ready(function(){$("#sliderDebt").slider({range:"min",animate:!0,value:5e5,min:1e5,max:435e4,step:1e3,slide:function(e,t){var n=numberWithCommas(n=t.value);$("#debtInput").val(n)}}),$("#debtInput").val($("#sliderDebt").slider("option","value")),$("#debtInput").change(function(){$("#sliderDebt").slider("value",$(this).val())}),$("#sliderTime").slider({range:"min",animate:!0,value:3,min:1,max:8,step:1,slide:function(e,t){var n=t.value;switch(n){case 1:n="".concat(n," год");break;case 2:case 3:case 4:n="".concat(n," года");break;default:n="".concat(n," лет")}$("#timeInput").val(n)}}),$("#timeInput").val($("#sliderTime").slider("option","value"));var e=$("#timeInput").val();console.log(e),e="".concat(e," года"),$("#timeInput").val(e),$("#timeInput").change(function(){$("#sliderTime").slider("value",$(this).val())}),$("#sliderIncome").slider({range:"min",animate:!0,value:3e4,min:1e4,max:5e5,step:5e3,slide:function(e,t){var n=numberWithCommas(n=t.value);$("#incomeInput").val(n)}}),$("#incomeInput").val($("#sliderIncome").slider("option","value")),$("#incomeInput").change(function(){$("#sliderIncome").slider("value",$(this).val())}),$("#sliderInvest").slider({range:"min",animate:!0,value:1e5,min:0,max:4e5,step:1e3,slide:function(e,t){var n=numberWithCommas(n=t.value);$("#investInput").val(n)}}),$("#investInput").val($("#sliderInvest").slider("option","value")),$("#investInput").change(function(){$("#sliderInvest").slider("value",$(this).val())})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyIsImNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsibnVtYmVyV2l0aENvbW1hcyIsIngiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJhbGxOZXh0QnV0dG9ucyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImRldGFpbGVkRm9ybU9iamVjdCIsInR5cGUiLCJjcmVkaXQiLCJ0aW1lIiwiaW5jb21lIiwiaW52ZXN0IiwidXNlck5hbWUiLCJ1c2VyUGhvbmUiLCJmb3JFYWNoIiwiYnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJ1dHRvbklkIiwiaWQiLCJwYXJlbnRJZCIsInBhcmVudE5vZGUiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlucHV0IiwiY2hlY2tlZE9wdGlvbiIsImNoZWNrZWQiLCJjcmVkaXRTdW0iLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJjcmVkaXRUaW1lIiwidXNlckluY29tZSIsImNyZWRpdEludmVzdCIsImFsbFByZXZCdXR0b25zIiwiZGV0YWlsZWRCdXR0b24iLCJ1c2VyTmFtZUlucHV0IiwidXNlclBob25lSW5wdXQiLCIkIiwicmVhZHkiLCJhZGRDbGFzcyIsImtleXVwIiwidGhpcyIsInZhbCIsImxlbmd0aCIsInJlbW92ZUNsYXNzIiwid29ya1Byb2NjZXNzQnV0dG9uT3BlbiIsImNvbnRhaW5zIiwiYWRkIiwiYmFua3NCdXR0b25PcGVuIiwiYmFua3NCdXR0b25DbG9zZSIsImNsb3NlQnV0dG9uIiwic2V0VGltZW91dCIsImNsb3NlQnV0dG9uRGVsYXkiLCJ2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyIiwidmVydGljYWxCaWdDb250YWluZXIiLCJiYXNpY01lbnVDb250YWluZXIiLCJpbml0QWJvdXRTd2lwZXIiLCJhYm91dEJ1dHRvbkNsb3NlIiwiY2xvc2VCdXR0b25BYm91dCIsImNsb3NlQnV0dG9uQWJvdXREZWxheSIsInJlbW92ZSIsIndvcmtQcm9jY2Vzc0J1dHRvbkNsb3NlIiwiY2xvc2VCdXR0b25Qcm9jZXNzIiwiY2xvc2VCdXR0b25Qcm9jZXNzRGVsYXkiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJyZW5kZXJCdWxsZXQiLCJpbmRleCIsImNsYXNzTmFtZSIsImNvbmNhdCIsIm1lbnVDb21wYW55IiwibG9vcCIsImVmZmVjdCIsInNwZWVkIiwibWVudSIsIkhlYWRlcnNBcnJheSIsImVsZW1lbnQiLCJIZWFkZXJWYWx1ZSIsImdldEF0dHJpYnV0ZSIsInB1c2giLCJjb21wYW55UGFnZXNBcnJheSIsInN3aXBlckdyZWV0Iiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsIndhdGNoVmlzaWJpbGl0eSIsImRpc2FibGVPbkludGVyYWN0aW9uIiwic3dpcGVyQmFua3MiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwic2xpZGVzUGVyVmlldyIsIlR4dFR5cGUiLCJ0b1JvdGF0ZSIsInBlcmlvZCIsImxvb3BOdW0iLCJwYXJzZUludCIsInR4dCIsInRpY2siLCJpc0RlbGV0aW5nIiwicHJvdG90eXBlIiwiaSIsImZ1bGxUeHQiLCJzdWJzdHJpbmciLCJpbm5lckhUTUwiLCJ0aGF0IiwiZGVsdGEiLCJNYXRoIiwicmFuZG9tIiwid2luZG93Iiwib25sb2FkIiwiZWxlbWVudHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiSlNPTiIsInBhcnNlIiwiY3NzIiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIkFPUyIsImluaXQiLCJzdGFydEV2ZW50Iiwic2xpZGVyIiwicmFuZ2UiLCJhbmltYXRlIiwibWluIiwibWF4Iiwic3RlcCIsInNsaWRlIiwiZXZlbnQiLCJ1aSIsImRlYnRWYWx1ZSIsImNoYW5nZSIsInRpbWVWYWx1ZSJdLCJtYXBwaW5ncyI6ImFBQUEsU0FBQUEsaUJBQUFDLEdBQ0EsT0FBQUEsRUFBQUMsV0FBQUMsUUFBQSx3QkFBQSxLQUdBLElBQUFDLGVBQUFDLFNBQUFDLGlCQUNBLGtDQUVBQyxt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RixFQUFBSSxNQUFBQyxTQUVBTCxFQUFBLGlCQUFBcUYsT0FBQSxDQUNBQyxNQUFBLE1BQ0FDLFNBQUEsRUFDQWpHLE1BQUEsSUFDQWtHLElBQUEsRUFDQUMsSUFBQSxJQUNBQyxLQUFBLElBQ0FDLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUNBQyxFQUFBckksaUJBREFxSSxFQUFBRCxFQUFBdkcsT0FFQVUsRUFBQSxnQkFBQUssSUFBQXlGLE1BR0E5RixFQUFBLGdCQUFBSyxJQUFBTCxFQUFBLGlCQUFBcUYsT0FBQSxTQUFBLFVBQ0FyRixFQUFBLGdCQUFBK0YsT0FBQSxXQUNBL0YsRUFBQSxpQkFBQXFGLE9BQUEsUUFBQXJGLEVBQUFJLE1BQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBudW1iZXJXaXRoQ29tbWFzKHgpIHtcbiAgICByZXR1cm4geC50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLlwiKTtcbn1cblxuY29uc3QgYWxsTmV4dEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgIFwiLmZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1uZXh0XCJcbik7XG5sZXQgZGV0YWlsZWRGb3JtT2JqZWN0ID0ge1xuICAgIHR5cGU6IFwiXCIsXG4gICAgY3JlZGl0OiBcIlwiLFxuICAgIHRpbWU6IFwiXCIsXG4gICAgaW5jb21lOiBcIlwiLFxuICAgIGludmVzdDogXCJcIixcbiAgICB1c2VyTmFtZTogXCJcIixcbiAgICB1c2VyUGhvbmU6IFwiXCIsXG59O1xuYWxsTmV4dEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBidXR0b25JZCA9IGJ1dHRvbi5pZDtcbiAgICAgICAgYnV0dG9uSWQgPSBidXR0b25JZC5yZXBsYWNlKFwiQnV0dG9uXCIsIFwiXCIpO1xuICAgICAgICBsZXQgcGFyZW50SWQgPSBidXR0b24ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbiAgICAgICAgY29uc3QgdHlwZXNJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbbmFtZT0nYXV0b1NlbGVjdCddXCIpO1xuICAgICAgICB0eXBlc0lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tlZE9wdGlvbiA9IGlucHV0LmlkO1xuICAgICAgICAgICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC50eXBlID0gY2hlY2tlZE9wdGlvbi50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY3JlZGl0U3VtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWJ0SW5wdXRcIikudmFsdWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGNyZWRpdFN1bSk7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC5jcmVkaXQgPSBjcmVkaXRTdW0udG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgY3JlZGl0VGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZUlucHV0XCIpLnZhbHVlO1xuICAgICAgICBkZXRhaWxlZEZvcm1PYmplY3QudGltZSA9IGNyZWRpdFRpbWUudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgdXNlckluY29tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5jb21lSW5wdXRcIikudmFsdWU7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC5pbmNvbWUgPSB1c2VySW5jb21lLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGNyZWRpdEludmVzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW52ZXN0SW5wdXRcIikudmFsdWU7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC5pbnZlc3QgPSBjcmVkaXRJbnZlc3QudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc29sZS5sb2coZGV0YWlsZWRGb3JtT2JqZWN0KTtcbiAgICB9KTtcbn0pO1xuY29uc3QgYWxsUHJldkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgIFwiLmZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1wcmV2XCJcbik7XG5hbGxQcmV2QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGJ1dHRvbklkID0gYnV0dG9uLmlkO1xuICAgICAgICBidXR0b25JZCA9IGJ1dHRvbklkLnJlcGxhY2UoXCJCdXR0b25cIiwgXCJcIik7XG4gICAgICAgIGxldCBwYXJlbnRJZCA9IGJ1dHRvbi5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IGRldGFpbGVkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXRhaWxlZEZvcm1cIik7XG5kZXRhaWxlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3RTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpcnN0U2NyZWVuXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWNvbmRTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY29uZFNjcmVlblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xufSk7XG5cbmNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJOYW1lXCIpO1xuY29uc3QgdXNlclBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJQaG9uZVwiKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5hZGRDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbiAgICAkKFwiI3VzZXJOYW1lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyUGhvbmVcIikudmFsKCkubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoXCIjdXNlclBob25lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyTmFtZVwiKS52YWwoKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgJChcIi5zdWJtaXQtYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwiZm9ybS1uYXZpZ2F0aW9uX19idXR0b24tLWRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcbmNvbnN0IHdvcmtQcm9jY2Vzc0J1dHRvbk9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICBcIndvcmtQcm9jY2Vzc0J1dHRvbk9wZW5cIlxuKTtcbndvcmtQcm9jY2Vzc0J1dHRvbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoIXdvcmtQcm9jY2Vzc0J1dHRvbk9wZW4uY2xhc3NMaXN0LmNvbnRhaW5zKFwic21hbGxIb3Jpem9udGFsRXhwYW5kZWRcIikpXG4gICAgICAgIHdvcmtQcm9jY2Vzc0J1dHRvbk9wZW4uY2xhc3NMaXN0LmFkZChcInNtYWxsSG9yaXpvbnRhbEV4cGFuZGVkXCIpO1xufSk7XG5jb25zdCBiYW5rc0J1dHRvbk9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtzQnV0dG9uT3BlblwiKTtcbmJhbmtzQnV0dG9uT3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmICghYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbkV4cGFuZEJpZ1wiKSlcbiAgICAgICAgYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJidXR0b25FeHBhbmRCaWdcIik7XG59KTtcbmNvbnN0IGJhbmtzQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtzQnV0dG9uQ2xvc2VcIik7XG5iYW5rc0J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUJ1dHRvbik7XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uKCkge1xuICAgIHNldFRpbWVvdXQoY2xvc2VCdXR0b25EZWxheSwgMTAwKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VCdXR0b25EZWxheSgpIHtcbiAgICBiYW5rc0J1dHRvbk9wZW4uY2xhc3NMaXN0LnRvZ2dsZShcImJ1dHRvbkV4cGFuZEJpZ1wiKTtcbn1cblxuY29uc3QgdmVydGljYWxTbWFsbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgIFwidmVydGljYWxTbWFsbENvbnRhaW5lclwiXG4pO1xuY29uc3QgdmVydGljYWxCaWdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZlcnRpY2FsQmlnQ29udGFpbmVyXCIpO1xuY29uc3QgYmFzaWNNZW51Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXNpY01lbnVDb250YWluZXJcIik7XG52ZXJ0aWNhbFNtYWxsQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKCF2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRhaW5lclNtYWxsRXhwYW5kXCIpKSB7XG4gICAgICAgIHZlcnRpY2FsU21hbGxDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5lclNtYWxsRXhwYW5kXCIpO1xuICAgICAgICBiYXNpY01lbnVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1lbnVUcmFuc2Zvcm1lZFwiKTtcbiAgICAgICAgaW5pdEFib3V0U3dpcGVyKCk7XG4gICAgfVxufSk7XG5jb25zdCBhYm91dEJ1dHRvbkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhYm91dEJ1dHRvbkNsb3NlXCIpO1xuYWJvdXRCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VCdXR0b25BYm91dCk7XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uQWJvdXQoKSB7XG4gICAgc2V0VGltZW91dChjbG9zZUJ1dHRvbkFib3V0RGVsYXksIDEwMCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uQWJvdXREZWxheSgpIHtcbiAgICB2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWluZXJTbWFsbEV4cGFuZFwiKTtcbiAgICBiYXNpY01lbnVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIm1lbnVUcmFuc2Zvcm1lZFwiKTtcbn1cbmNvbnN0IHdvcmtQcm9jY2Vzc0J1dHRvbkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgXCJ3b3JrUHJvY2Nlc3NCdXR0b25DbG9zZVwiXG4pO1xud29ya1Byb2NjZXNzQnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uUHJvY2Vzcyk7XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uUHJvY2VzcygpIHtcbiAgICBzZXRUaW1lb3V0KGNsb3NlQnV0dG9uUHJvY2Vzc0RlbGF5LCAxMDApO1xufVxuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvblByb2Nlc3NEZWxheSgpIHtcbiAgICB3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbn1cblxuZnVuY3Rpb24gaW5pdEFib3V0U3dpcGVyKCkge1xuICAgIGxldCBzd2lwZXJBYm91dCA9IG5ldyBTd2lwZXIoXCIjYWJvdXRTd2lwZXJcIiwge1xuICAgICAgICAvLyBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIC8vICAgICBuZXh0RWw6IFwiLmJ1dHRvbi1hYm91dC0tbmV4dFwiLFxuICAgICAgICAvLyAgICAgcHJldkVsOiBcIi5idXR0b24tYWJvdXQtLXByZXZcIixcbiAgICAgICAgLy8gfSxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgZWw6IFwiLmFib3V0LXBhZ2luYXRpb25cIixcbiAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24oaW5kZXgsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIGxldCByZWFkeUVsZW1lbnQgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCIke2NsYXNzTmFtZX0gYnVsbGV0LXNwZWNpYWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID1cImJ1bGxldC1oZWFkZXJcIj4ke21lbnVDb21wYW55W2luZGV4XX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCJcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZHlFbGVtZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgZWZmZWN0OiBcImN1YmVcIixcbiAgICAgICAgc3BlZWQ6IDgwMCxcbiAgICB9KTtcbn0iLCIvLyAvLyBoZWFkZXItc3dpcGVyXG5sZXQgbWVudSA9IFtdO1xubGV0IEhlYWRlcnNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXR0ZW50aW9uLWNvbnRhaW5lcl9faGVhZGVyXCIpO1xuSGVhZGVyc0FycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgSGVhZGVyVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5mb1wiKTtcbiAgICBtZW51LnB1c2goSGVhZGVyVmFsdWUpO1xufSk7XG5sZXQgbWVudUNvbXBhbnkgPSBbXTtcbmxldCBjb21wYW55UGFnZXNBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWJvdXQtaW5mb1wiKTtcbmNvbXBhbnlQYWdlc0FycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgSGVhZGVyVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5mb1wiKTtcbiAgICBtZW51Q29tcGFueS5wdXNoKEhlYWRlclZhbHVlKTtcbn0pO1xubGV0IHN3aXBlckdyZWV0ID0gbmV3IFN3aXBlcihcIiNncmVldGluZ1N3aXBwZXJcIiwge1xuICAgIC8vIG5hdmlnYXRpb246IHtcbiAgICAvLyAgICAgbmV4dEVsOiBcIi5ncmVldGluZy1uZXh0XCIsXG4gICAgLy8gICAgIHByZXZFbDogXCIuZ3JlZXRpbmctcHJldlwiLFxuICAgIC8vIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXJCdWxsZXQ6IGZ1bmN0aW9uKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGxldCByZWFkeUVsZW1lbnQgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCIke2NsYXNzTmFtZX0gYnVsbGV0LXNwZWNpYWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID1cImJ1bGxldC1oZWFkZXJcIj4ke21lbnVbaW5kZXhdfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIlwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWR5RWxlbWVudDtcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGxvb3A6IHRydWUsXG4gICAgZWZmZWN0OiBcImZhZGVcIixcbiAgICBzcGVlZDogODAwLFxuICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgd2F0Y2hWaXNpYmlsaXR5OiB0cnVlLFxuICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiB0cnVlLFxufSk7XG5sZXQgc3dpcGVyQmFua3MgPSBuZXcgU3dpcGVyKFwiI2JhbmtzU3dpcGVyXCIsIHtcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogXCIuYnV0dG9uLWJhbmstLW5leHRcIixcbiAgICAgICAgcHJldkVsOiBcIi5idXR0b24tYmFuay0tcHJldlwiLFxuICAgIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuYmFua3MtcGFnaW5hdGlvblwiLFxuICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgfSxcbiAgICBsb29wOiB0cnVlLFxuICAgIGVmZmVjdDogXCJjYXJkc1wiLFxuICAgIHNwZWVkOiA4MDAsXG4gICAgc2xpZGVzUGVyVmlldzogNixcbn0pO1xuXG5cbnZhciBUeHRUeXBlID0gZnVuY3Rpb24oZWwsIHRvUm90YXRlLCBwZXJpb2QpIHtcbiAgICB0aGlzLnRvUm90YXRlID0gdG9Sb3RhdGU7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMubG9vcE51bSA9IDA7XG4gICAgdGhpcy5wZXJpb2QgPSBwYXJzZUludChwZXJpb2QsIDEwKSB8fCAyMDAwO1xuICAgIHRoaXMudHh0ID0gXCJcIjtcbiAgICB0aGlzLnRpY2soKTtcbiAgICB0aGlzLmlzRGVsZXRpbmcgPSBmYWxzZTtcbn07XG5cblR4dFR5cGUucHJvdG90eXBlLnRpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IHRoaXMubG9vcE51bSAlIHRoaXMudG9Sb3RhdGUubGVuZ3RoO1xuICAgIHZhciBmdWxsVHh0ID0gdGhpcy50b1JvdGF0ZVtpXTtcblxuICAgIGlmICh0aGlzLmlzRGVsZXRpbmcpIHtcbiAgICAgICAgdGhpcy50eHQgPSBmdWxsVHh0LnN1YnN0cmluZygwLCB0aGlzLnR4dC5sZW5ndGggLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnR4dCA9IGZ1bGxUeHQuc3Vic3RyaW5nKDAsIHRoaXMudHh0Lmxlbmd0aCArIDEpO1xuICAgIH1cblxuICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwid3JhcFwiPicgKyB0aGlzLnR4dCArIFwiPC9zcGFuPlwiO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHZhciBkZWx0YSA9IDIwMCAtIE1hdGgucmFuZG9tKCkgKiAxMDA7XG5cbiAgICBpZiAodGhpcy5pc0RlbGV0aW5nKSB7XG4gICAgICAgIGRlbHRhIC89IDI7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzRGVsZXRpbmcgJiYgdGhpcy50eHQgPT09IGZ1bGxUeHQpIHtcbiAgICAgICAgZGVsdGEgPSB0aGlzLnBlcmlvZDtcbiAgICAgICAgdGhpcy5pc0RlbGV0aW5nID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNEZWxldGluZyAmJiB0aGlzLnR4dCA9PT0gXCJcIikge1xuICAgICAgICB0aGlzLmlzRGVsZXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb29wTnVtKys7XG4gICAgICAgIGRlbHRhID0gNTAwO1xuICAgIH1cblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQudGljaygpO1xuICAgIH0sIGRlbHRhKTtcbn07XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidHlwZXdyaXRlXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRvUm90YXRlID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuICAgICAgICB2YXIgcGVyaW9kID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YS1wZXJpb2RcIik7XG4gICAgICAgIGlmICh0b1JvdGF0ZSkge1xuICAgICAgICAgICAgbmV3IFR4dFR5cGUoZWxlbWVudHNbaV0sIEpTT04ucGFyc2UodG9Sb3RhdGUpLCBwZXJpb2QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElOSkVDVCBDU1NcbiAgICB2YXIgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgIGNzcy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICAgIGNzcy5pbm5lckhUTUwgPSBcIi50eXBld3JpdGUgPiAud3JhcCB7IGJvcmRlci1yaWdodDogMC4wOGVtIHNvbGlkICNmZmZ9XCI7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjc3MpO1xufTtcblxuQU9TLmluaXQoe1xuICAgIHN0YXJ0RXZlbnQ6IFwiRE9NQ29udGVudExvYWRlZFwiLFxufSk7XG5cbi8vIFNsaWRlciBTZWN0aW9uXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA1MDAwMDAsXG4gICAgICAgIG1pbjogMTAwMDAwLFxuICAgICAgICBtYXg6IDQzNTAwMDAsXG4gICAgICAgIHN0ZXA6IDEwMDAsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcbiAgICAgICAgICAgICQoXCIjZGVidElucHV0XCIpLnZhbChkZWJ0VmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjZGVidElucHV0XCIpLnZhbCgkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgICQoXCIjZGVidElucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIiNzbGlkZXJEZWJ0XCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIH0pO1xuICAgICQoXCIjc2xpZGVyVGltZVwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDMsXG4gICAgICAgIG1pbjogMSxcbiAgICAgICAgbWF4OiA4LFxuICAgICAgICBzdGVwOiAxLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgdGltZVZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRpbWVWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LRgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INC70LXRgmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKFwiI3RpbWVJbnB1dFwiKS52YWwodGltZVZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI3RpbWVJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIpKTtcbiAgICBsZXQgdGltZVZhbHVlID0gJChcIiN0aW1lSW5wdXRcIikudmFsKCk7XG4gICAgY29uc29sZS5sb2codGltZVZhbHVlKTtcbiAgICBzd2l0Y2ggKHRpbWVWYWx1ZSkge1xuICAgICAgICBkZWZhdWx0OiB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INCz0L7QtNCwYDtcbiAgICB9XG4gICAgJChcIiN0aW1lSW5wdXRcIikudmFsKHRpbWVWYWx1ZSk7XG4gICAgJChcIiN0aW1lSW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlclRpbWVcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXJJbmNvbWVcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAzMDAwMCxcbiAgICAgICAgbWluOiAxMDAwMCxcbiAgICAgICAgbWF4OiA1MDAwMDAsXG4gICAgICAgIHN0ZXA6IDUwMDAsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcbiAgICAgICAgICAgICQoXCIjaW5jb21lSW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgJChcIiNpbmNvbWVJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJJbmNvbWVcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgICQoXCIjaW5jb21lSW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlckluY29tZVwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCAkKHRoaXMpLnZhbCgpKTtcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlckludmVzdFwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDEwMDAwMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDQwMDAwMCxcbiAgICAgICAgc3RlcDogMTAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNpbnZlc3RJbnB1dFwiKS52YWwoZGVidFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI2ludmVzdElucHV0XCIpLnZhbCgkKFwiI3NsaWRlckludmVzdFwiKS5zbGlkZXIoXCJvcHRpb25cIiwgXCJ2YWx1ZVwiKSk7XG4gICAgJChcIiNpbnZlc3RJbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjc2xpZGVySW52ZXN0XCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIH0pO1xufSk7Il19
