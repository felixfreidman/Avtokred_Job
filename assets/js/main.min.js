"use strict";function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var allUncertainSlides=document.querySelectorAll(".uncertain-form__slide"),allUncertainSlidesHeaders=document.querySelectorAll(".slide__header--uncertain"),allDataHeader=[];allUncertainSlidesHeaders.forEach(function(e){e=e.getAttribute("data-slide-header-uncertain");allDataHeader.push(e)});var uncertainFormNavigation=document.getElementById("uncertainNavigation"),listItemUncertainCounter=1;function checkWhatSlideIsShowedInUncertainForm(){allUncertainSlides.forEach(function(e){var t=e.getAttribute("id");t.includes("First")&&e.classList.contains("slide--show")?(document.getElementById("UncertainFirstSlideItem").classList.contains("list-navigation__bullet--active")||document.getElementById("UncertainFirstSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--disabled")||document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--disabled"),document.getElementById("UncertainThirdSlideItem").classList.contains("list-navigation__bullet--disabled")||document.getElementById("UncertainThirdSlideItem").classList.toggle("list-navigation__bullet--disabled")):t.includes("Second")&&e.classList.contains("slide--show")?(document.getElementById("UncertainFirstSlideItem").classList.contains("list-navigation__bullet--completed")||document.getElementById("UncertainFirstSlideItem").classList.toggle("list-navigation__bullet--completed"),document.getElementById("UncertainFirstSlideItem").classList.contains("list-navigation__bullet--active")&&document.getElementById("UncertainFirstSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--disabled")&&document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--disabled"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--active")||document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("uncertainStatusBar").classList.contains("progress-navigation-bar--33p")||(document.getElementById("uncertainStatusBar").classList.remove("progress-navigation-bar--0p"),document.getElementById("uncertainStatusBar").classList.add("progress-navigation-bar--33p"))):t.includes("Third")&&e.classList.contains("slide--show")&&(document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--completed")||document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--completed"),document.getElementById("UncertainSecondSlideItem").classList.contains("list-navigation__bullet--active")&&document.getElementById("UncertainSecondSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("UncertainThirdSlideItem").classList.contains("list-navigation__bullet--disabled")&&document.getElementById("UncertainThirdSlideItem").classList.toggle("list-navigation__bullet--disabled"),document.getElementById("UncertainThirdSlideItem").classList.contains("list-navigation__bullet--active")||document.getElementById("UncertainThirdSlideItem").classList.toggle("list-navigation__bullet--active"),document.getElementById("uncertainStatusBar").classList.contains("progress-navigation-bar--33p")&&(document.getElementById("uncertainStatusBar").classList.remove("progress-navigation-bar--33p"),document.getElementById("uncertainStatusBar").classList.add("progress-navigation-bar--95p")))})}allDataHeader.forEach(function(e){var t=document.createElement("li");t.classList.add("list-navigation__bullet");var n=document.createElement("span");n.classList.add("bullet-title"),n.textContent=e,t.append(n);var i="";switch(listItemUncertainCounter){case 1:i="First";break;case 2:i="Second";break;case 3:i="Third";break;case 4:i="Fourth";break;case 5:i="Fifth"}t.id="Uncertain".concat(i,"SlideItem"),listItemUncertainCounter++,uncertainFormNavigation.append(t)});var allNextUncertainBtns=document.querySelectorAll(".btn-uncertain--next");allNextUncertainBtns.forEach(function(i){i.addEventListener("click",function(){var e=i.getAttribute("id"),t="";switch(e=e.replace("Next","")){case"SecondSlide":t="FirstSlide";break;case"ThirdSlide":t="SecondSlide"}var n=document.getElementById(t),e=document.getElementById(e);n.classList.toggle("slide--show"),n.classList.toggle("slide--hidden"),e.classList.toggle("slide--show"),e.classList.toggle("slide--hidden"),checkWhatSlideIsShowedInUncertainForm()})});var allPreviousUncertainBtns=document.querySelectorAll(".btn-uncertain--previous");allPreviousUncertainBtns.forEach(function(i){i.addEventListener("click",function(){var e=i.getAttribute("id"),t="";switch(e=e.replace("Previous","")){case"FirstSlide":t="SecondSlide";break;case"SecondSlide":t="ThirdSlide"}var n=document.getElementById(t),e=document.getElementById(e);n.classList.toggle("slide--show"),n.classList.toggle("slide--hidden"),e.classList.toggle("slide--show"),e.classList.toggle("slide--hidden")})}),checkWhatSlideIsShowedInUncertainForm();var userNameInput=document.getElementById("userName"),userPhoneInput=document.getElementById("userPhone");$(document).ready(function(){$(".submit-button").addClass("submit-button--disabled"),$("#userName").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userPhone").val().length&&$(".submit-button").removeClass("submit-button--disabled")}),$("#userPhone").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userName").val().length&&$(".submit-button").removeClass("submit-button--disabled")})}),$("#userPhone").inputmask();var menu=[],HeadersArray=document.querySelectorAll(".attention-container__header");HeadersArray.forEach(function(e){e=e.getAttribute("data-info");menu.push(e)});var swiperGreet=new Swiper("#greetingSwipper",{pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menu[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"fade",speed:800,watchSlidesProgress:!0,watchVisibility:!0,disableOnInteraction:!0}),swiperBanks=new Swiper("#banksSwiper",{loop:!0,effect:"cards",speed:800,slidesPerView:4,autoplay:{delay:1},spaceBetween:50,disableOnInteraction:!1,breakpoints:{920:{slidesPerView:4},600:{slidesPerView:3},450:{slidesPerView:2}}});$(document).ready(function(){$("#sliderDebt").slider({range:"min",animate:!0,value:5e5,min:1e5,max:435e4,step:1e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#debtInput").val(t)}}),$("#sliderTime").slider({range:"min",animate:!0,value:5e5,min:35e3,max:5e6,step:2e5}),$("#sliderDeposit").slider({range:"min",animate:!0,value:1e5,min:0,max:4e5,step:1e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#debtInput").val(t);t=.00325;sum=price*t*(Math.pow(1+t,srok)/(Math.pow(1+t,srok)-1))}}),$("#debtInput").val($("#sliderDebt").slider("option","value")),$("#debtInput").change(function(){$("#sliderDebt").slider("value",$(this).val())}),$("#sliderTime").slider({range:"min",animate:!0,value:3,min:1,max:8,step:1,slide:function(e,t){var n=t.value;switch(n){case 1:n="".concat(n," год");break;case 2:case 3:case 4:n="".concat(n," года");break;default:n="".concat(n," лет")}$("#timeInput").val(n)}}),$("#timeInput").val($("#sliderTime").slider("option","value"));var e=$("#timeInput").val(),e="".concat(e," года");$("#timeInput").val(e),$("#timeInput").change(function(){$("#sliderTime").slider("value",$(this).val())}),$("#sliderIncome").slider({range:"min",animate:!0,value:3e4,min:1e4,max:5e5,step:5e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#incomeInput").val(t)}}),$("#incomeInput").val($("#sliderIncome").slider("option","value")),$("#incomeInput").change(function(){$("#sliderIncome").slider("value",$(this).val())}),$("#sliderInvest").slider({range:"min",animate:!0,value:1e5,min:0,max:4e5,step:1e3,slide:function(e,t){t=numberWithCommas(t=t.value);$("#investInput").val(t)}}),$("#investInput").val($("#sliderInvest").slider("option","value")),$("#investInput").change(function(){$("#sliderInvest").slider("value",$(this).val())})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyIsImNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsibnVtYmVyV2l0aENvbW1hcyIsIngiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJhbGxVbmNlcnRhaW5TbGlkZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhbGxVbmNlcnRhaW5TbGlkZXNIZWFkZXJzIiwiYWxsRGF0YUhlYWRlciIsImZvckVhY2giLCJoZWFkZXIiLCJzbGlkZUhlYWRlciIsImdldEF0dHJpYnV0ZSIsInB1c2giLCJ1bmNlcnRhaW5Gb3JtTmF2aWdhdGlvbiIsImdldEVsZW1lbnRCeUlkIiwibGlzdEl0ZW1VbmNlcnRhaW5Db3VudGVyIiwiY2hlY2tXaGF0U2xpZGVJc1Nob3dlZEluVW5jZXJ0YWluRm9ybSIsInNsaWRlIiwic2xpZGVJRCIsImluY2x1ZGVzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ0b2dnbGUiLCJyZW1vdmUiLCJhZGQiLCJuZXdMaXN0SXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJuZXdMaXN0SXRlbUhlYWRlciIsInRleHRDb250ZW50IiwiYXBwZW5kIiwibGV0dGVyZWRDb3VudGVyIiwiaWQiLCJjb25jYXQiLCJhbGxOZXh0VW5jZXJ0YWluQnRucyIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZXh0U2xpZGVJRCIsInNsaWRlQWN0aXZlIiwic2xpZGVOZXh0IiwiYWxsUHJldmlvdXNVbmNlcnRhaW5CdG5zIiwidXNlck5hbWVJbnB1dCIsInVzZXJQaG9uZUlucHV0IiwiJCIsInJlYWR5IiwiYWRkQ2xhc3MiLCJrZXl1cCIsImNvbnNvbGUiLCJsb2ciLCJ0aGlzIiwidmFsIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJpbnB1dG1hc2siLCJtZW51IiwiSGVhZGVyc0FycmF5IiwiZWxlbWVudCIsIkhlYWRlclZhbHVlIiwic3dpcGVyR3JlZXQiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJyZW5kZXJCdWxsZXQiLCJpbmRleCIsImNsYXNzTmFtZSIsImxvb3AiLCJlZmZlY3QiLCJzcGVlZCIsIndhdGNoU2xpZGVzUHJvZ3Jlc3MiLCJ3YXRjaFZpc2liaWxpdHkiLCJkaXNhYmxlT25JbnRlcmFjdGlvbiIsInN3aXBlckJhbmtzIiwic2xpZGVzUGVyVmlldyIsImF1dG9wbGF5IiwiZGVsYXkiLCJzcGFjZUJldHdlZW4iLCJicmVha3BvaW50cyIsIjkyMCIsIjYwMCIsIjQ1MCIsInNsaWRlciIsInJhbmdlIiwiYW5pbWF0ZSIsInZhbHVlIiwibWluIiwibWF4Iiwic3RlcCIsImV2ZW50IiwidWkiLCJkZWJ0VmFsdWUiLCJrIiwic3VtIiwicHJpY2UiLCJNYXRoIiwicG93Iiwic3JvayIsImNoYW5nZSIsInRpbWVWYWx1ZSJdLCJtYXBwaW5ncyI6ImFBTUEsU0FBQUEsaUJBQUFDLEdBQ0EsT0FBQUEsRUFBQUMsV0FBQUMsUUFBQSx3QkFBQSxLQXdRQSxJQUFBQyxtQkFBQUMsU0FBQUMsaUJBQUEsMEJBQ0FDLDBCQUFBRixTQUFBQyxpQkFDQSw2QkFFQUUsY0FBQSxHQUVBRCwwQkFBQUUsUUFBQSxTQUFBQyxHQUNBQyxFQUFBRCxFQUFBRSxhQUFBLCtCQUNBSixjQUFBSyxLQUFBRixLQUdBLElBQUFHLHdCQUFBVCxTQUFBVSxlQUFBLHVCQUNBQyx5QkFBQSxFQWlDQSxTQUFBQyx3Q0FDQWIsbUJBQUFLLFFBQUEsU0FBQVMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBTixhQUFBLE1BQ0FPLEVBQUFDLFNBQUEsVUFBQUYsRUFBQUcsVUFBQUMsU0FBQSxnQkFDQWpCLFNBQ0FVLGVBQUEsMkJBQ0FNLFVBQUFDLFNBQUEsb0NBRUFqQixTQUNBVSxlQUFBLDJCQUNBTSxVQUFBRSxPQUFBLG1DQUVBbEIsU0FDQVUsZUFBQSw0QkFDQU0sVUFBQUMsU0FBQSxzQ0FFQWpCLFNBQ0FVLGVBQUEsNEJBQ0FNLFVBQUFFLE9BQUEscUNBRUFsQixTQUNBVSxlQUFBLDJCQUNBTSxVQUFBQyxTQUFBLHNDQUVBakIsU0FDQVUsZUFBQSwy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LE1BQUEsU0FBQXNFLEVBQUFDLEdBRUFDLEVBQUExRixpQkFEQTBGLEVBQUFELEVBQUFMLE9BRUF6QyxFQUFBLGdCQUFBTyxJQUFBd0MsTUFHQS9DLEVBQUEsZ0JBQUFPLElBQUFQLEVBQUEsaUJBQUFzQyxPQUFBLFNBQUEsVUFDQXRDLEVBQUEsZ0JBQUFzRCxPQUFBLFdBQ0F0RCxFQUFBLGlCQUFBc0MsT0FBQSxRQUFBdEMsRUFBQU0sTUFBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIC8qXG4vLyBAYXV0aG9yOiBmZWxpeGZyZWlkbWFuXG4vLyBAbWFpbDogZmVsaXhmcmVpZG1hbmRldkBnbWFpbC5jb21cbi8vIEBub3RlOiDQuNGJ0YMg0YDQsNCx0L7RgtGDXG4vLyAqL1xuLy8gLy8g0JLRgNC10LzQtdC90L3QvtC1INGA0LXRiNC10L3QuNC1INC00LXQu9C10L3QuNGPINC90LAg0YDQsNC30YDRj9C00YssINC/0L7RgtC+0Lwg0LzQsNGB0LrQsCDQsdGD0LTQtdGCINGA0LDQsdC+0YLQsNGC0YxcbmZ1bmN0aW9uIG51bWJlcldpdGhDb21tYXMoeCkge1xuICAgIHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIuXCIpO1xufVxuLy8gLy8g0KDQsNCx0L7RgtCwINC80LXQvdGOINC4INGB0L7Qt9C00LDQvdC40Y8g0L7QsdGK0LXQutGC0LAg0LTQu9GPINCx0YPQtNGD0YnQtdC5INC/0LXRgNC10LTQsNGH0LgsXG4vLyAvLyDQt9Cw0YLQtdC8INGD0LbQtSDRgtGA0LDQvdC/0LjQu9GP0YbQuNGPINC90LAg0LLQsNC20L3Ri9C1INC00LDQvdC90YvQtVxuLy8gY29uc3QgYWxsTmV4dEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuLy8gICAgIFwiLmZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1uZXh0XCJcbi8vICk7XG4vLyBhbGxOZXh0QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbi8vICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICAgICAgbGV0IGJ1dHRvbklkID0gYnV0dG9uLmlkO1xuLy8gICAgICAgICBidXR0b25JZCA9IGJ1dHRvbklkLnJlcGxhY2UoXCJCdXR0b25cIiwgXCJcIik7XG4vLyAgICAgICAgIGxldCBwYXJlbnRJZCA9IGJ1dHRvbi5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG4vLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4vLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuLy8gICAgICAgICBjb25zdCB0eXBlc0lucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFtuYW1lPSdhdXRvU2VsZWN0J11cIik7XG4vLyAgICAgICAgIHR5cGVzSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4vLyAgICAgICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuLy8gICAgICAgICAgICAgICAgIGxldCBjaGVja2VkT3B0aW9uID0gaW5wdXQuaWQ7XG4vLyAgICAgICAgICAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LnR5cGUgPSBjaGVja2VkT3B0aW9uLnRvU3RyaW5nKCk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0pO1xuLy8gICAgICAgICBjb25zdCBjcmVkaXRTdW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnRJbnB1dFwiKS52YWx1ZTtcbi8vICAgICAgICAgY29uc29sZS5sb2coY3JlZGl0U3VtKTtcbi8vICAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LmNyZWRpdCA9IGNyZWRpdFN1bS50b1N0cmluZygpO1xuLy8gICAgICAgICBjb25zdCBjcmVkaXRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lSW5wdXRcIikudmFsdWU7XG4vLyAgICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC50aW1lID0gY3JlZGl0VGltZS50b1N0cmluZygpO1xuLy8gICAgICAgICAvLyBjb25zdCB1c2VySW5jb21lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmNvbWVJbnB1dFwiKS52YWx1ZTtcbi8vICAgICAgICAgLy8gZGV0YWlsZWRGb3JtT2JqZWN0LmluY29tZSA9IHVzZXJJbmNvbWUudG9TdHJpbmcoKTtcbi8vICAgICAgICAgY29uc3QgY3JlZGl0SW52ZXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnZlc3RJbnB1dFwiKS52YWx1ZTtcbi8vICAgICAgICAgZGV0YWlsZWRGb3JtT2JqZWN0LmludmVzdCA9IGNyZWRpdEludmVzdC50b1N0cmluZygpO1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxlZEZvcm1PYmplY3QpO1xuLy8gICAgIH0pO1xuLy8gfSk7XG4vLyBjb25zdCBhbGxQcmV2QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4vLyAgICAgXCIuZm9ybS1uYXZpZ2F0aW9uX19idXR0b24tLXByZXZcIlxuLy8gKTtcbi8vIGFsbFByZXZCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuLy8gICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgICAgICBsZXQgYnV0dG9uSWQgPSBidXR0b24uaWQ7XG4vLyAgICAgICAgIGJ1dHRvbklkID0gYnV0dG9uSWQucmVwbGFjZShcIkJ1dHRvblwiLCBcIlwiKTtcbi8vICAgICAgICAgbGV0IHBhcmVudElkID0gYnV0dG9uLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4vLyAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuLy8gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbi8vICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4vLyAgICAgfSk7XG4vLyB9KTtcbi8vIGNvbnN0IGRldGFpbGVkRm9ybU9iamVjdCA9IHtcbi8vICAgICB0eXBlOiBcIlwiLFxuLy8gICAgIGNyZWRpdDogXCJcIixcbi8vICAgICB0aW1lOiBcIlwiLFxuLy8gICAgIC8vIGluY29tZTogXCJcIixcbi8vICAgICBpbnZlc3Q6IFwiXCIsXG4vLyAgICAgdXNlck5hbWU6IFwiXCIsXG4vLyAgICAgdXNlclBob25lOiBcIlwiLFxuLy8gfTtcbi8vIC8vINCS0LDRgNC40LDRhtC40Y8g0YTQvtGA0LzRiyDQtNC70Y8g0L3QtdC+0L/RgNC10LTQu9C10L3QvdC+0LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbi8vIGNvbnN0IGRldGFpbGVkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXRhaWxlZEZvcm1cIik7XG4vLyBkZXRhaWxlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3RTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbi8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpcnN0U2NyZWVuXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4vLyAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWNvbmRTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbi8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY29uZFNjcmVlblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuLy8gfSk7XG4vLyAvLyDQktC10YDQuNGE0LjQutCw0YbQuNGPINC30LDQv9C+0LvQvdC10L3QuNGPINC00LDQvdC90YvRhSDQsiDRhNC+0YDQvNGDXG4vLyBjb25zdCB1c2VyTmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyTmFtZVwiKTtcbi8vIGNvbnN0IHVzZXJQaG9uZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyUGhvbmVcIik7XG4vLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbi8vICAgICAkKFwiLnN1Ym1pdC1idXR0b25cIikuYWRkQ2xhc3MoXCJmb3JtLW5hdmlnYXRpb25fX2J1dHRvbi0tZGlzYWJsZWRcIik7XG4vLyAgICAgJChcIiN1c2VyTmFtZVwiKS5rZXl1cChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4vLyAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPSAwICYmICQoXCIjdXNlclBob25lXCIpLnZhbCgpLmxlbmd0aCAhPSAwKSB7XG4vLyAgICAgICAgICAgICAkKFwiLnN1Ym1pdC1idXR0b25cIikucmVtb3ZlQ2xhc3MoXCJmb3JtLW5hdmlnYXRpb25fX2J1dHRvbi0tZGlzYWJsZWRcIik7XG4vLyAgICAgICAgIH1cbi8vICAgICB9KTtcbi8vICAgICAkKFwiI3VzZXJQaG9uZVwiKS5rZXl1cChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4vLyAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPSAwICYmICQoXCIjdXNlck5hbWVcIikudmFsKCkubGVuZ3RoICE9IDApIHtcbi8vICAgICAgICAgICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuLy8gfSk7XG4vLyAvLyDQkdCe0JvQrNCo0JDQryDQodCV0JrQptCY0K8g0JzQldCd0K4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIC8vINCg0LDQsdC+0YLQsCDRgSDQtNC40L3QsNC80LjQtdGH0LXRgdC60LjQvCDQvNC10L3RjlxuLy8gY29uc3Qgd29ya1Byb2NjZXNzQnV0dG9uT3BlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuLy8gICAgIFwid29ya1Byb2NjZXNzQnV0dG9uT3BlblwiXG4vLyApO1xuLy8gY29uc3Qgd29ya1Byb2NjZXNzQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbi8vICAgICBcIndvcmtQcm9jY2Vzc0J1dHRvbkNsb3NlXCJcbi8vICk7XG4vLyBjb25zdCBxdWVzdGlvbkJ1dHRvbk9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZXN0aW9uQnV0dG9uT3BlblwiKTtcbi8vIGNvbnN0IHF1ZXN0aW9uQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZXN0aW9uQnV0dG9uQ2xvc2VcIik7XG4vLyBjb25zdCBiYW5rc0J1dHRvbk9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtzQnV0dG9uT3BlblwiKTtcbi8vIGNvbnN0IGJhbmtzQnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhbmtzQnV0dG9uQ2xvc2VcIik7XG4vLyBjb25zdCB2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4vLyAgICAgXCJ2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyXCJcbi8vICk7XG4vLyBjb25zdCB2ZXJ0aWNhbEJpZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmVydGljYWxCaWdDb250YWluZXJcIik7XG4vLyBjb25zdCBiYXNpY01lbnVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhc2ljTWVudUNvbnRhaW5lclwiKTtcbi8vIGNvbnN0IGFib3V0QnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFib3V0QnV0dG9uQ2xvc2VcIik7XG4vLyAvLyDQodC10LrRhtC40Y8g0LTQu9GPINC30LDQv9GD0YHQutCwINGB0L7QsdGL0YLQuNC5INC/0L4g0L3QsNC20LDRgtC40Y4g0LrQvdC+0L/QvtC6XG4vLyB3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgaWYgKCF3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmNsYXNzTGlzdC5jb250YWlucyhcInNtYWxsSG9yaXpvbnRhbEV4cGFuZGVkXCIpKVxuLy8gICAgICAgICB3b3JrUHJvY2Nlc3NCdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbi8vIH0pO1xuLy8gcXVlc3Rpb25CdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgaWYgKCFxdWVzdGlvbkJ1dHRvbk9wZW4uY2xhc3NMaXN0LmNvbnRhaW5zKFwic21hbGxIb3Jpem9udGFsRXhwYW5kZWRcIikpIHtcbi8vICAgICAgICAgcXVlc3Rpb25CdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbi8vICAgICAgICAgc2V0VGltZW91dChpbml0UXVlc3Rpb25Td2lwZXIsIDMwMCk7XG4vLyAgICAgfVxuLy8gfSk7XG5cbi8vIGJhbmtzQnV0dG9uT3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGlmICghYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbkV4cGFuZEJpZ1wiKSlcbi8vICAgICAgICAgYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC5hZGQoXCJidXR0b25FeHBhbmRCaWdcIik7XG4vLyB9KTtcbi8vIHZlcnRpY2FsU21hbGxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBpZiAoIXZlcnRpY2FsU21hbGxDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGFpbmVyU21hbGxFeHBhbmRcIikpIHtcbi8vICAgICAgICAgdmVydGljYWxTbWFsbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiY29udGFpbmVyU21hbGxFeHBhbmRcIik7XG4vLyAgICAgICAgIGJhc2ljTWVudUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibWVudVRyYW5zZm9ybWVkXCIpO1xuLy8gICAgICAgICBpbml0QWJvdXRTd2lwZXIoKTtcbi8vICAgICB9XG4vLyB9KTtcblxuLy8gYmFua3NCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VCdXR0b24pO1xuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvbigpIHtcbi8vICAgICBzZXRUaW1lb3V0KGNsb3NlQnV0dG9uRGVsYXksIDEwMCk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGNsb3NlQnV0dG9uRGVsYXkoKSB7XG4vLyAgICAgYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJidXR0b25FeHBhbmRCaWdcIik7XG4vLyB9XG5cbi8vIGFib3V0QnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uQWJvdXQpO1xuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvbkFib3V0KCkge1xuLy8gICAgIHNldFRpbWVvdXQoY2xvc2VCdXR0b25BYm91dERlbGF5LCAxMDApO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvbkFib3V0RGVsYXkoKSB7XG4vLyAgICAgdmVydGljYWxTbWFsbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGFpbmVyU21hbGxFeHBhbmRcIik7XG4vLyAgICAgYmFzaWNNZW51Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51VHJhbnNmb3JtZWRcIik7XG4vLyB9XG5cbi8vIHdvcmtQcm9jY2Vzc0J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUJ1dHRvblByb2Nlc3MpO1xuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvblByb2Nlc3MoKSB7XG4vLyAgICAgc2V0VGltZW91dChjbG9zZUJ1dHRvblByb2Nlc3NEZWxheSwgMTAwKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gY2xvc2VCdXR0b25Qcm9jZXNzRGVsYXkoKSB7XG4vLyAgICAgd29ya1Byb2NjZXNzQnV0dG9uT3Blbi5jbGFzc0xpc3QudG9nZ2xlKFwic21hbGxIb3Jpem9udGFsRXhwYW5kZWRcIik7XG4vLyB9XG5cbi8vIHF1ZXN0aW9uQnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlQnV0dG9uUXVlc3Rpb24pO1xuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvblF1ZXN0aW9uKCkge1xuLy8gICAgIHNldFRpbWVvdXQoY2xvc2VCdXR0b25RdWVzdGlvbkRlbGF5LCAxMDApO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBjbG9zZUJ1dHRvblF1ZXN0aW9uRGVsYXkoKSB7XG4vLyAgICAgcXVlc3Rpb25CdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJzbWFsbEhvcml6b250YWxFeHBhbmRlZFwiKTtcbi8vIH1cbi8vIC8vINCd0LDQtNC+INCx0YPQtNC10YIg0L/QvtGC0L7QvCDQuNC90LjRhtC40YDQvtCy0LDRgtGMINGB0LLQsNC50L/QtdGA0Ytcbi8vIC8vINC/0L4g0LfQsNC/0YPRgdC60YMg0LrQvdC+0L/QutC4LCDRh9GC0L7QsdGLINC+0L3QuCDQvdC+0YDQvNCw0LvRjNC90L4g0LLQtdGA0YHRgtCw0LvQuNGB0Yxcbi8vIGZ1bmN0aW9uIGluaXRBYm91dFN3aXBlcigpIHtcbi8vICAgICBsZXQgc3dpcGVyQWJvdXQgPSBuZXcgU3dpcGVyKFwiI2Fib3V0U3dpcGVyXCIsIHtcbi8vICAgICAgICAgLy8gbmF2aWdhdGlvbjoge1xuLy8gICAgICAgICAvLyAgICAgbmV4dEVsOiBcIi5idXR0b24tYWJvdXQtLW5leHRcIixcbi8vICAgICAgICAgLy8gICAgIHByZXZFbDogXCIuYnV0dG9uLWFib3V0LS1wcmV2XCIsXG4vLyAgICAgICAgIC8vIH0sXG4vLyAgICAgICAgIHBhZ2luYXRpb246IHtcbi8vICAgICAgICAgICAgIGVsOiBcIi5hYm91dC1wYWdpbmF0aW9uXCIsXG4vLyAgICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXG4vLyAgICAgICAgICAgICByZW5kZXJCdWxsZXQ6IGZ1bmN0aW9uKGluZGV4LCBjbGFzc05hbWUpIHtcbi8vICAgICAgICAgICAgICAgICBsZXQgcmVhZHlFbGVtZW50ID0gYFxuLy8gICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwiJHtjbGFzc05hbWV9IGJ1bGxldC1zcGVjaWFsXCI+XG4vLyAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9XCJidWxsZXQtaGVhZGVyXCI+JHttZW51Q29tcGFueVtpbmRleF19PC9kaXY+XG4vLyAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwiXCI+PC9kaXY+XG4vLyAgICAgICAgICAgICA8L2Rpdj5cbi8vICAgICAgICAgICAgIGA7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWR5RWxlbWVudDtcbi8vICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgIH0sXG4vLyAgICAgICAgIGxvb3A6IHRydWUsXG4vLyAgICAgICAgIGVmZmVjdDogXCJjdWJlXCIsXG4vLyAgICAgICAgIHNwZWVkOiA4MDAsXG4vLyAgICAgfSk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGluaXRRdWVzdGlvblN3aXBlcigpIHtcbi8vICAgICBsZXQgc3dpcGVyUXVlc3Rpb24gPSBuZXcgU3dpcGVyKFwiI3F1ZXN0aW9uU3dpcGVyXCIsIHtcbi8vICAgICAgICAgcGFnaW5hdGlvbjoge1xuLy8gICAgICAgICAgICAgZWw6IFwiLnF1ZXN0aW9uLXBhZ2luYXRpb25cIixcbi8vICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbi8vICAgICAgICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24oaW5kZXgpIHtcbi8vICAgICAgICAgICAgICAgICBsZXQgcmVhZHlFbGVtZW50ID0gYFxuLy8gICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwic3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0XCI+XG4vLyAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwicXVlc3Rpb24taW1hZ2VcIj5cbi8vICAgICAgICAgICAgICAgICA8aW1nIHNyYyA9IFwiJHtxdWVzdGlvbkltYWdlc1tpbmRleF19XCIvPlxuLy8gICAgICAgICAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcInF1ZXN0aW9uLWhlYWRlclwiPiR7cXVlc3Rpb25IZWFkZXJzW2luZGV4XX08L2Rpdj5cbi8vICAgICAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICAgICAgYDtcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZHlFbGVtZW50O1xuLy8gICAgICAgICAgICAgfSxcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgbG9vcDogdHJ1ZSxcbi8vICAgICAgICAgZWZmZWN0OiBcImZhZGVcIixcbi8vICAgICAgICAgc3BlZWQ6IDgwMCxcbi8vICAgICAgICAgZGlyZWN0aW9uOiBcInZlcnRpY2FsXCIsXG4vLyAgICAgfSk7XG4vLyB9XG4vLyAvLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDQvtGCINGB0LvQsNC50LTQvtCyINC00LvRjyDRgNC10L3QtNC10YDQsCDQutC90L7Qv9C+0LpcblxuLy8gbGV0IHF1ZXN0aW9uSGVhZGVycyA9IFtdO1xuLy8gbGV0IHF1ZXN0aW9uSGVhZGVyQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnF1ZXN0aW9uLXNsaWRlXCIpO1xuLy8gcXVlc3Rpb25IZWFkZXJBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4vLyAgICAgbGV0IFNsaWRlSW5mb0hlYWRlciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1xdWVzdGlvbi1oZWFkZXJcIik7XG4vLyAgICAgcXVlc3Rpb25IZWFkZXJzLnB1c2goU2xpZGVJbmZvSGVhZGVyKTtcbi8vIH0pO1xuLy8gbGV0IHF1ZXN0aW9uSW1hZ2VzID0gW107XG4vLyBsZXQgcXVlc3Rpb25JbWFnZUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5xdWVzdGlvbi1zbGlkZVwiKTtcbi8vIHF1ZXN0aW9uSW1hZ2VBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4vLyAgICAgbGV0IFNsaWRlSW5mb0ltYWdlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXF1ZXN0aW9uLWltYWdlXCIpO1xuLy8gICAgIHF1ZXN0aW9uSW1hZ2VzLnB1c2goU2xpZGVJbmZvSW1hZ2UpO1xuLy8gfSk7XG5cbi8vIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INCR0J7Qm9Cs0KjQkNCvINCh0JXQmtCm0JjQryDQnNCV0J3QrlxuLy8gLy8g0JzQntCR0JjQm9Cs0J3QntCVINCc0JXQndCuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBjb25zdCBtb2JpbGVIZWFkZXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3dNZW51XCIpO1xuLy8gY29uc3QgbW9iaWxlSGVhZGVyTGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlYWRlckxheWVyXCIpO1xuLy8gbW9iaWxlSGVhZGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVIZWFkZXJNZW51KTtcbi8vIG1vYmlsZUhlYWRlckxheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVIZWFkZXJNZW51KTtcblxuLy8gZnVuY3Rpb24gdG9nZ2xlSGVhZGVyTWVudSgpIHtcbi8vICAgICBtb2JpbGVIZWFkZXJMYXllci5jbGFzc0xpc3QudG9nZ2xlKFwiYnRuLWNsaWNrZWQtLXNob3dcIik7XG4vLyAgICAgbW9iaWxlSGVhZGVyQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoZWFkZXItYnRuLS1jbGlja2VkXCIpO1xuLy8gfVxuLy8gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g0JzQntCR0JjQm9Cs0J3QntCVINCc0JXQndCuXG5cbi8vIC8qXG4vLyBUT0RPOiDQlNC+0LrRg9C80LXQvdGC0LDRhtC40Y8g0Log0LrQvtC00YNcbi8vIFRPRE86INCU0L7Qv9C40YHQsNGC0Ywg0YTQvtGA0LzRgyDQtNC70Y8g0L7Qv9GA0LXQtNC10LvQtdC90L3QvtCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4vLyBUT0RPOiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDRj9C90LTQtdC60YHQsFxuLy8gKi9cblxuLy8gU21vb3RoTGlua3NcblxuLy8gY29uc3QgYWxsU21vb3RoTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNtb290aC1saW5rXCIpO1xuLy8gYWxsU21vb3RoTGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuLy8gICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuLy8gICAgICAgICBsaW5rLnNjcm9sbEludG9WaWV3KHtcbi8vICAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxuLy8gICAgICAgICAgICAgYmxvY2s6IFwiZW5kXCIsXG4vLyAgICAgICAgICAgICBpbmxpbmU6IFwibmVhcmVzdFwiLFxuLy8gICAgICAgICB9KTtcbi8vICAgICB9KTtcbi8vIH0pO1xuXG4vLyDQmtCe0JQg0JTQm9CvINCk0J7QoNCc0Ksg0KEg0J/Qo9Cd0JrQotCe0Jwg0J3QlSDQntCf0KDQldCU0JXQm9CY0JvQmNCh0Kwg0KEg0JLQq9CR0J7QoNCe0JxcbmNvbnN0IGFsbFVuY2VydGFpblNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudW5jZXJ0YWluLWZvcm1fX3NsaWRlXCIpO1xuY29uc3QgYWxsVW5jZXJ0YWluU2xpZGVzSGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgXCIuc2xpZGVfX2hlYWRlci0tdW5jZXJ0YWluXCJcbik7XG5sZXQgYWxsRGF0YUhlYWRlciA9IFtdO1xuLy8g0KHQntCR0JjQoNCQ0JXQnCDQn9Cj0J3QmtCi0Ksg0JTQm9CvINCc0JXQndCuINCd0JDQktCY0JPQkNCm0JjQmFxuYWxsVW5jZXJ0YWluU2xpZGVzSGVhZGVycy5mb3JFYWNoKChoZWFkZXIpID0+IHtcbiAgICBsZXQgc2xpZGVIZWFkZXIgPSBoZWFkZXIuZ2V0QXR0cmlidXRlKFwiZGF0YS1zbGlkZS1oZWFkZXItdW5jZXJ0YWluXCIpO1xuICAgIGFsbERhdGFIZWFkZXIucHVzaChzbGlkZUhlYWRlcik7XG59KTtcblxuY29uc3QgdW5jZXJ0YWluRm9ybU5hdmlnYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVuY2VydGFpbk5hdmlnYXRpb25cIik7XG5sZXQgbGlzdEl0ZW1VbmNlcnRhaW5Db3VudGVyID0gMTtcbi8vINCh0J7Ql9CU0JDQldCcINCf0KPQndCa0KLQqyDQnNCV0J3QriDQndCQ0JLQmNCT0JDQptCY0JhcbmFsbERhdGFIZWFkZXIuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgbGV0IG5ld0xpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgIG5ld0xpc3RJdGVtLmNsYXNzTGlzdC5hZGQoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldFwiKTtcbiAgICBsZXQgbmV3TGlzdEl0ZW1IZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBuZXdMaXN0SXRlbUhlYWRlci5jbGFzc0xpc3QuYWRkKFwiYnVsbGV0LXRpdGxlXCIpO1xuICAgIG5ld0xpc3RJdGVtSGVhZGVyLnRleHRDb250ZW50ID0gaGVhZGVyO1xuICAgIG5ld0xpc3RJdGVtLmFwcGVuZChuZXdMaXN0SXRlbUhlYWRlcik7XG4gICAgbGV0IGxldHRlcmVkQ291bnRlciA9IFwiXCI7XG4gICAgc3dpdGNoIChsaXN0SXRlbVVuY2VydGFpbkNvdW50ZXIpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgbGV0dGVyZWRDb3VudGVyID0gXCJGaXJzdFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGxldHRlcmVkQ291bnRlciA9IFwiU2Vjb25kXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgbGV0dGVyZWRDb3VudGVyID0gXCJUaGlyZFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGxldHRlcmVkQ291bnRlciA9IFwiRm91cnRoXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgbGV0dGVyZWRDb3VudGVyID0gXCJGaWZ0aFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIG5ld0xpc3RJdGVtLmlkID0gYFVuY2VydGFpbiR7bGV0dGVyZWRDb3VudGVyfVNsaWRlSXRlbWA7XG4gICAgbGlzdEl0ZW1VbmNlcnRhaW5Db3VudGVyKys7XG4gICAgdW5jZXJ0YWluRm9ybU5hdmlnYXRpb24uYXBwZW5kKG5ld0xpc3RJdGVtKTtcbn0pO1xuLy8g0KTQo9Cd0JrQptCY0K8g0JTQm9CvINCe0J/QoNCV0JTQldCb0JXQndCY0K8g0JDQmtCi0JjQktCd0J7Qk9CeINCh0JvQkNCZ0JTQkFxuLy8g0JLQkNCb0JjQlNCd0JAg0KLQntCb0KzQmtCeIE5FWFQg0JrQndCe0J/QntCaXG5mdW5jdGlvbiBjaGVja1doYXRTbGlkZUlzU2hvd2VkSW5VbmNlcnRhaW5Gb3JtKCkge1xuICAgIGFsbFVuY2VydGFpblNsaWRlcy5mb3JFYWNoKChzbGlkZSkgPT4ge1xuICAgICAgICBsZXQgc2xpZGVJRCA9IHNsaWRlLmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICBpZiAoc2xpZGVJRC5pbmNsdWRlcyhcIkZpcnN0XCIpICYmIHNsaWRlLmNsYXNzTGlzdC5jb250YWlucyhcInNsaWRlLS1zaG93XCIpKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluRmlyc3RTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWFjdGl2ZVwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluRmlyc3RTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblNlY29uZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tZGlzYWJsZWRcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblNlY29uZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1kaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5UaGlyZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tZGlzYWJsZWRcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblRoaXJkU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWRpc2FibGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgc2xpZGVJRC5pbmNsdWRlcyhcIlNlY29uZFwiKSAmJlxuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2xpZGUtLXNob3dcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluRmlyc3RTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWNvbXBsZXRlZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluRmlyc3RTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tY29tcGxldGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluRmlyc3RTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWFjdGl2ZVwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluRmlyc3RTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1kaXNhYmxlZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWRpc2FibGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblNlY29uZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5TZWNvbmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcInVuY2VydGFpblN0YXR1c0JhclwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9ncmVzcy1uYXZpZ2F0aW9uLWJhci0tMzNwXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJ1bmNlcnRhaW5TdGF0dXNCYXJcIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9ncmVzcy1uYXZpZ2F0aW9uLWJhci0tMHBcIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwidW5jZXJ0YWluU3RhdHVzQmFyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwicHJvZ3Jlc3MtbmF2aWdhdGlvbi1iYXItLTMzcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHNsaWRlSUQuaW5jbHVkZXMoXCJUaGlyZFwiKSAmJlxuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2xpZGUtLXNob3dcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1jb21wbGV0ZWRcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblNlY29uZFNsaWRlSXRlbVwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1jb21wbGV0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJVbmNlcnRhaW5TZWNvbmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWFjdGl2ZVwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluU2Vjb25kU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcIlVuY2VydGFpblRoaXJkU2xpZGVJdGVtXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcImxpc3QtbmF2aWdhdGlvbl9fYnVsbGV0LS1kaXNhYmxlZFwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluVGhpcmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tZGlzYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluVGhpcmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGlzdC1uYXZpZ2F0aW9uX19idWxsZXQtLWFjdGl2ZVwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwiVW5jZXJ0YWluVGhpcmRTbGlkZUl0ZW1cIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJsaXN0LW5hdmlnYXRpb25fX2J1bGxldC0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwidW5jZXJ0YWluU3RhdHVzQmFyXCIpXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5jb250YWlucyhcInByb2dyZXNzLW5hdmlnYXRpb24tYmFyLS0zM3BcIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZChcInVuY2VydGFpblN0YXR1c0JhclwiKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcInByb2dyZXNzLW5hdmlnYXRpb24tYmFyLS0zM3BcIik7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJ1bmNlcnRhaW5TdGF0dXNCYXJcIilcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJwcm9ncmVzcy1uYXZpZ2F0aW9uLWJhci0tOTVwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyDQn9Cg0Jgg0J3QkNCW0JDQotCY0Jgg0J3QkCDQodCb0JXQlNCj0K7QqdCj0K4g0JrQndCe0J/QmtCjINCt0KLQntCZINCk0J7QoNCc0Ksg0JzQldCd0K/QldCi0KHQryDQodCb0JDQmdCUINCYINCf0KPQndCa0KIg0J3QkNCS0JjQk9CQ0KbQmNCYXG5jb25zdCBhbGxOZXh0VW5jZXJ0YWluQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnRuLXVuY2VydGFpbi0tbmV4dFwiKTtcbmFsbE5leHRVbmNlcnRhaW5CdG5zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgbmV4dFNsaWRlSUQgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIG5leHRTbGlkZUlEID0gbmV4dFNsaWRlSUQucmVwbGFjZShcIk5leHRcIiwgXCJcIik7XG4gICAgICAgIGxldCBzbGlkZUlEID0gXCJcIjtcbiAgICAgICAgc3dpdGNoIChuZXh0U2xpZGVJRCkge1xuICAgICAgICAgICAgY2FzZSBcIlNlY29uZFNsaWRlXCI6XG4gICAgICAgICAgICAgICAgc2xpZGVJRCA9IFwiRmlyc3RTbGlkZVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlRoaXJkU2xpZGVcIjpcbiAgICAgICAgICAgICAgICBzbGlkZUlEID0gXCJTZWNvbmRTbGlkZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNsaWRlQWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2xpZGVJRCk7XG4gICAgICAgIGxldCBzbGlkZU5leHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuZXh0U2xpZGVJRCk7XG4gICAgICAgIHNsaWRlQWN0aXZlLmNsYXNzTGlzdC50b2dnbGUoXCJzbGlkZS0tc2hvd1wiKTtcbiAgICAgICAgc2xpZGVBY3RpdmUuY2xhc3NMaXN0LnRvZ2dsZShcInNsaWRlLS1oaWRkZW5cIik7XG4gICAgICAgIHNsaWRlTmV4dC5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGUtLXNob3dcIik7XG4gICAgICAgIHNsaWRlTmV4dC5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGUtLWhpZGRlblwiKTtcbiAgICAgICAgY2hlY2tXaGF0U2xpZGVJc1Nob3dlZEluVW5jZXJ0YWluRm9ybSgpO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IGFsbFByZXZpb3VzVW5jZXJ0YWluQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgXCIuYnRuLXVuY2VydGFpbi0tcHJldmlvdXNcIlxuKTtcblxuYWxsUHJldmlvdXNVbmNlcnRhaW5CdG5zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgbmV4dFNsaWRlSUQgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIG5leHRTbGlkZUlEID0gbmV4dFNsaWRlSUQucmVwbGFjZShcIlByZXZpb3VzXCIsIFwiXCIpO1xuICAgICAgICBsZXQgc2xpZGVJRCA9IFwiXCI7XG4gICAgICAgIHN3aXRjaCAobmV4dFNsaWRlSUQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJGaXJzdFNsaWRlXCI6XG4gICAgICAgICAgICAgICAgc2xpZGVJRCA9IFwiU2Vjb25kU2xpZGVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJTZWNvbmRTbGlkZVwiOlxuICAgICAgICAgICAgICAgIHNsaWRlSUQgPSBcIlRoaXJkU2xpZGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzbGlkZUFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNsaWRlSUQpO1xuICAgICAgICBsZXQgc2xpZGVOZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV4dFNsaWRlSUQpO1xuICAgICAgICBzbGlkZUFjdGl2ZS5jbGFzc0xpc3QudG9nZ2xlKFwic2xpZGUtLXNob3dcIik7XG4gICAgICAgIHNsaWRlQWN0aXZlLmNsYXNzTGlzdC50b2dnbGUoXCJzbGlkZS0taGlkZGVuXCIpO1xuICAgICAgICBzbGlkZU5leHQuY2xhc3NMaXN0LnRvZ2dsZShcInNsaWRlLS1zaG93XCIpO1xuICAgICAgICBzbGlkZU5leHQuY2xhc3NMaXN0LnRvZ2dsZShcInNsaWRlLS1oaWRkZW5cIik7XG4gICAgICAgIC8vIGNoZWNrV2hhdFNsaWRlSXNTaG93ZWRJblVuY2VydGFpbkZvcm0oKTtcbiAgICB9KTtcbn0pO1xuXG5jaGVja1doYXRTbGlkZUlzU2hvd2VkSW5VbmNlcnRhaW5Gb3JtKCk7XG5cbmNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJOYW1lXCIpO1xuY29uc3QgdXNlclBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJQaG9uZVwiKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5hZGRDbGFzcyhcInN1Ym1pdC1idXR0b24tLWRpc2FibGVkXCIpO1xuICAgICQoXCIjdXNlck5hbWVcIikua2V5dXAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwieWVzXCIpO1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKS5sZW5ndGggIT0gMCAmJiAkKFwiI3VzZXJQaG9uZVwiKS52YWwoKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgJChcIi5zdWJtaXQtYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwic3VibWl0LWJ1dHRvbi0tZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKFwiI3VzZXJQaG9uZVwiKS5rZXl1cChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ5ZXNcIik7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPSAwICYmICQoXCIjdXNlck5hbWVcIikudmFsKCkubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcInN1Ym1pdC1idXR0b24tLWRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuJChcIiN1c2VyUGhvbmVcIikuaW5wdXRtYXNrKCk7IiwiLy8gLy8g0KXRgNCw0L3QuNC70LjRidCwINC00LDRgtCwLdC00LDQvdC90YvRhSxcbi8vIC8v0LTQu9GPINGD0LTQvtCx0L3QvtCz0L4g0LfQsNC/0L7Qu9C90LXQvdC40Y8g0LTQsNC90L3Ri9GFINCyINGB0LLQsNC50L/QtdGA0LDRhVxubGV0IG1lbnUgPSBbXTtcbmxldCBIZWFkZXJzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmF0dGVudGlvbi1jb250YWluZXJfX2hlYWRlclwiKTtcbkhlYWRlcnNBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgbGV0IEhlYWRlclZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZm9cIik7XG4gICAgbWVudS5wdXNoKEhlYWRlclZhbHVlKTtcbn0pO1xuLy8gbGV0IG1lbnVDb21wYW55ID0gW107XG4vLyBsZXQgY29tcGFueVBhZ2VzQXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFib3V0LWluZm9cIik7XG4vLyBjb21wYW55UGFnZXNBcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4vLyAgICAgbGV0IEhlYWRlclZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZm9cIik7XG4vLyAgICAgbWVudUNvbXBhbnkucHVzaChIZWFkZXJWYWx1ZSk7XG4vLyB9KTtcbi8vINCh0LLQsNC50L/QtdGA0YssINC60L7RgtC+0YDRi9C1INC30LDQv9GD0YHQutCw0Y7RgtGB0Y8g0YHRgNCw0LfRg1xubGV0IHN3aXBlckdyZWV0ID0gbmV3IFN3aXBlcihcIiNncmVldGluZ1N3aXBwZXJcIiwge1xuICAgIC8vIG5hdmlnYXRpb246IHtcbiAgICAvLyAgICAgbmV4dEVsOiBcIi5ncmVldGluZy1uZXh0XCIsXG4gICAgLy8gICAgIHByZXZFbDogXCIuZ3JlZXRpbmctcHJldlwiLFxuICAgIC8vIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXJCdWxsZXQ6IGZ1bmN0aW9uKGluZGV4LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGxldCByZWFkeUVsZW1lbnQgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzID0gXCIke2NsYXNzTmFtZX0gYnVsbGV0LXNwZWNpYWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzID1cImJ1bGxldC1oZWFkZXJcIj4ke21lbnVbaW5kZXhdfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIlwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWR5RWxlbWVudDtcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGxvb3A6IHRydWUsXG4gICAgZWZmZWN0OiBcImZhZGVcIixcbiAgICBzcGVlZDogODAwLFxuICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgd2F0Y2hWaXNpYmlsaXR5OiB0cnVlLFxuICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiB0cnVlLFxufSk7XG5sZXQgc3dpcGVyQmFua3MgPSBuZXcgU3dpcGVyKFwiI2JhbmtzU3dpcGVyXCIsIHtcbiAgICAvLyBuYXZpZ2F0aW9uOiB7XG4gICAgLy8gICAgIG5leHRFbDogXCIuYnV0dG9uLWJhbmstLW5leHRcIixcbiAgICAvLyAgICAgcHJldkVsOiBcIi5idXR0b24tYmFuay0tcHJldlwiLFxuICAgIC8vIH0sXG4gICAgLy8gcGFnaW5hdGlvbjoge1xuICAgIC8vICAgICBlbDogXCIuYmFua3MtcGFnaW5hdGlvblwiLFxuICAgIC8vICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgLy8gfSxcbiAgICBsb29wOiB0cnVlLFxuICAgIGVmZmVjdDogXCJjYXJkc1wiLFxuICAgIHNwZWVkOiA4MDAsXG4gICAgc2xpZGVzUGVyVmlldzogNCxcbiAgICBhdXRvcGxheToge1xuICAgICAgICBkZWxheTogMSxcbiAgICB9LFxuICAgIHNwYWNlQmV0d2VlbjogNTAsXG4gICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgIDkyMDoge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcbiAgICAgICAgfSxcbiAgICAgICAgNjAwOiB7XG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxuICAgICAgICB9LFxuICAgICAgICA0NTA6IHtcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgIH0sXG4gICAgfSxcbn0pO1xuXG4vLyAvLyDQkNCy0YLQvtC/0LXRh9Cw0YLQsNC90LjQtSDRgtC10LrRgdGC0LAg0LIg0LPQu9Cw0LLQvdC+0Lwg0YHQstCw0LnQv9C10YDQtVxuLy8gdmFyIFR4dFR5cGUgPSBmdW5jdGlvbihlbCwgdG9Sb3RhdGUsIHBlcmlvZCkge1xuLy8gICAgIHRoaXMudG9Sb3RhdGUgPSB0b1JvdGF0ZTtcbi8vICAgICB0aGlzLmVsID0gZWw7XG4vLyAgICAgdGhpcy5sb29wTnVtID0gMDtcbi8vICAgICB0aGlzLnBlcmlvZCA9IHBhcnNlSW50KHBlcmlvZCwgMTApIHx8IDIwMDA7XG4vLyAgICAgdGhpcy50eHQgPSBcIlwiO1xuLy8gICAgIHRoaXMudGljaygpO1xuLy8gICAgIHRoaXMuaXNEZWxldGluZyA9IGZhbHNlO1xuLy8gfTtcblxuLy8gVHh0VHlwZS5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uKCkge1xuLy8gICAgIHZhciBpID0gdGhpcy5sb29wTnVtICUgdGhpcy50b1JvdGF0ZS5sZW5ndGg7XG4vLyAgICAgdmFyIGZ1bGxUeHQgPSB0aGlzLnRvUm90YXRlW2ldO1xuXG4vLyAgICAgaWYgKHRoaXMuaXNEZWxldGluZykge1xuLy8gICAgICAgICB0aGlzLnR4dCA9IGZ1bGxUeHQuc3Vic3RyaW5nKDAsIHRoaXMudHh0Lmxlbmd0aCAtIDEpO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIHRoaXMudHh0ID0gZnVsbFR4dC5zdWJzdHJpbmcoMCwgdGhpcy50eHQubGVuZ3RoICsgMSk7XG4vLyAgICAgfVxuXG4vLyAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJ3cmFwXCI+JyArIHRoaXMudHh0ICsgXCI8L3NwYW4+XCI7XG5cbi8vICAgICB2YXIgdGhhdCA9IHRoaXM7XG4vLyAgICAgdmFyIGRlbHRhID0gMjAwIC0gTWF0aC5yYW5kb20oKSAqIDEwMDtcblxuLy8gICAgIGlmICh0aGlzLmlzRGVsZXRpbmcpIHtcbi8vICAgICAgICAgZGVsdGEgLz0gMjtcbi8vICAgICB9XG5cbi8vICAgICBpZiAoIXRoaXMuaXNEZWxldGluZyAmJiB0aGlzLnR4dCA9PT0gZnVsbFR4dCkge1xuLy8gICAgICAgICBkZWx0YSA9IHRoaXMucGVyaW9kO1xuLy8gICAgICAgICB0aGlzLmlzRGVsZXRpbmcgPSB0cnVlO1xuLy8gICAgIH0gZWxzZSBpZiAodGhpcy5pc0RlbGV0aW5nICYmIHRoaXMudHh0ID09PSBcIlwiKSB7XG4vLyAgICAgICAgIHRoaXMuaXNEZWxldGluZyA9IGZhbHNlO1xuLy8gICAgICAgICB0aGlzLmxvb3BOdW0rKztcbi8vICAgICAgICAgZGVsdGEgPSA1MDA7XG4vLyAgICAgfVxuXG4vLyAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbi8vICAgICAgICAgdGhhdC50aWNrKCk7XG4vLyAgICAgfSwgZGVsdGEpO1xuLy8gfTtcblxuLy8gd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuLy8gICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0eXBld3JpdGVcIik7XG4vLyAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuLy8gICAgICAgICB2YXIgdG9Sb3RhdGUgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG4vLyAgICAgICAgIHZhciBwZXJpb2QgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBlcmlvZFwiKTtcbi8vICAgICAgICAgaWYgKHRvUm90YXRlKSB7XG4vLyAgICAgICAgICAgICBuZXcgVHh0VHlwZShlbGVtZW50c1tpXSwgSlNPTi5wYXJzZSh0b1JvdGF0ZSksIHBlcmlvZCk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyAgICAgLy8gSU5KRUNUIENTU1xuLy8gICAgIHZhciBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4vLyAgICAgY3NzLnR5cGUgPSBcInRleHQvY3NzXCI7XG4vLyAgICAgY3NzLmlubmVySFRNTCA9IFwiLnR5cGV3cml0ZSA+IC53cmFwIHsgYm9yZGVyLXJpZ2h0OiAwLjA4ZW0gc29saWQgI2ZmZn1cIjtcbi8vICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNzcyk7XG4vLyB9O1xuLy8gLy8g0JjQvdC40YbQuNCw0YbQuNGPINCQ0J7QodCQINC00LvRjyDQtNCy0LjQs9Cw0Y7RidC10LPQviDRgtC10LrRgdGC0LBcbi8vIEFPUy5pbml0KHtcbi8vICAgICBzdGFydEV2ZW50OiBcIkRPTUNvbnRlbnRMb2FkZWRcIixcbi8vIH0pO1xuXG4vLyDQoNCw0LHQvtGC0LDQtdC8INGB0L4g0YHQu9Cw0LnQtNC10YDQsNC80Lgg0LIg0YTQvtGA0LzQtVxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJChcIiNzbGlkZXJEZWJ0XCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogNTAwMDAwLFxuICAgICAgICBtaW46IDEwMDAwMCxcbiAgICAgICAgbWF4OiA0MzUwMDAwLFxuICAgICAgICBzdGVwOiAxMDAwLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgICAgICAgICAkKFwiI2RlYnRJbnB1dFwiKS52YWwoZGVidFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlclRpbWVcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA1MDAwMDAsXG4gICAgICAgIG1pbjogMzUwMDAsXG4gICAgICAgIG1heDogNTAwMDAwMCxcbiAgICAgICAgc3RlcDogMjAwMDAwLFxuICAgICAgICAvLyBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgIC8vICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgIC8vICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgICAgIC8vICAgICAkKFwiI2RlYnRJbnB1dFwiKS52YWwoZGVidFZhbHVlKTtcbiAgICAgICAgLy8gfSxcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlckRlcG9zaXRcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAxMDAwMDAsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiA0MDAwMDAsXG4gICAgICAgIHN0ZXA6IDEwMDAsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcblxuICAgICAgICAgICAgJChcIiNkZWJ0SW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgICAgICAgICB2YXIgayA9IDMuOSAvIDEyMDAuMDtcbiAgICAgICAgICAgIHN1bSA9IHByaWNlICogayAqIChNYXRoLnBvdygxICsgaywgc3JvaykgLyAoTWF0aC5wb3coMSArIGssIHNyb2spIC0gMSkpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjZGVidElucHV0XCIpLnZhbCgkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgICQoXCIjZGVidElucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIiNzbGlkZXJEZWJ0XCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIH0pO1xuICAgICQoXCIjc2xpZGVyVGltZVwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDMsXG4gICAgICAgIG1pbjogMSxcbiAgICAgICAgbWF4OiA4LFxuICAgICAgICBzdGVwOiAxLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgdGltZVZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRpbWVWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LRgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INC70LXRgmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKFwiI3RpbWVJbnB1dFwiKS52YWwodGltZVZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI3RpbWVJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIpKTtcbiAgICBsZXQgdGltZVZhbHVlID0gJChcIiN0aW1lSW5wdXRcIikudmFsKCk7XG4gICAgc3dpdGNoICh0aW1lVmFsdWUpIHtcbiAgICAgICAgZGVmYXVsdDogdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgfVxuICAgICQoXCIjdGltZUlucHV0XCIpLnZhbCh0aW1lVmFsdWUpO1xuICAgICQoXCIjdGltZUlucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIH0pO1xuICAgICQoXCIjc2xpZGVySW5jb21lXCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMzAwMDAsXG4gICAgICAgIG1pbjogMTAwMDAsXG4gICAgICAgIG1heDogNTAwMDAwLFxuICAgICAgICBzdGVwOiA1MDAwLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgICAgICAgICAkKFwiI2luY29tZUlucHV0XCIpLnZhbChkZWJ0VmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjaW5jb21lSW5wdXRcIikudmFsKCQoXCIjc2xpZGVySW5jb21lXCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIpKTtcbiAgICAkKFwiI2luY29tZUlucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIiNzbGlkZXJJbmNvbWVcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXJJbnZlc3RcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiAxMDAwMDAsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiA0MDAwMDAsXG4gICAgICAgIHN0ZXA6IDEwMDAsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCBkZWJ0VmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIGRlYnRWYWx1ZSA9IG51bWJlcldpdGhDb21tYXMoZGVidFZhbHVlKTtcbiAgICAgICAgICAgICQoXCIjaW52ZXN0SW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgJChcIiNpbnZlc3RJbnB1dFwiKS52YWwoJChcIiNzbGlkZXJJbnZlc3RcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgICQoXCIjaW52ZXN0SW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlckludmVzdFwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCAkKHRoaXMpLnZhbCgpKTtcbiAgICB9KTtcbn0pOyJdfQ==
