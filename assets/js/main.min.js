"use strict";function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var allNextButtons=document.querySelectorAll(".form-navigation__button--next"),detailedFormObject={type:"",credit:"",time:"",income:"",invest:"",userName:"",userPhone:""};allNextButtons.forEach(function(s){s.addEventListener("click",function(){var e=(e=s.id).replace("Button",""),t=s.parentNode.parentNode.id;document.getElementById(t).classList.toggle("screen--hide"),document.getElementById(t).classList.toggle("screen--show"),document.getElementById(e).classList.toggle("screen--hide"),document.getElementById(e).classList.toggle("screen--show"),document.querySelectorAll("input[name='autoSelect']").forEach(function(e){var t;e.checked&&(t=e.id,detailedFormObject.type=t.toString())});var n=document.getElementById("debtInput").value;console.log(n),detailedFormObject.credit=n.toString();var i=document.getElementById("timeInput").value;detailedFormObject.time=i.toString();var a=document.getElementById("incomeInput").value;detailedFormObject.income=a.toString();var o=document.getElementById("investInput").value;detailedFormObject.invest=o.toString(),console.log(detailedFormObject)})});var allPrevButtons=document.querySelectorAll(".form-navigation__button--prev");allPrevButtons.forEach(function(n){n.addEventListener("click",function(){var e=(e=n.id).replace("Button",""),t=n.parentNode.parentNode.id;document.getElementById(t).classList.toggle("screen--hide"),document.getElementById(t).classList.toggle("screen--show"),document.getElementById(e).classList.toggle("screen--hide"),document.getElementById(e).classList.toggle("screen--show")})});var detailedButton=document.getElementById("detailedForm");detailedButton.addEventListener("click",function(){document.getElementById("firstScreen").classList.toggle("screen--hide"),document.getElementById("firstScreen").classList.toggle("screen--show"),document.getElementById("secondScreen").classList.toggle("screen--hide"),document.getElementById("secondScreen").classList.toggle("screen--show")});var userNameInput=document.getElementById("userName"),userPhoneInput=document.getElementById("userPhone");$(document).ready(function(){$(".submit-button").addClass("form-navigation__button--disabled"),$("#userName").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userPhone").val().length&&$(".submit-button").removeClass("form-navigation__button--disabled")}),$("#userPhone").keyup(function(){console.log("yes"),0!=$(this).val().length&&0!=$("#userName").val().length&&$(".submit-button").removeClass("form-navigation__button--disabled")})});var banksButtonOpen=document.getElementById("banksButtonOpen");banksButtonOpen.addEventListener("click",function(){banksButtonOpen.classList.contains("buttonExpandBig")||banksButtonOpen.classList.add("buttonExpandBig")});var banksButtonClose=document.getElementById("banksButtonClose");function closeButton(){setTimeout(closeButtonDelay,100)}function closeButtonDelay(){banksButtonOpen.classList.toggle("buttonExpandBig")}banksButtonClose.addEventListener("click",closeButton);var verticalSmallContainer=document.getElementById("verticalSmallContainer"),verticalBigContainer=document.getElementById("verticalBigContainer"),basicMenuContainer=document.getElementById("basicMenuContainer");function initAboutSwiper(){new Swiper("#aboutSwiper",{pagination:{el:".about-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menuCompany[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"cube",speed:800})}verticalSmallContainer.addEventListener("click",function(){verticalSmallContainer.classList.contains("containerSmallExpand")||(verticalSmallContainer.classList.add("containerSmallExpand"),basicMenuContainer.classList.add("menuTransformed"),initAboutSwiper())});var menu=[],HeadersArray=document.querySelectorAll(".attention-container__header");HeadersArray.forEach(function(e){var t=e.getAttribute("data-info");menu.push(t)});var menuCompany=[],companyPagesArray=document.querySelectorAll(".about-info");companyPagesArray.forEach(function(e){var t=e.getAttribute("data-info");menuCompany.push(t)});var swiperGreet=new Swiper("#greetingSwipper",{pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'\n            <div class = "'.concat(t,' bullet-special">\n                <div class ="bullet-header">').concat(menu[e],'</div>\n                <div class = ""></div>\n            </div>\n            ')}},loop:!0,effect:"fade",speed:800,watchSlidesProgress:!0,watchVisibility:!0,disableOnInteraction:!0}),swiperBanks=new Swiper("#banksSwiper",{navigation:{nextEl:".button-bank--next",prevEl:".button-bank--prev"},pagination:{el:".banks-pagination",clickable:!0},loop:!0,effect:"cards",speed:800,slidesPerView:6}),TxtType=function(e,t,n){this.toRotate=t,this.el=e,this.loopNum=0,this.period=parseInt(n,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};TxtType.prototype.tick=function(){var e=this.loopNum%this.toRotate.length,t=this.toRotate[e];this.isDeleting?this.txt=t.substring(0,this.txt.length-1):this.txt=t.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>";var n=this,i=200-100*Math.random();this.isDeleting&&(i/=2),this.isDeleting||this.txt!==t?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,i=500):(i=this.period,this.isDeleting=!0),setTimeout(function(){n.tick()},i)},window.onload=function(){for(var e=document.getElementsByClassName("typewrite"),t=0;t<e.length;t++){var n=e[t].getAttribute("data-type"),i=e[t].getAttribute("data-period");n&&new TxtType(e[t],JSON.parse(n),i)}var a=document.createElement("style");a.type="text/css",a.innerHTML=".typewrite > .wrap { border-right: 0.08em solid #fff}",document.body.appendChild(a)},AOS.init({startEvent:"DOMContentLoaded"}),$(document).ready(function(){$("#sliderDebt").slider({range:"min",animate:!0,value:5e5,min:1e5,max:435e4,step:1e3,slide:function(e,t){var n=numberWithCommas(n=t.value);$("#debtInput").val(n)}}),$("#debtInput").val($("#sliderDebt").slider("option","value")),$("#debtInput").change(function(){$("#sliderDebt").slider("value",$(this).val())}),$("#sliderTime").slider({range:"min",animate:!0,value:3,min:1,max:8,step:1,slide:function(e,t){var n=t.value;switch(n){case 1:n="".concat(n," год");break;case 2:case 3:case 4:n="".concat(n," года");break;default:n="".concat(n," лет")}$("#timeInput").val(n)}}),$("#timeInput").val($("#sliderTime").slider("option","value"));var e=$("#timeInput").val();console.log(e),e="".concat(e," года"),$("#timeInput").val(e),$("#timeInput").change(function(){$("#sliderTime").slider("value",$(this).val())}),$("#sliderIncome").slider({range:"min",animate:!0,value:3e4,min:1e4,max:5e5,step:5e3,slide:function(e,t){var n=numberWithCommas(n=t.value);$("#incomeInput").val(n)}}),$("#incomeInput").val($("#sliderIncome").slider("option","value")),$("#incomeInput").change(function(){$("#sliderIncome").slider("value",$(this).val())}),$("#sliderInvest").slider({range:"min",animate:!0,value:1e5,min:0,max:4e5,step:1e3,slide:function(e,t){var n=numberWithCommas(n=t.value);$("#investInput").val(n)}}),$("#investInput").val($("#sliderInvest").slider("option","value")),$("#investInput").change(function(){$("#sliderInvest").slider("value",$(this).val())})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyIsImNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsibnVtYmVyV2l0aENvbW1hcyIsIngiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJhbGxOZXh0QnV0dG9ucyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImRldGFpbGVkRm9ybU9iamVjdCIsInR5cGUiLCJjcmVkaXQiLCJ0aW1lIiwiaW5jb21lIiwiaW52ZXN0IiwidXNlck5hbWUiLCJ1c2VyUGhvbmUiLCJmb3JFYWNoIiwiYnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJ1dHRvbklkIiwiaWQiLCJwYXJlbnRJZCIsInBhcmVudE5vZGUiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlucHV0IiwiY2hlY2tlZE9wdGlvbiIsImNoZWNrZWQiLCJjcmVkaXRTdW0iLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJjcmVkaXRUaW1lIiwidXNlckluY29tZSIsImNyZWRpdEludmVzdCIsImFsbFByZXZCdXR0b25zIiwiZGV0YWlsZWRCdXR0b24iLCJ1c2VyTmFtZUlucHV0IiwidXNlclBob25lSW5wdXQiLCIkIiwicmVhZHkiLCJhZGRDbGFzcyIsImtleXVwIiwidGhpcyIsInZhbCIsImxlbmd0aCIsInJlbW92ZUNsYXNzIiwiYmFua3NCdXR0b25PcGVuIiwiY29udGFpbnMiLCJhZGQiLCJiYW5rc0J1dHRvbkNsb3NlIiwiY2xvc2VCdXR0b24iLCJzZXRUaW1lb3V0IiwiY2xvc2VCdXR0b25EZWxheSIsInZlcnRpY2FsU21hbGxDb250YWluZXIiLCJ2ZXJ0aWNhbEJpZ0NvbnRhaW5lciIsImJhc2ljTWVudUNvbnRhaW5lciIsImluaXRBYm91dFN3aXBlciIsIlN3aXBlciIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsInJlbmRlckJ1bGxldCIsImluZGV4IiwiY2xhc3NOYW1lIiwiY29uY2F0IiwibWVudUNvbXBhbnkiLCJsb29wIiwiZWZmZWN0Iiwic3BlZWQiLCJtZW51IiwiSGVhZGVyc0FycmF5IiwiZWxlbWVudCIsIkhlYWRlclZhbHVlIiwiZ2V0QXR0cmlidXRlIiwicHVzaCIsImNvbXBhbnlQYWdlc0FycmF5Iiwic3dpcGVyR3JlZXQiLCJ3YXRjaFNsaWRlc1Byb2dyZXNzIiwid2F0Y2hWaXNpYmlsaXR5IiwiZGlzYWJsZU9uSW50ZXJhY3Rpb24iLCJzd2lwZXJCYW5rcyIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJzbGlkZXNQZXJWaWV3IiwiVHh0VHlwZSIsInRvUm90YXRlIiwicGVyaW9kIiwibG9vcE51bSIsInBhcnNlSW50IiwidHh0IiwidGljayIsImlzRGVsZXRpbmciLCJwcm90b3R5cGUiLCJpIiwiZnVsbFR4dCIsInN1YnN0cmluZyIsImlubmVySFRNTCIsInRoYXQiLCJkZWx0YSIsIk1hdGgiLCJyYW5kb20iLCJ3aW5kb3ciLCJvbmxvYWQiLCJlbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJKU09OIiwicGFyc2UiLCJjc3MiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiQU9TIiwiaW5pdCIsInN0YXJ0RXZlbnQiLCJzbGlkZXIiLCJyYW5nZSIsImFuaW1hdGUiLCJtaW4iLCJtYXgiLCJzdGVwIiwic2xpZGUiLCJldmVudCIsInVpIiwiZGVidFZhbHVlIiwiY2hhbmdlIiwidGltZVZhbHVlIl0sIm1hcHBpbmdzIjoiYUFBQSxTQUFBQSxpQkFBQUMsR0FDQSxPQUFBQSxFQUFBQyxXQUFBQyxRQUFBLHdCQUFBLEtBR0EsSUFBQUMsZUFBQUMsU0FBQUMsaUJBQ0Esa0NBRUFDLG1CQUFBLENBQ0FDLEtBQUEsR0FDQUMsT0FBQSxHQUNBQyxLQUFBLEdBQ0FDLE9BQUEsR0FDQUMsT0FBQSxHQUNBQyxTQUFBLEdBQ0FDLFVBQUEsSUFFQVYsZUFBQVcsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFBQSxRQUFBLFdBQ0EsSUFDQUMsR0FEQUEsRUFBQUYsRUFBQUcsSUFDQWhCLFFBQUEs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T0FBQSxXQUNBdkYsRUFBQSxlQUFBNkUsT0FBQSxRQUFBN0UsRUFBQUksTUFBQUMsU0FFQUwsRUFBQSxpQkFBQTZFLE9BQUEsQ0FDQUMsTUFBQSxNQUNBQyxTQUFBLEVBQ0F6RixNQUFBLElBQ0EwRixJQUFBLElBQ0FDLElBQUEsSUFDQUMsS0FBQSxJQUNBQyxNQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFDQUMsRUFBQTdILGlCQURBNkgsRUFBQUQsRUFBQS9GLE9BRUFVLEVBQUEsZ0JBQUFLLElBQUFpRixNQUdBdEYsRUFBQSxnQkFBQUssSUFBQUwsRUFBQSxpQkFBQTZFLE9BQUEsU0FBQSxVQUNBN0UsRUFBQSxnQkFBQXVGLE9BQUEsV0FDQXZGLEVBQUEsaUJBQUE2RSxPQUFBLFFBQUE3RSxFQUFBSSxNQUFBQyxTQUVBTCxFQUFBLGlCQUFBNkUsT0FBQSxDQUNBQyxNQUFBLE1BQ0FDLFNBQUEsRUFDQXpGLE1BQUEsSUFDQTBGLElBQUEsRUFDQUMsSUFBQSxJQUNBQyxLQUFBLElBQ0FDLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUNBQyxFQUFBN0gsaUJBREE2SCxFQUFBRCxFQUFBL0YsT0FFQVUsRUFBQSxnQkFBQUssSUFBQWlGLE1BR0F0RixFQUFBLGdCQUFBSyxJQUFBTCxFQUFBLGlCQUFBNkUsT0FBQSxTQUFBLFVBQ0E3RSxFQUFBLGdCQUFBdUYsT0FBQSxXQUNBdkYsRUFBQSxpQkFBQTZFLE9BQUEsUUFBQTdFLEVBQUFJLE1BQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBudW1iZXJXaXRoQ29tbWFzKHgpIHtcbiAgICByZXR1cm4geC50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLlwiKTtcbn1cblxuY29uc3QgYWxsTmV4dEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgIFwiLmZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1uZXh0XCJcbik7XG5sZXQgZGV0YWlsZWRGb3JtT2JqZWN0ID0ge1xuICAgIHR5cGU6IFwiXCIsXG4gICAgY3JlZGl0OiBcIlwiLFxuICAgIHRpbWU6IFwiXCIsXG4gICAgaW5jb21lOiBcIlwiLFxuICAgIGludmVzdDogXCJcIixcbiAgICB1c2VyTmFtZTogXCJcIixcbiAgICB1c2VyUGhvbmU6IFwiXCIsXG59O1xuYWxsTmV4dEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBidXR0b25JZCA9IGJ1dHRvbi5pZDtcbiAgICAgICAgYnV0dG9uSWQgPSBidXR0b25JZC5yZXBsYWNlKFwiQnV0dG9uXCIsIFwiXCIpO1xuICAgICAgICBsZXQgcGFyZW50SWQgPSBidXR0b24ucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbiAgICAgICAgY29uc3QgdHlwZXNJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbbmFtZT0nYXV0b1NlbGVjdCddXCIpO1xuICAgICAgICB0eXBlc0lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tlZE9wdGlvbiA9IGlucHV0LmlkO1xuICAgICAgICAgICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC50eXBlID0gY2hlY2tlZE9wdGlvbi50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY3JlZGl0U3VtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWJ0SW5wdXRcIikudmFsdWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGNyZWRpdFN1bSk7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC5jcmVkaXQgPSBjcmVkaXRTdW0udG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgY3JlZGl0VGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZUlucHV0XCIpLnZhbHVlO1xuICAgICAgICBkZXRhaWxlZEZvcm1PYmplY3QudGltZSA9IGNyZWRpdFRpbWUudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgdXNlckluY29tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5jb21lSW5wdXRcIikudmFsdWU7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC5pbmNvbWUgPSB1c2VySW5jb21lLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGNyZWRpdEludmVzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW52ZXN0SW5wdXRcIikudmFsdWU7XG4gICAgICAgIGRldGFpbGVkRm9ybU9iamVjdC5pbnZlc3QgPSBjcmVkaXRJbnZlc3QudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc29sZS5sb2coZGV0YWlsZWRGb3JtT2JqZWN0KTtcbiAgICB9KTtcbn0pO1xuY29uc3QgYWxsUHJldkJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgIFwiLmZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1wcmV2XCJcbik7XG5hbGxQcmV2QnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGJ1dHRvbklkID0gYnV0dG9uLmlkO1xuICAgICAgICBidXR0b25JZCA9IGJ1dHRvbklkLnJlcGxhY2UoXCJCdXR0b25cIiwgXCJcIik7XG4gICAgICAgIGxldCBwYXJlbnRJZCA9IGJ1dHRvbi5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1oaWRlXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0tc2hvd1wiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uSWQpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLWhpZGVcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbklkKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xuICAgIH0pO1xufSk7XG5cbmNvbnN0IGRldGFpbGVkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXRhaWxlZEZvcm1cIik7XG5kZXRhaWxlZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3RTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpcnN0U2NyZWVuXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJzY3JlZW4tLXNob3dcIik7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWNvbmRTY3JlZW5cIikuY2xhc3NMaXN0LnRvZ2dsZShcInNjcmVlbi0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY29uZFNjcmVlblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2NyZWVuLS1zaG93XCIpO1xufSk7XG5cbmNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJOYW1lXCIpO1xuY29uc3QgdXNlclBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJQaG9uZVwiKTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5hZGRDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbiAgICAkKFwiI3VzZXJOYW1lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyUGhvbmVcIikudmFsKCkubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICQoXCIuc3VibWl0LWJ1dHRvblwiKS5yZW1vdmVDbGFzcyhcImZvcm0tbmF2aWdhdGlvbl9fYnV0dG9uLS1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoXCIjdXNlclBob25lXCIpLmtleXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInllc1wiKTtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkubGVuZ3RoICE9IDAgJiYgJChcIiN1c2VyTmFtZVwiKS52YWwoKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgJChcIi5zdWJtaXQtYnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwiZm9ybS1uYXZpZ2F0aW9uX19idXR0b24tLWRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuY29uc3QgYmFua3NCdXR0b25PcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYW5rc0J1dHRvbk9wZW5cIik7XG5iYW5rc0J1dHRvbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoIWJhbmtzQnV0dG9uT3Blbi5jbGFzc0xpc3QuY29udGFpbnMoXCJidXR0b25FeHBhbmRCaWdcIikpXG4gICAgICAgIGJhbmtzQnV0dG9uT3Blbi5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uRXhwYW5kQmlnXCIpO1xufSk7XG5jb25zdCBiYW5rc0J1dHRvbkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYW5rc0J1dHRvbkNsb3NlXCIpO1xuYmFua3NCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VCdXR0b24pO1xuXG5mdW5jdGlvbiBjbG9zZUJ1dHRvbigpIHtcbiAgICBzZXRUaW1lb3V0KGNsb3NlQnV0dG9uRGVsYXksIDEwMCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQnV0dG9uRGVsYXkoKSB7XG4gICAgYmFua3NCdXR0b25PcGVuLmNsYXNzTGlzdC50b2dnbGUoXCJidXR0b25FeHBhbmRCaWdcIik7XG59XG5cbmNvbnN0IHZlcnRpY2FsU21hbGxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICBcInZlcnRpY2FsU21hbGxDb250YWluZXJcIlxuKTtcbmNvbnN0IHZlcnRpY2FsQmlnQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ZXJ0aWNhbEJpZ0NvbnRhaW5lclwiKTtcbmNvbnN0IGJhc2ljTWVudUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFzaWNNZW51Q29udGFpbmVyXCIpO1xudmVydGljYWxTbWFsbENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmICghdmVydGljYWxTbWFsbENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250YWluZXJTbWFsbEV4cGFuZFwiKSkge1xuICAgICAgICB2ZXJ0aWNhbFNtYWxsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJTbWFsbEV4cGFuZFwiKTtcbiAgICAgICAgYmFzaWNNZW51Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtZW51VHJhbnNmb3JtZWRcIik7XG4gICAgICAgIGluaXRBYm91dFN3aXBlcigpO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBpbml0QWJvdXRTd2lwZXIoKSB7XG4gICAgbGV0IHN3aXBlckFib3V0ID0gbmV3IFN3aXBlcihcIiNhYm91dFN3aXBlclwiLCB7XG4gICAgICAgIC8vIG5hdmlnYXRpb246IHtcbiAgICAgICAgLy8gICAgIG5leHRFbDogXCIuYnV0dG9uLWFib3V0LS1uZXh0XCIsXG4gICAgICAgIC8vICAgICBwcmV2RWw6IFwiLmJ1dHRvbi1hYm91dC0tcHJldlwiLFxuICAgICAgICAvLyB9LFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICBlbDogXCIuYWJvdXQtcGFnaW5hdGlvblwiLFxuICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgICAgICAgcmVuZGVyQnVsbGV0OiBmdW5jdGlvbihpbmRleCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlYWR5RWxlbWVudCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIiR7Y2xhc3NOYW1lfSBidWxsZXQtc3BlY2lhbFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPVwiYnVsbGV0LWhlYWRlclwiPiR7bWVudUNvbXBhbnlbaW5kZXhdfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIlwiPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFkeUVsZW1lbnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBlZmZlY3Q6IFwiY3ViZVwiLFxuICAgICAgICBzcGVlZDogODAwLFxuICAgIH0pO1xufSIsIi8vIC8vIGhlYWRlci1zd2lwZXJcbmxldCBtZW51ID0gW107XG5sZXQgSGVhZGVyc0FycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hdHRlbnRpb24tY29udGFpbmVyX19oZWFkZXJcIik7XG5IZWFkZXJzQXJyYXkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgIGxldCBIZWFkZXJWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmZvXCIpO1xuICAgIG1lbnUucHVzaChIZWFkZXJWYWx1ZSk7XG59KTtcbmxldCBtZW51Q29tcGFueSA9IFtdO1xubGV0IGNvbXBhbnlQYWdlc0FycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hYm91dC1pbmZvXCIpO1xuY29tcGFueVBhZ2VzQXJyYXkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgIGxldCBIZWFkZXJWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmZvXCIpO1xuICAgIG1lbnVDb21wYW55LnB1c2goSGVhZGVyVmFsdWUpO1xufSk7XG5sZXQgc3dpcGVyR3JlZXQgPSBuZXcgU3dpcGVyKFwiI2dyZWV0aW5nU3dpcHBlclwiLCB7XG4gICAgLy8gbmF2aWdhdGlvbjoge1xuICAgIC8vICAgICBuZXh0RWw6IFwiLmdyZWV0aW5nLW5leHRcIixcbiAgICAvLyAgICAgcHJldkVsOiBcIi5ncmVldGluZy1wcmV2XCIsXG4gICAgLy8gfSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24oaW5kZXgsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgbGV0IHJlYWR5RWxlbWVudCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcIiR7Y2xhc3NOYW1lfSBidWxsZXQtc3BlY2lhbFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPVwiYnVsbGV0LWhlYWRlclwiPiR7bWVudVtpbmRleF19PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwiXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICByZXR1cm4gcmVhZHlFbGVtZW50O1xuICAgICAgICB9LFxuICAgIH0sXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBlZmZlY3Q6IFwiZmFkZVwiLFxuICAgIHNwZWVkOiA4MDAsXG4gICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICB3YXRjaFZpc2liaWxpdHk6IHRydWUsXG4gICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IHRydWUsXG59KTtcbmxldCBzd2lwZXJCYW5rcyA9IG5ldyBTd2lwZXIoXCIjYmFua3NTd2lwZXJcIiwge1xuICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiBcIi5idXR0b24tYmFuay0tbmV4dFwiLFxuICAgICAgICBwcmV2RWw6IFwiLmJ1dHRvbi1iYW5rLS1wcmV2XCIsXG4gICAgfSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiBcIi5iYW5rcy1wYWdpbmF0aW9uXCIsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICB9LFxuICAgIGxvb3A6IHRydWUsXG4gICAgZWZmZWN0OiBcImNhcmRzXCIsXG4gICAgc3BlZWQ6IDgwMCxcbiAgICBzbGlkZXNQZXJWaWV3OiA2LFxufSk7XG5cblxudmFyIFR4dFR5cGUgPSBmdW5jdGlvbihlbCwgdG9Sb3RhdGUsIHBlcmlvZCkge1xuICAgIHRoaXMudG9Sb3RhdGUgPSB0b1JvdGF0ZTtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5sb29wTnVtID0gMDtcbiAgICB0aGlzLnBlcmlvZCA9IHBhcnNlSW50KHBlcmlvZCwgMTApIHx8IDIwMDA7XG4gICAgdGhpcy50eHQgPSBcIlwiO1xuICAgIHRoaXMudGljaygpO1xuICAgIHRoaXMuaXNEZWxldGluZyA9IGZhbHNlO1xufTtcblxuVHh0VHlwZS5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpID0gdGhpcy5sb29wTnVtICUgdGhpcy50b1JvdGF0ZS5sZW5ndGg7XG4gICAgdmFyIGZ1bGxUeHQgPSB0aGlzLnRvUm90YXRlW2ldO1xuXG4gICAgaWYgKHRoaXMuaXNEZWxldGluZykge1xuICAgICAgICB0aGlzLnR4dCA9IGZ1bGxUeHQuc3Vic3RyaW5nKDAsIHRoaXMudHh0Lmxlbmd0aCAtIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHh0ID0gZnVsbFR4dC5zdWJzdHJpbmcoMCwgdGhpcy50eHQubGVuZ3RoICsgMSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJ3cmFwXCI+JyArIHRoaXMudHh0ICsgXCI8L3NwYW4+XCI7XG5cbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGRlbHRhID0gMjAwIC0gTWF0aC5yYW5kb20oKSAqIDEwMDtcblxuICAgIGlmICh0aGlzLmlzRGVsZXRpbmcpIHtcbiAgICAgICAgZGVsdGEgLz0gMjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNEZWxldGluZyAmJiB0aGlzLnR4dCA9PT0gZnVsbFR4dCkge1xuICAgICAgICBkZWx0YSA9IHRoaXMucGVyaW9kO1xuICAgICAgICB0aGlzLmlzRGVsZXRpbmcgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0RlbGV0aW5nICYmIHRoaXMudHh0ID09PSBcIlwiKSB7XG4gICAgICAgIHRoaXMuaXNEZWxldGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvb3BOdW0rKztcbiAgICAgICAgZGVsdGEgPSA1MDA7XG4gICAgfVxuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC50aWNrKCk7XG4gICAgfSwgZGVsdGEpO1xufTtcblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0eXBld3JpdGVcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG9Sb3RhdGUgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG4gICAgICAgIHZhciBwZXJpb2QgPSBlbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBlcmlvZFwiKTtcbiAgICAgICAgaWYgKHRvUm90YXRlKSB7XG4gICAgICAgICAgICBuZXcgVHh0VHlwZShlbGVtZW50c1tpXSwgSlNPTi5wYXJzZSh0b1JvdGF0ZSksIHBlcmlvZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSU5KRUNUIENTU1xuICAgIHZhciBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgY3NzLnR5cGUgPSBcInRleHQvY3NzXCI7XG4gICAgY3NzLmlubmVySFRNTCA9IFwiLnR5cGV3cml0ZSA+IC53cmFwIHsgYm9yZGVyLXJpZ2h0OiAwLjA4ZW0gc29saWQgI2ZmZn1cIjtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNzcyk7XG59O1xuXG5BT1MuaW5pdCh7XG4gICAgc3RhcnRFdmVudDogXCJET01Db250ZW50TG9hZGVkXCIsXG59KTtcblxuLy8gU2xpZGVyIFNlY3Rpb25cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoXCIjc2xpZGVyRGVidFwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDUwMDAwMCxcbiAgICAgICAgbWluOiAxMDAwMDAsXG4gICAgICAgIG1heDogNDM1MDAwMCxcbiAgICAgICAgc3RlcDogMTAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNkZWJ0SW5wdXRcIikudmFsKGRlYnRWYWx1ZSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgJChcIiNkZWJ0SW5wdXRcIikudmFsKCQoXCIjc2xpZGVyRGVidFwiKS5zbGlkZXIoXCJvcHRpb25cIiwgXCJ2YWx1ZVwiKSk7XG4gICAgJChcIiNkZWJ0SW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI3NsaWRlckRlYnRcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG4gICAgJChcIiNzbGlkZXJUaW1lXCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMyxcbiAgICAgICAgbWluOiAxLFxuICAgICAgICBtYXg6IDgsXG4gICAgICAgIHN0ZXA6IDEsXG4gICAgICAgIHNsaWRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGxldCB0aW1lVmFsdWUgPSB1aS52YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodGltZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aW1lVmFsdWUgPSBgJHt0aW1lVmFsdWV9INCz0L7QtGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgdGltZVZhbHVlID0gYCR7dGltZVZhbHVlfSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LvQtdGCYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoXCIjdGltZUlucHV0XCIpLnZhbCh0aW1lVmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjdGltZUlucHV0XCIpLnZhbCgkKFwiI3NsaWRlclRpbWVcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIikpO1xuICAgIGxldCB0aW1lVmFsdWUgPSAkKFwiI3RpbWVJbnB1dFwiKS52YWwoKTtcbiAgICBjb25zb2xlLmxvZyh0aW1lVmFsdWUpO1xuICAgIHN3aXRjaCAodGltZVZhbHVlKSB7XG4gICAgICAgIGRlZmF1bHQ6IHRpbWVWYWx1ZSA9IGAke3RpbWVWYWx1ZX0g0LPQvtC00LBgO1xuICAgIH1cbiAgICAkKFwiI3RpbWVJbnB1dFwiKS52YWwodGltZVZhbHVlKTtcbiAgICAkKFwiI3RpbWVJbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjc2xpZGVyVGltZVwiKS5zbGlkZXIoXCJ2YWx1ZVwiLCAkKHRoaXMpLnZhbCgpKTtcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlckluY29tZVwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDMwMDAwLFxuICAgICAgICBtaW46IDEwMDAwLFxuICAgICAgICBtYXg6IDUwMDAwMCxcbiAgICAgICAgc3RlcDogNTAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNpbmNvbWVJbnB1dFwiKS52YWwoZGVidFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI2luY29tZUlucHV0XCIpLnZhbCgkKFwiI3NsaWRlckluY29tZVwiKS5zbGlkZXIoXCJvcHRpb25cIiwgXCJ2YWx1ZVwiKSk7XG4gICAgJChcIiNpbmNvbWVJbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjc2xpZGVySW5jb21lXCIpLnNsaWRlcihcInZhbHVlXCIsICQodGhpcykudmFsKCkpO1xuICAgIH0pO1xuICAgICQoXCIjc2xpZGVySW52ZXN0XCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMTAwMDAwLFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogNDAwMDAwLFxuICAgICAgICBzdGVwOiAxMDAwLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgICAgICAgICAkKFwiI2ludmVzdElucHV0XCIpLnZhbChkZWJ0VmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjaW52ZXN0SW5wdXRcIikudmFsKCQoXCIjc2xpZGVySW52ZXN0XCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIpKTtcbiAgICAkKFwiI2ludmVzdElucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIiNzbGlkZXJJbnZlc3RcIikuc2xpZGVyKFwidmFsdWVcIiwgJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG59KTsiXX0=
